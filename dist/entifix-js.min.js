"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var e=angular.module("entifix-js",["app.config","angular-jwt","angular-md5"]);function t(){var e=this;return e.CreateStringHtmlComponent=function(e){var t="";if(e.bindings&&0<e.bindings.length)for(var n=0;n<e.bindings.length;n++)t+=e.bindings[n].name+'="'+e.bindings[n].value+'"';var o="<"+e.name;return 0<t.length&&(o+=" "+t),o+="></"+e.name+">"},e.CreateStringHtmlComponentAndBindings=function(e,t){var n="",o={};if(e.bindings&&0<e.bindings.length)for(var i=0;i<e.bindings.length;i++){var r=e.bindings[i],c=r.name+"=",a=!1;"string"==typeof r.value&&(c+='"'+r.value,a=!0),!a&&t&&null!=r.value&&(c+='"'+t+"."+r.name,o[r.name]=r.value,a=!0),a&&(n+=" "+c+(r.isExecutable?'()"':'"'))}var s="<"+e.name;return 0<n.length&&(s+=n),{stringhtml:s+="></"+e.name+">",objectbindings:o}},e}e.directive("compile",["$compile",function(i){return function(t,n,o){t.$watch(function(e){return e.$eval(o.compile)},function(e){n.html(e),i(n.contents())(t)})}}]),e.service("BaseComponentFunctions",t),t.$inject=[]}(),angular.module("entifix-js").provider("EntifixSession",[function(){this.$get=["EntifixConfig","$state","$injector","jwtHelper","md5","$window",function(c,o,a,i,s,u){var l={},m=!1,t=null,n=null,r=null,d=null,p=!1,g=null;function v(){l.logout()}return l.isInLoginProcess={get:function(){return m}},l.isRefreshingToken={get:function(){return p},set:function(e){p=e}},l.redirect={get:function(){return localStorage.getItem(c.redirectName)},set:function(e){localStorage.setItem(c.redirectName.get(),e)},remove:function(){localStorage.removeItem(c.redirectName.get())}},l.authApp={get:function(){return localStorage.getItem(c.authAppName)},set:function(e){localStorage.setItem(c.authAppName.get(),e)},remove:function(){localStorage.removeItem(c.authAppName.get())}},l.authToken={get:function(){return localStorage.getItem(c.authTokenName.get())},set:function(e){localStorage.setItem(c.authTokenName.get(),e)},remove:function(){localStorage.removeItem(c.authTokenName.get())}},l.refreshTokenLS={get:function(){return localStorage.getItem(c.refreshTokenName.get())},set:function(e){localStorage.setItem(c.refreshTokenName.get(),e)},remove:function(){localStorage.removeItem(c.refreshTokenName.get())}},l.permissionsToken={get:function(){return localStorage.getItem(c.permissionsTokenName.get())},set:function(e){localStorage.setItem(c.permissionsTokenName.get(),e)},remove:function(){localStorage.removeItem(c.permissionsTokenName.get())}},l.user={get:function(){return g},set:function(e){return g=e}},l.expiredSessionKey={set:function(e){localStorage.setItem(c.expiredSessionKeyName.get(),e)},remove:function(){localStorage.removeItem(c.expiredSessionKeyName.get())}},l.currentUser={get:function(){if(null==t){var e=l.authToken.get();e&&(t=i.decodeToken(e).name)}return t}},l.currentUserName={get:function(){if(null==n){var e=l.authToken.get();e&&(n=i.decodeToken(e).userName)}return n}},l.currentSystemOwner={get:function(){var e=l.authToken.get();return e&&(r=i.decodeToken(e).systemOwner),r}},l.currentPermissions={get:function(){if(null==d){var e=l.permissionsToken.get();e&&(d=i.decodeToken(e).permissions)}return d}},l.TryLogIn=function(e,t,n,o,i){m=!0;var r=s.createHash(t);a.get("$http")({method:"POST",url:c.authUrl.get(),data:{user:e,password:r}}).then(function(e){var t;e.data.isLogicError?(c.devMode.get()&&console.info("DevMode: Login reject with message - "+e.data.message),o&&o(e.data.message),m=!1):(c.devMode.get()&&console.info("DevMode: Login success"),l.saveTokens(e.data.data[c.authTokenName.get()],e.data.data[c.refreshTokenName.get()]),n&&n(),m=!1,n||c.devMode.get()||(null!=(t=l.redirect.get())?(l.redirect.remove(),l.authApp.remove(),u.location.href=t):c.thisApplication.get()&&(u.location.href=c.thisApplication.get())))},function(e){c.devMode.get()&&console.warn("DevMode: Login error"),i&&i(e),m=!1})},l.refreshToken=function(t,n,o){!l.refreshTokenLS.get()||i.isTokenExpired(l.refreshTokenLS.get())||l.isRefreshingToken.get()?c.devMode.get()?(console.warn("DevMode: There is no refresh token"),l.tryLoginAsDeveloper().then(function(){console.info("Login successfully")}).catch(function(e){console.error("Error when trying login as developer "+e)})):(l.expiredSessionKey.set(!0),v()):(m=!0,l.isRefreshingToken.set(!0),a.get("$http")({method:"POST",url:c.refreshUrl.get(),data:_defineProperty({},c.refreshTokenName.get(),l.refreshTokenLS.get())}).then(function(e){e.data.isLogicError?(n&&n(e.data.message),c.devMode.get()?(console.info("DevMode: Refresh token reject with message - "+e.data.message),l.tryLoginAsDeveloper()):v()):(c.devMode.get()&&console.info("DevMode: Refresh success"),l.saveTokens(e.data.data[c.authTokenName.get()],e.data.data[c.refreshTokenName.get()]),t&&t(e.data)),m=!1,l.isRefreshingToken.set(!1)},function(e){m=!1,l.isRefreshingToken.set(!1),o&&o(e),c.devMode.get()?(console.warn("DevMode: Refresh token error"),l.tryLoginAsDeveloper()):(l.expiredSessionKey.set(!0),v())}))},l.checkPermissions=function(t){return!!l.currentPermissions.get()&&(t instanceof String?0<l.currentPermissions.get().filter(function(e){return e==t}).length:t instanceof Array?0<t.filter(function(t){return 0<l.currentPermissions.get().filter(function(e){return e==t}).length}).length:void 0)},l.checkNavigation=function(e){!function(e){e.$from();var t=e.$to(),n=t.skipAuthorization||!1,o=null!=l.authToken.get()&&!i.isTokenExpired(l.refreshTokenLS.get());!t.data||!t.data.requiresLogin&&!t.data.requiresLoginDev||n||o||(c.devMode.get()?(console.info("DevMode: No active session"),c.authApplication.get()?console.warn("DevMode: Redirect to "+c.authApplication.get()):console.warn("DevMode: No auth application registered")):(e.abort(),v()))}(e),function(e){e.$from();var t=e.$to();if(t.data&&t.data.securityContext&&!l.checkPermissions(t.data.securityContext)){var n="There is no unauthorized state defined";c.devMode.get()?(console.info("DevMode: Not allowed acces to this state => "+t.name),console.warn(n)):c.unauthorizedStateName.get()?(console.warn("Permission required: "+t.data.securityContext+" - Redirect to no authorization state: "+c.unauthorizedStateName.get()),e.abort(),o.go(c.unauthorizedStateName.get())):console.error(n)}}(e)},l.tryLoginAsDeveloper=function(){return new Promise(function(e,t){c.devMode.get()||(console.error("Developer login tried in without DevMode"),t()),c.devUser.get()||(console.warn("DevMode: No developer user configuration"),t()),l.TryLogIn(c.devUser.get().user,c.devUser.get().password,e,null,t)})},l.loadPermissions=function(){a.get("$http")({method:"GET",url:c.permissionsUrl.get()}).then(function(e){l.permissionsToken.set(e.data.data[c.permissionsTokenName.get()])},function(e){var t=a.get("$mdToast");t.show(t.simple().textContent("Error when trying to load permissions...").position("bottom right").hideDelay(3e3))})},l.saveTokens=function(e,t){l.authToken.set(e),l.refreshTokenLS.set(t),l.expiredSessionKey.remove()},l.logout=function(){l.authToken.remove(),l.refreshTokenLS.remove(),l.permissionsToken.remove(),l.redirect.set(c.thisApplication.get()),l.authApp.set(c.authUrl.get()),u.location.href=c.authApplication.get()},l}]}]),function(){var e={template:'<div layout="column" layout-align="center center">                         <div>                             <img ng-src="{{vm.imgError}}"/>                         </div>                         <div class="text-danger">                             <h1>&nbsp; {{vm.header}}</h1>                         </div>                         <div>                             <h2>{{vm.infoError}}</h2>                         </div>                         <div>                             <h3>{{vm.infoUser}}</h3>                         </div>                         <div>                             <p>{{vm.footer}}</p>                         </div>                     </div>                     ',controller:t,controllerAs:"vm",bindings:{infoError:"@",header:"@",infoUser:"@",footer:"@",imgError:"@"}};function t(e){var t=this;t.$onInit=function(){t.nameCurrentUser=e.currentUser.get(),t.currentUserName=e.currentUserName.get(),t.header=t.header?t.header:"Acceso Restringido",t.infoError=t.infoError?t.infoError:"El usuario actual no tiene permisos para ver el recurso solicitado",t.infoUser=t.infoUser?t.infoUser:"Usuario: "+t.nameCurrentUser+" - "+t.currentUserName,t.footer=t.footer?t.footer:"Si necesita el acceso, por favor comuníquese con el administrador del sistema.",t.imgError=t.imgError?t.imgError:"./app/img/error.png"}}t.$inject=["EntifixSession"],angular.module("entifix-js").component("entifixNoAuthorized",e)}(),angular.module("entifix-js").filter("percentage",["$filter",function(n){return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return n("number")(100*e,t)+"%"}}]),angular.module("entifix-js").directive("entifixElasticTextArea",["$timeout",function(o){return{restrict:"A",link:function(e,t){e.initialHeight=e.initialHeight||t[0].style.height;var n=function(){""!=e.initialHeight?(t[0].style.height=e.initialHeight,e.initialHeight=""):t[0].style.height=t[0].scrollHeight+"px"};t.on("input change",n),o(n,0)}}}]),angular.module("entifix-js").directive("entifixFileRead",[function(){return{require:"ngModel",link:function(e,n,o,i){n.on("change",function(e){if(o.multiple)t=n[0].files,i.$setViewValue(t);else{var t=n[0].files[0];i.$setViewValue(t)}})}}}]),angular.module("entifix-js").directive("entifixNextFocus",function(){return{restrict:"A",link:function(e,t,s){t.bind("keydown",function(e){var t,n,o=e.keyCode||e.which;if(13===o||39===o||9===o){var i;e.preventDefault();var r=document.querySelectorAll(s.nextFocus);e.target,i=!1,n=r.length;for(var c=0;c<n;c++){var a=r[c];if(i){if("none"!==a.style.display){a.focus();break}}else a===e.target&&(i=!0)}}if(37===o)for(e.preventDefault(),r=document.querySelectorAll(s.nextFocus),e.target,t=!1,c=(n=r.length)-1;0<=c;c--)if(a=r[c],t){if("none"!==a.style.display){a.focus();break}}else a===e.target&&(t=!0)})}}}),angular.module("entifix-js").directive("entifixNumberBlock",function(){return{restrict:"A",link:function(e,t,n){"true"==n.numberValidation&&t.bind("keydown",function(e){var t=e.keyCode||e.which;8===t||46===t||110===t||190===t||9===t||37===t||39===t||48<=t&&t<=57&&!e.shiftKey||96<=t&&t<=105&&!e.shiftKey||e.preventDefault()})}}}),angular.module("entifix-js").directive("entifixNumberValidation",function(){return{require:"ngModel",link:function(e,t,n,o){"true"==n.numberValidation&&o.$parsers.push(function(e){return o.$isEmpty(e)?(o.$setValidity("number",!0),null):!isNaN(parseFloat(e))&&isFinite(e)?(o.$setValidity("number",!0),e):void o.$setValidity("number",!1)})}}}),angular.module("entifix-js").directive("entifixSecurityContext",["EntifixSession","$compile",function(i,r){return{restrict:"A",priority:1001,terminal:!0,scope:{perm:"&permission"},compile:function(e,t){var n=t.entifixSecurityContext;e.removeAttr("entifix-security-context"),i.checkPermissions(n)?e.attr("ng-if",!0):e.attr("ng-if",!1);var o=r(e);return function(e){o(e)}}}}]),function(){function e(t){return function(){var s=[];function r(t,n,o){if("entity"==n.type){if(!(s&&0<s.length&&0<s.filter(function(e){return e.property==n.property}).length)){var e=(i=n,r=[],t.forEach(function(e){e[i.property]&&r.push({property:i.resource.getKeyProperty.get(),value:e[i.property]})}),r);n.resource.getEnumerationBind(n.display,function(e){s.push({property:n.property,enumResult:e}),c(t,n,o)},null,e)}c(t,n,o)}else c(t,n,o);var i,r}function c(e,c,a){e.forEach(function(i){var r=i[c.property];if(r&&"date"==c.type||"datetime"==c.type){if(!r||r instanceof Date)if(r)e=r;else e=null;else var e=t.transformStringToDate(r);i[c.outProperty||c.property]=t.transformDateToString(e,c.type,!0),a()}if("entity"==c.type){s&&0<s.length&&0<s.filter(function(e){return e.property==c.property&&e.enumResult.length}).length&&function(){var e=s.filter(function(e){return e.property==c.property});if(0<e.length){var t=e[0].enumResult;if(t&&0<t.length){var n=r;r instanceof Object&&(n=c.resource.getId(r));var o=t.filter(function(e){return e.Value==n});0<o.length&&(i[c.outProperty||c.property]=o[0].Display),a()}}}()}"boolean"==c.type&&(i[c.outProperty||c.property]=r?"Si":"No")})}this.transform=function(n){return new Promise(function(e,t){r(n.collection,n,function(){e()})})},this.transformMultiple=function(i){return s=[],new Promise(function(t,e){var n=0,o=0;i.properties.forEach(function(e){r(i.collection,e,function(){++n>=i.collection.length&&(n=0,++o>=i.properties.length&&t())})})})}}}angular.module("entifix-js").factory("EntifixCollectionFormatter",e),e.$inject=["EntifixDateGenerator"]}(),angular.module("entifix-js").provider("EntifixConfig",[function(){var t,n,o,i,r,c,a,s,u,l,m,d,p,g,v,f,C,h,y,e=this,b=!1;e.setAuthUrl=function(e){t=e},e.setRefreshUrl=function(e){n=e},e.setUnauthorizedStateName=function(e){o=e},e.setAuthTokenName=function(e){i=e},e.setRefreshTokenName=function(e){r=e},e.setRedirectName=function(e){a=e},e.setAuthName=function(e){s=e},e.setThisApplication=function(e){u=e},e.setAuthApplication=function(e){l=e},e.setDevMode=function(e){b=e},e.setDevUser=function(e){m=e},e.setPermissionsTokenName=function(e){d=e},e.setPermissionsUrl=function(e){p=e},e.setExpiredSessionKeyName=function(e){c=e},e.setSystemOwnerEntityName=function(e){g=e},e.setSystemOwnerEntitySwapName=function(e){v=e},e.setSystemOwnerDisplayName=function(e){f=e},e.setIdSystemOwnerPropertyName=function(e){C=e},e.setXlsSheetResourceName=function(e){h=e},e.setpdfResourceName=function(e){y=e},e.checkAuth=function(){localStorage.getItem(i)||(localStorage.setItem(a,u),localStorage.setItem(s,l),window.location.replace(l))},e.$get=[function(){var e={};return e.redirectName={get:function(){return a}},e.authAppName={get:function(){return s}},e.thisApplication={get:function(){return u}},e.authApplication={get:function(){return l}},e.authUrl={get:function(){return t}},e.refreshUrl={get:function(){return n}},e.devMode={get:function(){return b}},e.authTokenName={get:function(){return i}},e.refreshTokenName={get:function(){return r}},e.devUser={get:function(){return m}},e.unauthorizedStateName={get:function(){return o}},e.permissionsTokenName={get:function(){return d}},e.permissionsUrl={get:function(){return p}},e.expiredSessionKeyName={get:function(){return c}},e.systemOwnerEntityName={get:function(){return g}},e.systemOwnerEntitySwapName={get:function(){return v}},e.systemOwnerDisplayName={get:function(){return f}},e.idSystemOwnerPropertyName={get:function(){return C}},e.xlsSheetResourceName={get:function(){return h}},e.pdfResourceName={get:function(){return y}},e}]}]),function(){function e(t,e,n){this.unauthorizedError=function(e){t.refreshToken()},this.notFoundError=function(e){n.show(n.simple().textContent("¡Error 404! El recurso solicitado no fue encontrado.").position("bottom right").hideDelay(3e3))},this.internalServerError=function(e){n.show(n.simple().textContent("¡Error 500! El recurso solicitado presenta un error en el servidor.").position("bottom right").hideDelay(3e3))}}angular.module("entifix-js").service("EntifixErrorManager",e),e.$inject=["EntifixSession","$mdDialog","$mdToast"]}(),function(){function e(){var r=this;function o(t){var n=globalMetadata.resources.filter(function(e){return e.name==t})[0];return n.base?globalMetadata.resources.filter(function(e){return e.name==n.base})[0]:null}function i(t){return globalMetadata.resources.filter(function(e){return e.name==t})[0]}r.metadata={get:function(){return globalMetadata}},r.getDefinedMembers=function(e){var t=i(e).definedMembers||[];if(!i(e).denyInheritance)for(var n=o(e);n;)n.definedMembers&&(t=t.concat(n.definedMembers)),n=n.denyInheritance?null:o(n.name);return t},r.getExcludedMembers=function(e){for(var t=i(e).excludeMembers||[],n=o(e);n;)n.excludeMembers&&(t=t.concat(n.excludeMembers)),n=o(n.name);return t},r.getTransformProperties=function(e){return r.getDefinedMembers(e).filter(function(e){return e.transformType&&"false"!=e.transformType})},r.getPaginableProperties=function(e){return r.getDefinedMembers(e).filter(function(e){return"true"==e.paginable||1==e.paginable})},r.getJoinProperties=function(e){return r.getDefinedMembers(e).filter(function(e){return e.joinable})},r.getKeyProperty=function(e){for(var t=i(e).keyProperty,n=o(e);n&&!t;)n.keyProperty&&(t=n.keyProperty),n=o(n.name);return t||(t="id"),t},r.getOpProperty=function(e){for(var t=i(e).opProperty,n=o(e);n&&!t;)n.opProperty&&(t=n.opProperty),n=o(n.name);return t||(t="op"),t},r.getResourceURL=function(e){for(var t=i(e).url,n=o(e);n;)n&&n.url&&(t=n.url+"/"+t),n=o(n.name);return t},r.getTypeInfo=function(e){var t=i(e).type;if(!t)for(var n=o(e);n&&!t;)n.type&&(t=n.type),n=o(n.name);return t},r.allowUrlPrefix=function(e){var t=i(e).allowUrlPrefix;if(!t)for(var n=o(e);n&&!t;)t=n.allowUrlPrefix,n=o(n.name);return t||!1},r.allowUrlPostfix=function(e){var t=i(e).allowUrlPostfix;if(!t)for(var n=o(e);n&&!t;)t=n.allowPostfix,n=o(n.name);return t||!1},r.denyBarPrefix=function(e){return i(e).denyBarPrefix||!1},r.getDefaultUrl=function(e){var t=i(e).defaultUrl;return t||(t="default"),t},r.getRequestOptions=function(e){var t=i(e);return null!=t.requestOptions||null!=t.requestOptions?t.requestOptions:void 0},r.getStartDateProperty=function(e){var t=r.getDefinedMembers(e),n=null;return 0<t.length&&t.forEach(function(e){return!e.startDate||(n=e.name,!1)}),n},r.getEndDateProperty=function(e){var t=r.getDefinedMembers(e),n=null;return 0<t.length&&t.every(function(e){return!e.endDate||(n=e.name,!1)}),n},r.getNotApplyProperty=function(e){var t=r.getDefinedMembers(e),n=null;return 0<t.length&&t.every(function(e){return!e.notApply||(n=e.name,!1)}),n},r.isProcessedEntity=function(e,t){var n=r.getDefinedMembers(e),o=void 0,i=void 0;return 0<n.length&&n.every(function(e){return!e.processedValue||(o=e.name,i=e.processedValue,!1)}),t[o]==i},r.getBodyDataFile=function(e){return{title:e.title,columns:(n=e,o=[],n.columns.forEach(function(e,t){o.push({description:e.display,columnName:"Field_"+(t+1)})}),o),tableStriped:null!=e.tableStriped?e.tableStriped:"true",pageSize:e.pageSize||"Letter",pageOrientation:e.pageOrientation||"Landscape",data:(t=e,i=[],t.data.forEach(function(n){var o={};t.columns.forEach(function(e,t){o["Field_"+(t+1)]=n[e.name]||""}),i.push(o)}),i)};var t,i,n,o}}angular.module("entifix-js").service("EntifixMetadata",e),e.$inject=[]}(),function(){function e(){var e=this;return e.success=function(e){var t=e.body||"Acción realizada correctamente",n=e.header||"¡Hecho!";e.isToast?swal.mixin({toast:!0,position:e.position||"bottom-end",timer:e.timer||3e3})({type:"success",title:n+" "+t}):swal(n,t,"success")},e.error=function(e){var t=e.body||"Error al realizar la acción solicitada",n=e.header||"¡Error!";e.isToast?swal.mixin({toast:!0,position:e.position||"bottom-end",timer:e.timer||3e3})({type:"error",title:n+" "+t}):swal(n,t,"error")},e.info=function(e){var t=e.body||"",n=e.header||"Información";e.isToast?swal.mixin({toast:!0,position:e.position||"bottom-end",timer:e.timer||3e3})({type:"info",title:n+" "+t}):swal(n,t,"info")},e.warning=function(e){var t=e.body||"",n=e.header||"Precaución";e.isToast?swal.mixin({toast:!0,position:e.position||"bottom-end",timer:3e3})({type:"warning",title:n+" "+t}):swal(n,t,"warning")},e.confirm=function(t){var e=t.header||"¿Está seguro de proceder?";swal({title:e,text:t.body,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:t.confirmButtonText||"Sí",cancelButtonText:t.cancelButtonText||"No"}).then(function(e){e.value&&t.actionConfirm?t.actionConfirm(e):t.actionCancel&&t.actionCancel(e)}).catch(function(e){t.actionCancel&&t.actionCancel(e)})},e}angular.module("entifix-js").service("EntifixNotification",e),e.$inject=[]}(),function(){function e(d){return function(e,n){var t=this,o="Registro guardado correctamente",i="Registro eliminado correctamente",r="No se pudo guardar el registro correctamente. Por favor inténtelo de nuevo",c="No se pudo guardar el registro porque no todos los datos están correctos";t.savedMessage={get:function(){return o},set:function(e){o=e}},t.deletedMessage={get:function(){return i},set:function(e){i=e}},t.errorSaveMessage={get:function(){return r},set:function(e){o=e}},t.errorDeleteMessage={get:function(){return errorDeleteMessage},set:function(e){errorDeleteMessage=e}},t.errorValidationMessage={get:function(){return c},set:function(e){errorValidationMessage=e}};var a=function(e){var t=o;e.message&&(t=e.message),d.success({body:t,header:void 0,isToast:n})},s=function(e){var t=i;e.message&&(t=e.message),d.success({body:t,header:void 0,isToast:n})},u=function(e){var t=r;e.message&&(t=e.message),d.error({body:t,header:void 0,isToast:n})},l=function(e){var t="No se pudo eliminar el registro correctamente. Por favor inténtelo de nuevo";e.message&&(t=e.message),d.error({body:t,header:void 0,isToast:n})},m=function(e){var t=c;e.message&&(t=e.message),d.error({body:t,header:void 0,isToast:n})};e.listenSaved(a),e.listenDeleted(s),e.listenErrorSave(u),e.listenErrorDelete(l),e.listenNonValidSave(m)}}angular.module("entifix-js").factory("EntifixNotifier",e),e.$inject=["EntifixNotification"]}(),function(){function e(f){return function(t,e,a){var n,s,o,i,r,c,u,l,m=this,d=!1;m.isLoading={get:function(){return d}},m.sizeGetter={get:function(){return c},set:function(e){c=e}},m.pageGetter={get:function(){return u},set:function(e){u=e}},m.searchTextGetter={get:function(){return o},set:function(e){o=e}},m.searchArrayGetter={get:function(){return i},set:function(e){i=e}},m.columnsSelectedGetter={get:function(){return r},set:function(e){r=e}},m.inverseOrder={get:function(){return l},set:function(e){l=e}},m.showPageControls={get:function(){return e&&null!=e.showPageControls?e.showPageControls:!!(m.currentData&&m.currentData.length&&0<m.currentData.length)}};var p={get:function(){return e&&e.inicialSize?e.inicialSize:10}},g={get:function(){return e&&e.inicialPageSizes?e.inicialPageSizes:[10,25,50,100,200]}},v={get:function(){return e&&e.inicialCurrentPage?e.inicialCurrentPage:1}};m.listenBeforeLoad=function(e){n=e},m.listenAfterLoad=function(e){s=e},m.reload=function(){return function(){{if(t.resource)return d=!0,n&&n(),t.resource.getEntityPagination((m.getPage()-1)*m.getSize(),m.getSize(),m.getConstantFilters(),t.resource.getPagFilters(m.getSearchText(),m.getSearchArray(),m.getColumnsSelectedGetter()),t.sort).then(function(e){if(e){for(var t=e.total,n=m.getPage(),o=m.getSize(),i=1;i<=m.getSize();i++)if(l){var r=t-(n-1)*o,c=t-(n-1)*o-r-i;0<c&&(e.resultSet[i].order=c)}else{var c=(n-1)*o+i;c<=t&&(e.resultSet[i-1]?e.resultSet[i-1].order=c:console.info("Error en la paginación de registros. No concuerdan el total en el encabezado y la cantidad registros en el detalle"))}m.formater.transformMultiple({collection:e.resultSet,properties:a}).then(function(){m.currentData=e.resultSet}),m.currentData=e.resultSet,m.totalData=e.total,s&&s()}d=!1},function(e){return d=!1,e});console.error("No se ha construido correctamente el paginador")}}()},m.getSize=function(){return c?c():m.size?m.size:10},m.getPage=function(){return u?u():m.page?m.page:1},m.getConstantFilters=function(){var e=null;return t&&t.constantFilters&&(e=t.constantFilters.getter?t.constantFilters.getter():t.constantFilters),e},m.getSearchText=function(){return o?o():m.searchText?m.searchText:null},m.getSearchArray=function(){return i?i():m.searchArray?m.searchArray:null},m.getColumnsSelectedGetter=function(){return r?r():m.columnsSelected?m.columnsSelected:null},m.getDescriptionText=function(){if(m.currentData&&0<m.currentData.length){var e=(m.getPage()-1)*m.getSize()+1;return"Mostrando del "+e+" al "+(e+m.currentData.length-1)+" de "+m.totalData+" registros"}return"No hay registros que mostrar"},m.sortTableColumns={set:function(e){e&&(t.sort=e)}},m.pageSizes=g.get(),m.size=p.get(),m.page=v.get(),m.formater=new f}}angular.module("entifix-js").factory("EntifixPager",e),e.$inject=["EntifixCollectionFormatter"]}(),function(){function e(R,$,j,z){return function(C){var r=this,a=function(e,t,n,o,i){var r=u();o&&(r=r+"/"+o),n&&(r+=n),t=t||S;var c={method:"GET",url:r};if(i)return R(c).then(function(e){return V(w.loaded,e),e});R(c).then(e,t)},o=function(e,t,n){var o=u();n=n||S;var i={method:"POST",url:o,data:e=l(e)},r=L();r&&(i.headers=r.headers),R(i).then(t,n)},i=function(e,t,n){var o=u();n=n||S;var i={method:"PUT",url:o,data:e=l(e)},r=L();r&&(i.headers=r.headers),R(i).then(t,n)},s=function(e,t,n){var o=u();n=n||S,R({method:"DELETE",url:o=o+"/"+e}).then(t,n)},c=function(e,t,n){var o=u();n=n||S;var i={method:"PATCH",url:o,data:e=l(e)},r=L();r&&(i.headers=r.headers),R(i).then(t,n)};function u(){var e=f,t=r.urlPostfix.get();return t&&(T||(e+="/"),e+=t),e}function l(e){var t=$.getTypeInfo(C);t&&e[t.property]&&e[h]&&(e[t.property]=_defineProperty({},t.property,t.value));var n=$.getTransformProperties(C);if(0<n.length)for(var o=0;o<n.length;o++){var i=n[o];if(e[i.name]){if("entity"==i.type){var r=e[i.name];if(!isNaN(r)){var c=r,a=i.keyNavigationProperty||$.getKeyProperty(i.resource);e[i.name]=_defineProperty({},a,c)}}if("date"==i.type||"datetime"==i.type){if(e[i.name]instanceof Date)s=e[i.name];else var s=z.transformStringToDate(e[i.name]);e[i.name]=z.transformDateToString(s,i.type,!1)}}}for(var u in e)"$"==u.substr(0,1)&&delete e[u];var l=$.getExcludedMembers(C);for(o=0;o<l.length;o++)delete e[l[o]];if(t&&t.type)switch(t.type){case"FormData":var m=new FormData;for(var d in e)m.append(d,e[d]);e=m}return e}var t,n,m=!1,d=!1,p=!1,e=null,g=!1,v=!1,f=$.getResourceURL(C),h=$.getKeyProperty(C),y=$.getOpProperty(C),b=$.allowUrlPrefix(C),x=$.allowUrlPostfix(C),T=$.denyBarPrefix(C),S=function(e){m=d=p=!1},D=function(e){switch(e.status){case 401:j.unauthorizedError(e);break;case 404:j.notFoundError(e);break;case 412:j.preconditionFailedError(e);break;case 500:j.internalServerError(e)}},w={save:1,delete:2,load:3,saved:4,deleted:5,loaded:6,errorSave:7,errorDelete:8,errorLoad:9,nonValidSave:10};function M(e){return{message:e.data?e.data.message:e.data,fullResponse:e}}function E(n,o){return function(e){var t=e.data&&!e.data.isLogicError;!v&&n&&n(e,t),m=!1,200<=e.status&&e.status<300||D(e),o?V(w.errorSave,M(e)):v||V(t?w.saved:w.nonValidSave,M(e)),v&&n&&n(e)}}function k(t,n){return function(e){n=n||e.data&&e.data.isLogicError,t&&t(e),d=!1,200<=e.status&&e.status<300||D(e),V(n?w.errorLoad:w.loaded,M(e))}}function q(t,n){return function(e){n=n||e.data&&e.data.isLogicError,!g&&t&&t(e,n),p=!1,200<=e.status&&e.status<300||D(e),n?V(w.errorDelete,M(e)):g||V(w.deleted,M(e)),g&&t&&t(e)}}function P(e,t,n){(1!=m||v)&&(m=!0,V(w.save),o(e,E(t,!1),E(n,!0)))}function F(e,t,n){(1!=m||v)&&(m=!0,V(w.save),i(e,E(t,!1),E(n,!0)))}function A(e,t,n){(1!=m||v)&&(m=!0,V(w.save),c(e,E(t,!1),E(n,!0)))}function B(e,t,n){d=!0,a(k(function(e){d=!0,t&&t(function(e){if(e){var t=$.getTransformProperties(C);if(0<t.length)for(var n=0;n<t.length;n++){var o=t[n];if(e[o.name]){if("entity"==o.type){var i=(c=e[o.name])[o.keyNavigationProperty||$.getKeyProperty(o.resource)];if(o.propertiesToMembers)for(var r=0;r<o.propertiesToMembers.length;r++)o.propertiesToMembers[r]instanceof Object&&(e[o.propertiesToMembers[r].to||o.propertiesToMembers[r].name]=c[o.propertiesToMembers[r].name]);e[o.name]=i}var c;"date"!=o.type&&"datetime"!=o.type||(c=e[o.name])instanceof Date||(e[o.name]=z.transformStringToDate(c))}}return e}return null}(e.data?e.data.data:e.data)),d=!1}),k(n),O(e))}function O(e){if(e){var t=null;return isNaN(e)?"string"==typeof e?t="/"+e:e instanceof Array&&(t=function(e){if(e&&e instanceof Array){if(0<e.length){for(var t="?",n=0;n<e.length;n++){var o=e[n].property,i=e[n].value,r=e[n].type||"optional_filter",c=e[n].operator||"=",a=e[n].sort;if(null!=i&&(null!=o||null!=a))if("function"==typeof i){var s=i();s&&(t=a?t+"order_by="+a+"|"+s:"skip"==o||"take"==o?t+o+"="+s:t+r+"="+o+"|"+c+"|"+s)}else t=a?t+"order_by="+a+"|"+i:"skip"===o||"take"===o||"custom"===r?t+o+"="+i:t+r+"="+o+"|"+c+"|"+i;n<e.length-1&&(t+="&")}return t}return null}return null}(e)):t="/"+e,t}return null}function L(){return $.getRequestOptions(C)}function N(n,e){var o=[];return e.forEach(function(t){var e=n.filter(function(e){return e.display===t});0<e.length&&!e[0].alwaysExclude&&o.push(e[0])}),n.forEach(function(e){e.alwaysInclude&&(o.includes(e)||o.push(e))}),o}function I(t,n){e?0==e.filter(function(e){return e.callback===t&&e.type==n}).length&&e.push({callback:t,type:n}):e=[{callback:t,type:n}]}function V(t,n){e&&0<e.length&&e.filter(function(e){return e.type==t}).forEach(function(e){e.callback(n)})}r.resourceName={get:function(){return C}},r.isSaving={get:function(){return m||v}},r.isLoading={get:function(){return d}},r.isDeleting={get:function(){return p||g}},r.events={get:function(){return e}},r.onMultipleDeletion={get:function(){return g},set:function(e){g=e}},r.onMultipleStorage={get:function(){return v},set:function(e){v=e}},r.urlPrefix={get:function(){if(b&&t){if(t instanceof Object&&t.getter)return t.getter();if(t)return t}return null},set:function(e){b&&(t=e)}},r.urlPostfix={get:function(){if(x&&n){if(n instanceof Object&&n.getter)return n.getter();if(n)return n}return null},set:function(e){x&&(n=e)}},r.getCompleteResourceUrl={get:function(){return u()}},r.getCompleteFiltersUrl={get:function(e,t,n,o){return o||(o=[]),O(r.getPagFilters(e,t,n).concat(o))}},r.getMembersResource={get:function(){return $.getDefinedMembers(C).filter(function(e){return!e.notDisplay})}},r.getKeyProperty={get:function(){return h}},r.getOpProperty={get:function(){return y}},r.getEntityById=function(n,e,t,o){d=!0,e=e||S;var i=null;o&&o instanceof Function&&(i=o()),a(k(function(e){d=!0;var t=e.data?e.data.data:{};n(t),d=!1}),k(e),O(t),i)},r.getCollection=function(n,e,t,o){d=!0,e=e||S;var i=null;o&&o instanceof Function&&(i=o()),a(k(function(e){d=!0;var t=e.data?e.data.data:[];n(t),d=!1}),k(e),O(t),i)},r.getEnumerationBind=function(n,o,e,t){return r.getCollection(function(e){var t=[];e.forEach(function(e){t.push({Value:e[h],Display:e[n],entity:e})}),o(t)},e,t)},r.getEnumerationBindMultiDisplay=function(i){return r.getCollection(function(e){var o=[];e.forEach(function(t){if(i.displayProperties){var n="";i.displayProperties.forEach(function(e){e.type?n+=t[e.property][e.display]+" - ":n+=t[e.property]+" - "}),n=n.substring(0,n.length-2),o.push({Value:t[h],Display:n,entity:t})}}),i.actionSuccess(o)},i.actionError,i.filters)},r.getDefault=function(n,e){var t=$.getDefaultUrl(C);d=!0,e=e||S,a(k(function(e){d=!0;var t=e.data?e.data.data:[];n(t),d=!1}),k(e),null,t)},r.saveEntity=function(e,t,n){e[h]?e[y]?A(e,t,n):F(e,t,n):P(e,t,n)},r.insertEntity=function(e,t,n){P(e,t,n)},r.updateEntity=function(e,t,n){F(e,t,n)},r.replaceEntity=function(e,t,n){A(e,t,n)},r.deleteEntity=function(e,t,n){var o,i,r,c=e;e instanceof Object&&(c=e[h]),o=c,i=t,r=n,(1!=p||g)&&(p=!0,V(w.delete),s(o,q(i,!1),q(r,!0)))},r.loadAsResource=function(e,t,n){var o=e;e instanceof Object&&(o=e[h]),B(o,t,n)},r.getEntityPagination=function(e,t,n,o,i){d=!0;var r="",c=[{property:"skip",value:e},{property:"take",value:t}];return n&&(n instanceof String&&(r=n+"/"+r),n instanceof Function&&(r=n()?n()+"/"+r:r),n instanceof Array&&0<n.length&&(c=c.concat(n))),o&&0<o.length&&(c=c.concat(o)),i&&0<i.length&&(c=c.concat(i)),a(null,null,O(c),r,!0).then(function(e){var t={resultSet:e.data?e.data.data:e.data,total:parseInt(e.data?e.data.info.total:e.data)};return d=!1,t},function(e){d=!1,D(e)})},r.getPagFilters=function(e,t,n){var o=[];if(e&&(!t||t.length<=0)){var i=N($.getPaginableProperties(C),n),r=N($.getJoinProperties(C),n),c=!0,a=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(c=(u=l.next()).done);c=!0)(f=u.value).type&&"text"!==f.type&&"date"!==f.type&&"datetime"!==f.type?"boolean"!==f.type&&"number"!==f.type||o.push({property:f.pageProperty||f.name,value:e,operator:"eq"}):o.push({property:f.pageProperty||f.name,value:e,operator:"lk"})}catch(e){a=!0,s=e}finally{try{!c&&l.return&&l.return()}finally{if(a)throw s}}var m=!0,d=!1,p=void 0;try{for(var g,v=r[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var f=g.value;o.push({property:r[f].propertySearch,value:e}),o.push({property:r[f].name,value:"join;"+r[f].propertyJoin})}}catch(e){d=!0,p=e}finally{try{!m&&v.return&&v.return()}finally{if(d)throw p}}}else t&&t.forEach(function(e){o.push({property:e.property,value:e.value,type:"fixed_filter",operator:e.operator})});return o},r.getFile=function(a,e,t){var n=e||function(e){var t,n,o,i,r,c;t=e,o=(n=a).contentType||null,i=new Blob([t.data],{type:o}),r=(window.URL||window.webkitURL).createObjectURL(i),(c=document.createElement("a")).download=n.fileName,c.href=r,document.body.appendChild(c),c.click(),document.body.removeChild(c),a.callbackSuccess&&a.callbackSuccess()},o=t||function(e){D(e),a.callbackError&&a.callbackError()},i=void 0;switch(a.requestType){case"simple-page":i={method:"POST",url:u(),data:$.getBodyDataFile(a),responseType:"arraybuffer"};break;case"all-pages":i={method:"GET",url:u()+O(r.getPagFilters(a.searchText,a.searchArray,a.columnsSelected).concat(a.constantFilters)),responseType:"arraybuffer"};break;case"custom-report":i={method:"POST",url:u(),data:a.data,responseType:"arraybuffer"};break;default:i={method:a.method,url:u(),data:a.data,responseType:a.responseType}}a.headers&&(i.headers=a.headers),R(i).then(n,o)},r.getId=function(e){if(e&&e instanceof Object&&e[h]){var t=e[h];return isNaN(t)?t:parseInt(t)}return null},r.isNewEntity=function(e){return null==r.getId(e)},r.isProcessedEntity=function(e){return $.isProcessedEntity(C,e)},r.getStartDateProperty=function(){return $.getStartDateProperty(C)},r.getEndDateProperty=function(){return $.getEndDateProperty(C)},r.getNotApplyProperty=function(){return $.getNotApplyProperty(C)},r.listenSave=function(e){I(e,w.save)},r.listenSaved=function(e){I(e,w.saved)},r.listenDelete=function(e){I(e,w.delete)},r.listenDeleted=function(e){I(e,w.deleted)},r.listenLoad=function(e){I(e,w.load)},r.listenLoaded=function(e){I(e,w.loaded)},r.listenErrorSave=function(e){I(e,w.errorSave)},r.listenErrorDelete=function(e){I(e,w.errorDelete)},r.listenErrorLoad=function(e){I(e,w.errorLoad)},r.listenNonValidSave=function(e){I(e,w.nonValidSave)},r.clearEvents=function(){e=[]}}}angular.module("entifix-js").factory("EntifixResource",e),e.$inject=["$http","EntifixMetadata","EntifixErrorManager","EntifixDateGenerator"]}(),angular.module("entifix-js").provider("EntifixResourceMetadata",[function(){var r;this.setMainAPI=function(e){r=e},this.$get=["$http","$mdToast",function(e,t){var n={};function o(e){var n;n=e.data.data,globalMetadata.resources.forEach(function(t){n.forEach(function(e){t.name==e.resourceName&&(t.url=e.apiUrl)})})}function i(){t.show(t.simple().textContent("Error when trying to load metadata...").position("bottom right").hideDelay(3e3))}return n.loadMetadata=function(){e({method:"GET",url:r}).then(o,i)},n}]}]),function(){function e(o,n,i,r,t){function c(e,t){i.isRefreshingToken.get()?n(c,1e3,!0,e,t):(t.headers.Authorization="Bearer "+i.authToken.get(),e.resolve(t))}return{request:function(e){return e&&".html"==e.url.substr(e.url.length-5)||e.url&&(e.url==t.authUrl.get()||e.url==t.refreshUrl.get())?e:function(e){var t=i.authToken.get();if(t){if(r.isTokenExpired(t)&&!i.isRefreshingToken.get()&&i.refreshToken(),i.isRefreshingToken.get()){var n=o.defer();return c(n,e),n.promise}return e}return e}(e)}}}angular.module("entifix-js").factory("EntifixTokenInterceptor",e),e.$inject=["$q","$timeout","EntifixSession","jwtHelper","EntifixConfig"]}(),function(){function e(){this.transformStringToDate=function(e){if("Invalid Date"===(r=new Date(e))||isNaN(r)){var t=e.split("-");if(0<t.length&&2<t[0].length)var n=!1;else n=!0;if(10<e.length)var o=!0;else o=!1;if(!e||e instanceof Date)return e||null;if(o){if(n){var i=/(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2}):(\d{2})/.exec(e);return new Date(+i[3],+i[2]-1,+i[1],+i[4],+i[5],+i[6])}i=/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/.exec(e);return new Date(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6])}if(n){i=/(\d{2})-(\d{2})-(\d{4})/.exec(e);return new Date(+i[3],+i[2]-1,+i[1])}i=/(\d{4})-(\d{2})-(\d{2})/.exec(e);return new Date(+i[3],+i[2]-1,+i[1])}return new Date(e);var r},this.transformDateToString=function(e,t,n){var o;t=t.toUpperCase();if(e instanceof Date){if("DATE"==t||"DATETIME"==t){var i=e.getFullYear(),r=(e.getMonth()+1).toString(),c=e.getDate().toString();r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),o=n?c+"-"+r+"-"+i:i+"-"+r+"-"+c}if("DATETIME"==t||"TIME"==t){var a=e.getHours().toString(),s=e.getMinutes().toString(),u=e.getSeconds().toString();a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),u.length<2&&(u="0"+u),"DATETIME"==t&&(o+=" "),o+=a+":"+s+":"+u}return o}return e}}angular.module("entifix-js").service("EntifixDateGenerator",e),e.$inject=[]}(),function(){function e(){var n="!@#$^&%*()+=-[]/{}|:<>?,.";this.getCleanedString=function(e){for(var t=0;t<n.length;t++)e=e.replace(new RegExp("\\"+n[t],"gi"),"");return e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}}angular.module("entifix-js").service("EntifixStringUtils",e),e.$inject=[]}(),function(){function e(t,n,i,o,r,e){var l=this;function c(){if(l.componentConstruction.reload=l.reload,m("search")&&(l.tableComponentConstruction.search||(l.tableComponentConstruction.search={})),m("edit")){l.tableComponentConstruction.edit||(l.tableComponentConstruction.edit={});var t=l.tableComponentConstruction.edit.customAction;l.tableComponentConstruction.edit.customAction=function(e){t?t(e):l.entityQueryDetails.resource.loadAsResource(e[l.entityQueryDetails.resource.getKeyProperty.get()],function(e){l.isModal.get()?l.openModal(e):l.changeToSingleView(e)})}}if(m("add")){l.tableComponentConstruction.add||(l.tableComponentConstruction.add={});var e=l.tableComponentConstruction.add.customAction;l.tableComponentConstruction.add.customAction=function(){e?e():l.isModal.get()?l.openModal():l.changeToSingleView()}}if(m("remove")){l.tableComponentConstruction.remove||(l.tableComponentConstruction.remove={});var n=l.tableComponentConstruction.remove.customAction;n&&(l.tableComponentConstruction.remove.customAction=function(e){n(e)})}if(l.isProcessEntity.get()&&m("process")){l.tableComponentConstruction.process||(l.tableComponentConstruction.process={});var o=l.tableComponentConstruction.process.customAction;o&&(l.tableComponentConstruction.process.customAction=function(e){o(e)})}if(l.tableQueryDetails||(l.tableQueryDetails=l.queryDetails),l.entityQueryDetails||(l.entityQueryDetails=l.queryDetails),!l.isModal.get()){if(d("cancel")){l.entityComponentConstruction.cancel||(l.entityComponentConstruction.cancel={});var i=l.entityComponentConstruction.cancel.customAction;l.entityComponentConstruction.cancel.customAction=function(){i?i():l.entityQueryDetails.resource.isNewEntity(l.entityComponentBindingOut.entity.get())?l.changeToMainView():p()}}if(d("ok")){l.entityComponentConstruction.ok||(l.entityComponentConstruction.ok={});var r=l.entityComponentConstruction.ok.customAction;l.entityComponentConstruction.ok.customAction=function(){r?r():l.changeToMainView()}}if(d("edit")){l.entityComponentConstruction.edit||(l.entityComponentConstruction.edit={});var c=l.entityComponentConstruction.edit.customAction;c&&(l.entityComponentConstruction.edit.customAction=function(e){c(e)})}if(d("save")){l.entityComponentConstruction.save||(l.entityComponentConstruction.save={}),l.entityComponentConstruction.save.autoChange=!1;var a=l.entityComponentConstruction.save.customAction;a&&(l.entityComponentConstruction.save.customAction=function(e){a(e)})}if(d("remove")){l.entityComponentConstruction.remove||(l.entityComponentConstruction.remove={});var s=l.entityComponentConstruction.remove.customAction;s&&(l.entityComponentConstruction.remove.customAction=function(e){s(e)})}if(l.isProcessEntity.get()){l.entityComponentConstruction.process||(l.entityComponentConstruction.process={});var u=l.entityComponentConstruction.process.customAction;l.entityComponentConstruction.process.customAction=function(e,t){if(u)u(e,t);else{var n={};n[l.entityQueryDetails.resource.getKeyProperty.get()]=e[l.entityQueryDetails.resource.getKeyProperty.get()],n[l.entityQueryDetails.resource.getOpProperty.get()]="PROCESAR",g(n,null,t)}}}l.tableComponentConstruction.blockTableOnChangeView=!0,l.entityComponentConstruction.canViewHistory=l.canViewHistory,l.entityQueryDetails.resource.listenSaved(function(e){0==l.entityComponentConstruction.save.autoChange?l.changeToSingleView(e.fullResponse.data.data):l.changeToMainView()}),l.entityQueryDetails.resource.listenDeleted(function(){0!=l.entityComponentConstruction.remove.autoChange&&l.changeToMainView()})}}function m(t){return null==l.tableComponentConstruction.useDefaults||1==l.tableComponentConstruction.useDefaults||(l.tableComponentConstruction.defaultValuesAllowed&&0<l.tableComponentConstruction.defaultValuesAllowed.length?0<l.tableComponentConstruction.defaultValuesAllowed.filter(function(e){return e==t}).length:void 0)}function d(t){return null==l.entityComponentConstruction.useDefaults||1==l.entityComponentConstruction.useDefaults||(l.entityComponentConstruction.defaultValuesAllowed&&0<l.entityComponentConstruction.defaultValuesAllowed.length?0<l.entityComponentConstruction.defaultValuesAllowed.filter(function(e){return e==t}).length:void 0)}function p(){l.entityQueryDetails.resource.loadAsResource(t[l.paramName.get()],function(e){l.entityComponentBindingOut.entity.set(e)}),l.entityComponentBindingOut.showEditableFields.set(!1)}l.$onInit=function(){c(),function(){if(!l.isModal.get())if(t[l.paramName.get()]){s=a.singleView;!function e(){l.entityComponentBindingOut?"-1"!=t[l.paramName.get()]&&"0"!=t[l.paramName.get()]?p():(l.entityComponentBindingOut.entity.set({}),l.entityComponentBindingOut.showEditableFields.set(!0)):(console.log("Ciclo de inicializacion del formulario"),i(e,100))}()}else s=a.mainView}()};var a={mainView:1,singleView:2},s=a.mainView;l.onMainView={get:function(){return s==a.mainView}},l.onSingleView={get:function(){return s==a.singleView}},l.title={get:function(){if(l.componentConstruction&&l.componentConstruction.title){if(l.componentConstruction.title.getter)return l.componentConstruction.title.getter(s);if(l.componentConstruction.title.text)return l.componentConstruction.title.text}return"Catálogo"}},l.icon={get:function(){return l.componentConstruction&&l.componentConstruction.icon?l.componentConstruction.icon.getter?l.componentConstruction.icon.getter(s):l.componentConstruction.icon:""}},l.paramName={get:function(){return l.componentConstruction&&l.componentConstruction.paramName?l.componentConstruction.paramName:"id"}},l.useMainTab={get:function(){return!l.componentConstruction||null==l.componentConstruction.useMainTab||l.componentConstruction.useMainTab}},l.showBar={get:function(){return!l.componentConstruction||!l.componentConstruction.showBar||(l.componentConstruction.showBar.getter?l.componentConstruction.showBar.getter(s):l.componentConstruction.showBar)}},l.isModal={get:function(){return!(!l.componentConstruction||null==l.componentConstruction.isModal)&&l.componentConstruction.isModal}},l.closeWhenSaving={get:function(){return!l.entityComponentConstruction||null==l.entityComponentConstruction.closeWhenSaving||l.entityComponentConstruction.closeWhenSaving}},l.isProcessEntity={get:function(){return!(!l.componentConstruction||null==l.componentConstruction.isProcessEntity)&&l.componentConstruction.isProcessEntity}},l.noFilterTooltip={get:function(){return l.componentConstruction&&null!=l.componentConstruction.noFilterTooltip?l.componentConstruction.noFilterTooltip:"Quitar todos los filtros"}},l.showNoFilter={get:function(e){return l.componentConstruction&&null!=l.componentConstruction.showNoFilter?l.componentConstruction.showNoFilter:!!e||!t[l.paramName.get()]}};var u=!0;function g(e,n,o){l.entityQueryDetails.resource.saveEntity(e,function(e,t){t&&(n&&l.closeWhenSaving.get()?n():e&&e.data.data&&o(!0,e.data.data),l.tableComponentBindingOut&&l.tableComponentBindingOut.pager&&i(l.tableComponentBindingOut.pager.reload(),500))})}l.canViewHistory={get:function(){return!!u&&!!t[l.paramName.get()]},set:function(e){u=e}},l.historyTooltip={get:function(){return l.componentConstruction&&l.componentConstruction.historyTooltip?l.componentConstruction.historyTooltip:"Mostrar Bitácora"}},l.history={get:function(){return e.showHistory},set:function(){e.showHistory=!e.showHistory}},l.reload={invoke:function(){c()}},l.changeToMainView=function(){n.go(n.current.name,_defineProperty({},l.paramName.get(),null))},l.changeToSingleView=function(e){var t=-1;e&&(t=l.entityQueryDetails.resource.getId(e)),(l.onSingleView.get()||l.tableComponentBindingOut.allowedActions.canEdit.get()||l.tableComponentBindingOut.allowedActions.canAdd.get()&&-1==t)&&n.go(n.current.name,_defineProperty({},l.paramName.get(),t))},l.openModal=function(e,t){l.entityComponentConstruction||(l.entityComponentConstruction={}),d("cancel")&&(l.entityComponentConstruction.cancel||(l.entityComponentConstruction.cancel={})),d("edit")&&(l.entityComponentConstruction.edit||(l.entityComponentConstruction.edit={})),d("ok")&&(l.entityComponentConstruction.ok||(l.entityComponentConstruction.ok={})),d("save")&&(l.entityComponentConstruction.save||(l.entityComponentConstruction.save={}),l.entityComponentConstruction.save.customAction||(l.entityComponentConstruction.save.customAction=function(e,t,n){g(e,t,n)})),d("remove")&&(l.entityComponentConstruction.remove||(l.entityComponentConstruction.remove={}),l.entityComponentConstruction.remove.customAction||(l.entityComponentConstruction.remove.customAction=function(e,t,n){r.confirm({body:"Está seguro de eliminar el registro",header:"Confirmación requerida",actionConfirm:function(){l.entityQueryDetails.resource.deleteEntity(e,function(){t(),i(l.tableComponentBindingOut.pager.reload(),500)})},actionCancel:function(){}})})),l.entityComponentConstruction.event=t,l.isProcessEntity.get()&&(l.entityComponentConstruction.process||(l.entityComponentConstruction.process={}),l.entityComponentConstruction.process.customAction||(l.entityComponentConstruction.process.customAction=function(e,t,n){e[l.entityQueryDetails.resource.getOpProperty.get()]="PROCESAR",g(e,t,n)})),l.entityQueryDetails||(l.entityQueryDetails=l.queryDetails),l.entityComponentBindingOut||(l.entityComponentBindingOut={}),l.entityComponentBindingOut.object=e,l.entityComponentBehavior||(l.entityComponentBehavior={}),l.modal=new o(l.entityComponentConstruction,l.entityComponentBehavior,l.entityComponentBindingOut,l.entityQueryDetails),l.modal.openModal()}}e.$inject=["$stateParams","$state","$timeout","EntifixEntityModal","EntifixNotification","$rootScope"];var t={template:'                 \x3c!-- Main Tab Mode --\x3e                     <div layout="row" ng-if="bindCtrl.useMainTab.get()">                         <div flex="5" hide-xs show-gt-xs></div>                         <div flex-xs="100" flex-gt-xs="90">                             <div ng-if="!bindCtrl.isModal.get()">                                 <md-toolbar ng-if="bindCtrl.showBar.get()" md-colors="{background:\'default-primary-500\'}">                                     <div class="md-toolbar-tools" layout>                                         <div flex layout layout-align="start center">                                             <md-button class="md-icon-button"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon></md-button>                                             <h2>&nbsp;{{bindCtrl.title.get()}}</h2>                                         </div>                                         <div layout layout-align="end end" ng-if="bindCtrl.showNoFilter.get()">                                             <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.tableComponentBindingOut.cleanFilters()" aria-label="{{bindCtrl.tableComponentBindingOut.noFilterTooltip()}}">                                                 <md-tooltip>{{bindCtrl.noFilterTooltip.get()}}</md-tooltip>                                                 <md-icon class="material-icons">delete_sweep</md-icon>                                             </md-button>                                         </div>                                         <div layout layout-align="end end" ng-if="bindCtrl.canViewHistory.get()">                                             <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.history.set()">                                                 <md-tooltip>{{bindCtrl.historyTooltip.get()}}</md-tooltip>                                                 <md-icon class="material-icons">history</md-icon>                                             </md-button>                                         </div>                                     </div>                                 </md-toolbar>                                 <div layout="column" ng-if="bindCtrl.onMainView.get()">                                     <entifix-table                                         query-details="bindCtrl.tableQueryDetails"                                         component-construction="bindCtrl.tableComponentConstruction"                                         component-behavior="bindCtrl.tableComponentBehavior"                                         component-binding-out="bindCtrl.tableComponentBindingOut">                                     </entifix-table>                                 </div>                                 <div layout="column" ng-if="bindCtrl.onSingleView.get()">                                     <entifix-entity-form                                         query-details="bindCtrl.entityQueryDetails"                                         component-construction="bindCtrl.entityComponentConstruction"                                          component-behavior="bindCtrl.entityComponentBehavior"                                         component-binding-out="bindCtrl.entityComponentBindingOut">                                     </entifix-entity-form>                                 </div>                             </div>                             <div ng-if="bindCtrl.isModal.get()">                                 <md-toolbar ng-if="bindCtrl.showBar.get()" md-colors="{background:\'default-primary-500\'}">                                     <div class="md-toolbar-tools">                                         <div flex layout layout-align="start center">                                             <md-button class="md-icon-button"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon></md-button>                                             <h2>&nbsp;{{bindCtrl.title.get()}}</h2>                                         </div>                                         <div layout layout-align="end end" ng-if="bindCtrl.showNoFilter.get()">                                             <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.tableComponentBindingOut.cleanFilters()" aria-label="{{bindCtrl.tableComponentBindingOut.noFilterTooltip()}}">                                                 <md-tooltip>{{bindCtrl.noFilterTooltip.get()}}</md-tooltip>                                                 <md-icon class="material-icons">delete_sweep</md-icon>                                             </md-button>                                         </div>                                     </div>                                 </md-toolbar>                                 <div layout="column">                                     <entifix-table                                         query-details="bindCtrl.tableQueryDetails"                                         component-construction="bindCtrl.tableComponentConstruction"                                         component-behavior="bindCtrl.tableComponentBehavior"                                         component-binding-out="bindCtrl.tableComponentBindingOut">                                     </entifix-table>                                 </div>                             </div>                         </div>                         <div flex="5" hide-xs show-gt-xs></div>                     </div>                     \x3c!-- No Main Tab Mode --\x3e                     <div ng-if="!bindCtrl.useMainTab.get()">                         <md-content ng-if="!bindCtrl.isModal.get()">                             <div layout>                                 <div flex layout layout-align="start center">                                     <span class="md-headline" ng-if="bindCtrl.showBar.get()"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon>{{"  " + bindCtrl.title.get()}}</span>                                 </div>                                 <div layout layout-align="end end" ng-if="bindCtrl.showNoFilter.get()">                                     <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.tableComponentBindingOut.cleanFilters()" aria-label="{{bindCtrl.tableComponentBindingOut.noFilterTooltip()}}">                                         <md-tooltip>{{bindCtrl.noFilterTooltip.get()}}</md-tooltip>                                         <md-icon class="material-icons">delete_sweep</md-icon>                                     </md-button>                                 </div>                             </div>                             <md-content layout-padding>                                 <div layout="column" ng-if="bindCtrl.onMainView.get()">                                     <entifix-table                                         query-details="bindCtrl.tableQueryDetails"                                         component-construction="bindCtrl.tableComponentConstruction"                                          component-behavior="bindCtrl.tableComponentBehavior"                                         component-binding-out="bindCtrl.tableComponentBindingOut">                                     </entifix-table>                                 </div>                                  <div layout="column" ng-if="bindCtrl.onSingleView.get()">                                     <entifix-entity-form                                         query-details="bindCtrl.entityQueryDetails"                                         component-construction="bindCtrl.entityComponentConstruction"                                         component-behavior="bindCtrl.entityComponentBehavior"                                         component-binding-out="bindCtrl.entityComponentBindingOut">                                     </entifix-entity-form>                                 </div>                             </md-content>                         </md-content>                         <md-content ng-if="bindCtrl.isModal.get()">                             <div layout>                                 <div flex layout layout-align="start center">                                     <span class="md-headline" ng-if="bindCtrl.showBar.get()"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon>&nbsp;{{bindCtrl.title.get()}}</span>                                 </div>                                 <div layout layout-align="end end" ng-if="bindCtrl.showNoFilter.get(true)">                                     <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.tableComponentBindingOut.cleanFilters()" aria-label="{{bindCtrl.tableComponentBindingOut.noFilterTooltip()}}">                                         <md-tooltip>{{bindCtrl.noFilterTooltip.get()}}</md-tooltip>                                         <md-icon class="material-icons">delete_sweep</md-icon>                                     </md-button>                                 </div>                             </div>                             <md-content layout-padding>                                 <div layout="row">                                     <div flex>                                         <div layout="column">                                             <entifix-table                                                 query-details="bindCtrl.tableQueryDetails"                                                 component-construction="bindCtrl.tableComponentConstruction"                                                  component-behavior="bindCtrl.tableComponentBehavior"                                                 component-binding-out="bindCtrl.tableComponentBindingOut">                                             </entifix-table>                                         </div>                                     </div>                                 </div>                             </md-content>                         </md-content>                     </div>',controller:e,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",queryDetails:"<",tableComponentConstruction:"<",tableComponentBehavior:"<",tableComponentBindingOut:"=",tableQueryDetails:"=",entityComponentConstruction:"<",entityComponentBehavior:"<",entityComponentBindingOut:"=",entityQueryDetails:"="}};angular.module("entifix-js").component("entifixCatalog",t)}(),function(){function e(c,e,t){var i,n,a=this,o=Math.floor(100*Math.random()+1);a.isLoading={get:function(){return a.queryDetails&&a.queryDetails.resource&&a.queryDetails.resource.isLoading.get(),!1}},a.canShowEditableFields={get:function(){return!!a.showEditableFields&&a.showEditableFields}},a.canEvaluateErrors={get:function(){return!!a.evaluateErrors&&a.evaluateErrors({name:a.name.get()})}},a.isRequired={get:function(){return!(!a.componentConstruction||!a.componentConstruction.isRequired)&&a.componentConstruction.isRequired}},a.requiredMessage={get:function(){if(a.componentConstruction&&a.componentConstruction.requiredMessage){if(a.componentConstruction.requiredMessage.getter)return a.componentConstruction.requiredMessage.getter();if(a.componentConstruction.requiredMessage.text)return a.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},a.requiredMatch={get:function(){return!a.componentConstruction||null==a.componentConstruction.requiredMatch||a.componentConstruction.requiredMatch}},a.requiredMatchMessage={get:function(){if(a.componentConstruction&&a.componentConstruction.requiredMatchMessage){if(a.componentConstruction.requiredMatchMessage.getter)return a.componentConstruction.requiredMatchMessage.getter();if(a.componentConstruction.requiredMatchMessage.text)return a.componentConstruction.requiredMatchMessage.text}return"Seleccione un elemento de la lista"}},a.minLengthRequest={get:function(){return a.componentConstruction&&a.componentConstruction.minLengthRequest?a.componentConstruction.minLengthRequest:0}},a.minLength={get:function(){return a.componentConstruction&&a.componentConstruction.minLength?a.componentConstruction.minLength:null}},a.minLengthMessage={get:function(){if(a.componentConstruction&&a.componentConstruction.minLengthMessage){if(a.componentConstruction.minLengthMessage.getter)return a.componentConstruction.minLengthMessage.getter();if(a.componentConstruction.minLengthMessage.text)return a.componentConstruction.minLengthMessage.text}return"El texto es demasiado corto"}},a.maxLength={get:function(){return a.componentConstruction&&a.componentConstruction.maxLength?a.componentConstruction.maxLength:null}},a.maxLengthMessage={get:function(){if(a.componentConstruction&&a.componentConstruction.maxLengthMessage){if(a.componentConstruction.maxLengthMessage.getter)return a.componentConstruction.maxLengthMessage.getter();if(a.componentConstruction.maxLengthMessage.text)return a.componentConstruction.maxLengthMessage.text}return"El texto es demasiado largo"}},a.createNewEntityMessage={get:function(){if(a.componentConstruction&&a.componentConstruction.createNewEntityMessage){if(a.componentConstruction.createNewEntityMessage.getter)return a.componentConstruction.createNewEntityMessage.getter();if(a.componentConstruction.createNewEntityMessage.text)return a.componentConstruction.createNewEntityMessage.text}return"Agregar "}},a.title={get:function(){if(a.componentConstruction&&a.componentConstruction.title){if(a.componentConstruction.title.getter)return a.componentConstruction.title.getter();if(a.componentConstruction.title.text)return a.componentConstruction.title.text}return""},set:function(e){e&&(a.componentConstruction.title={text:e})}},a.name={get:function(){return""!=a.title.get()?e.getCleanedString(a.title.get()):"entifixautocomplete"+o}},a.mappingMethod={get:function(){if(a.componentConstruction&&a.componentConstruction.mapping){if(a.componentConstruction.mapping.method)return a.componentConstruction.mapping.method;if(a.componentConstruction.mapping.property)return function(e){return e[a.componentConstruction.mapping.property]}}}},a.isForm={get:function(){return!a.componentConstruction||null==a.componentConstruction.isForm||a.componentConstruction.isForm}},a.placeholder={get:function(){if(a.componentConstruction&&a.componentConstruction.placeholder){if(a.componentConstruction.placeholder.getter)return a.componentConstruction.placeholder.getter();if(a.componentConstruction.placeholder.text)return a.componentConstruction.placeholder.text}return""}},a.disabled={get:function(){return!(!a.componentConstruction||!a.componentConstruction.disabled)&&a.componentConstruction.disabled}},a.loadAllItems={get:function(){return!(!a.componentConstruction||!a.componentConstruction.loadAllItems)&&a.componentConstruction.loadAllItems}},a.noCache={get:function(){return!a.componentConstruction||null==a.componentConstruction.noCache||a.componentConstruction.noCache}},a.notFoundText={get:function(){if(a.componentConstruction&&a.componentConstruction.notFoundText){if(a.componentConstruction.notFoundText.getter)return a.componentConstruction.notFoundText.getter();if(a.componentConstruction.notFoundText.text)return a.componentConstruction.notFoundText.text}return"No hay coincidencias. "}},a.tooltip={get:function(){if(a.componentConstruction&&a.componentConstruction.tooltip){if(a.componentConstruction.tooltip.getter)return a.componentConstruction.tooltip.getter();if(a.componentConstruction.tooltip.text)return a.componentConstruction.tooltip.text}return null}},a.canCreateNewEntity={get:function(){return!(!a.componentConstruction||!a.componentConstruction.canCreateNewEntity)&&a.componentConstruction.canCreateNewEntity}},a.maxItemsQuery={get:function(){return a.componentConstruction&&a.componentConstruction.maxItemsQuery?a.componentConstruction.maxItemsQuery:10}},a.keyProperty={get:function(){return a.componentConstruction&&a.componentConstruction.keyProperty?a.componentConstruction.keyProperty:a.queryDetails&&a.queryDetails.resource?a.queryDetails.resource.getKeyProperty.get():"id"}},a.nullValueLabel={get:function(){return a.componentConstruction&&a.componentConstruction.nullValueLabel?a.componentConstruction.nullValueLabel:"SIN REGISTROS"}},a.getConstantFilters=function(){var e=[];return a.queryDetails&&a.queryDetails.constantFilters&&(e=a.queryDetails.constantFilters.getter?a.queryDetails.constantFilters.getter():a.queryDetails.constantFilters),e},a.$onInit=function(){a.loadAllItems.get()&&r(),s(),i=a.title.get(),g()};var r=function(){a.queryDetails.resource.getCollection(function(e){a.items=e})},s=function(){a.componentBindingOut={selectedEntity:{get:function(){if(a.entityList&&0<a.entityList.length)return a.entityList.filter(function(e){return a.selectedItem==a.mappingMethod.get()(e)})[0]},set:function(e){e?d(e):(a.showList=[],a.selectedItem=void 0,a.entityList=[])}}},a.componentConstruction.init&&a.componentConstruction.init(),a.loadingFirstRequest=!1};a.getDisplayValue=function(){return a.valueModel&&a.selectedItem?a.selectedItem:(!a.valueModel||a.selectedItem||a.loadingFirstRequest||d(a.valueModel),a.nullValueLabel.get())},a.getValue=function(){if(a.valueModel)return a.valueModel};var u=function(e,t){a.valueModel!=e&&(a.valueModel=e),a.onChange&&a.onChange({oldValue:a.valueModel,newValue:e,entity:t})};a.updateData=function(t){var n,e,o=t.search;a.queryDetails.resource.getCollection(function(e){0<e.length?(a.entityList=e,a.showList=e.map(a.mappingMethod.get()),a.title.set(i)):(a.showList=[],a.canCreateNewEntity.get()&&(a.showList=[o],a.title.set(i+": "+a.createNewEntityMessage.get()+o))),t.resolve(a.showList)},function(e){t.reject&&t.reject()},(n=o,e=[],a.queryDetails&&a.componentConstruction.searchProperties&&0<a.componentConstruction.searchProperties.length&&(e=e.concat(a.componentConstruction.searchProperties.map(function(e){return{property:e,value:n,operator:"lk"}}))),a.queryDetails&&a.queryDetails.filters&&(e=e.concat(a.queryDetails.filters)),a.getConstantFilters()&&(e=e.concat(a.getConstantFilters())),e))};var l,m=function(t){var e=a.maxItemsQuery.get();a.queryDetails.resource.getCollection(function(e){a.entityList=e,a.showList=e.map(a.mappingMethod.get()),t.resolve(a.showList),a.title.set(i)},function(e){t.reject&&t.reject()},a.getConstantFilters().concat([{property:"skip",value:0,type:"fixed_filter"},{property:"take",value:e,type:"fixed_filter"}]))},d=function(e){a.loadingFirstRequest=!0,a.queryDetails.resource.getCollection(function(e){0<e.length&&(a.entityList=e,a.showList=e.map(a.mappingMethod.get()),a.selectedItem=a.showList[0],a.loadingFirstRequest=!0)},function(e){},[{property:a.keyProperty.get(),value:e,type:"fixed_filter"}])};function p(){l&&(c.cancel(l),l=null)}function g(){a.isForm.value=a.isForm.get(),a.tooltip.value=a.tooltip.get(),a.title.value=a.title.get(),a.name.value=a.name.get(),a.isRequired.value=a.isRequired.get(),a.requiredMessage.value=a.requiredMessage.get(),a.requiredMatch.value=a.requiredMatch.get(),a.requiredMatchMessage.value=a.requiredMatchMessage.get(),a.maxLength.value=a.maxLength.get(),a.maxLengthMessage.value=a.maxLengthMessage.get(),a.minLength.value=a.minLength.get(),a.minLengthMessage.value=a.minLengthMessage.get(),a.minLengthRequest.value=a.minLengthRequest.get(),a.createNewEntityMessage.value=a.createNewEntityMessage.get(),a.nullValueLabel.value=a.nullValueLabel.get(),a.placeholder.value=a.placeholder.get(),a.disabled.value=a.disabled.get(),a.noCache.value=a.noCache.get(),a.notFoundText.value=a.notFoundText.get(),a.getDisplayValue()}a.searchItems=function(r){return r&&a.loadAllItems.get()?a.items.filter(function(e){return 0<=e[a.componentConstruction.searchProperties[0]].indexOf(r)}):r?new Promise(function(e,t){var n,o,i;u(void 0),p(),n=e,o=t,i=r,l=c(a.updateData,500,!0,{search:i,resolve:n,reject:o})}):new Promise(function(e,t){u(void 0),p(),l=c(m,500,!0,{search:r,resolve:e,reject:t})})},a.changeSelectedItem=function(){var e=a.entityList.filter(function(e){return a.selectedItem==a.mappingMethod.get()(e)})[0];a.canCreateNewEntity.get()?(a.onChange&&a.onChange({oldValue:void 0,newValue:a.selectedItem,entity:e}),e&&a.selectedItem&&u(a.queryDetails.resource.getId(e),e)):a.selectedItem?u(a.queryDetails.resource.getId(e),e):u(void 0),n&&(c.cancel(n),n=null),n=c(g,1500)},a.onFocus=function(e){e.target&&e.target.value&&0<e.target.value.length&&"click"==e.type&&e.target.select()},t.$watch(function(){return a.valueModel},function(e,t){e!=t&&g()})}e.$inject=["$timeout","EntifixStringUtils","$scope"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},template:'<div ng-class="{\'whirl double-up whirlback\': vm.isLoading.get()}">                         <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>                         <div ng-if="vm.isForm.value">                             <div ng-if="vm.canShowEditableFields.get()" ng-click="vm.onFocus($event)">                                 <md-autocomplete                                     md-floating-label={{vm.title.value}}                                     md-input-name={{vm.name.value}}                                     md-min-length="vm.minLengthRequest.value"                                     md-input-minlength="{{vm.minLength.value}}"                                     md-input-maxlength="{{vm.maxLength.value}}"                                     md-no-cache="vm.noCache.value"                                     md-selected-item="vm.selectedItem"                                     md-search-text="vm.searchText"                                     md-items="item in vm.searchItems(vm.searchText)"                                     md-item-text="item"                                     md-selected-item-change="vm.changeSelectedItem()"                                     ng-required="vm.isRequired.value"                                     md-require-match="vm.requiredMatch.value"                                     placeholder="{{vm.placeholder.value}}"                                     ng-disabled="vm.disabled.value"                                     md-clear-button="true">                                     <md-item-template>                                         <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span>                                     </md-item-template>                                     <md-not-found>                                         <div>                                             {{vm.notFoundText.value}}                                         </div>                                     </md-not-found>                                     <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                         <div ng-message="required">{{vm.requiredMessage.value}}</div>                                         <div ng-message="md-require-match">{{vm.requiredMatchMessage.value}}</div>                                         <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                         <div ng-message="maxlength">{{vm.maxLengthMessage.value}}</div>                                     </div>                                 </md-autocomplete>                             </div>                             <div ng-if="!vm.canShowEditableFields.get()">                                 <label>{{vm.title.value}}</label><br/>                                 <strong>{{vm.selectedItem}}</strong>                             </div>                         </div>                         <div ng-if="!vm.isForm.value" ng-click="vm.onFocus($event)">                             <md-autocomplete                                 md-floating-label={{vm.title.value}}                                 md-input-name={{vm.name.value}}                                 md-min-length="vm.minLengthRequest.value"                                 md-input-minlength="{{vm.minLength.value}}"                                 md-input-maxlength="{{vm.maxLength.value}}"                                 md-no-cache="vm.noCache.value"                                 md-selected-item="vm.selectedItem"                                 md-search-text="vm.searchText"                                 md-items="item in vm.searchItems(vm.searchText)"                                 md-item-text="item"                                 md-selected-item-change="vm.changeSelectedItem()"                                 ng-required="vm.isRequired.value"                                 md-require-match="vm.requiredMatch.value"                                 placeholder="{{vm.placeholder.value}}"                                 ng-disabled="vm.disabled.value"                                 md-clear-button="true">                                 <md-item-template>                                     <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span>                                 </md-item-template>                                 <md-not-found>                                     {{vm.notFoundText.value}}                                 </md-not-found>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="md-require-match">{{vm.requiredMatchMessage.value}}</div>                                     <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                     <div ng-message="maxlength">{{vm.maxLengthMessage.value}}</div>                                 </div>                             </md-autocomplete>                         </div>                     </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixAutocomplete",t)}(),function(){function e(e,t){var n=this,o=Math.floor(100*Math.random()+1);n.canShowEditableFields={get:function(){return!!n.showEditableFields&&n.showEditableFields}},n.canEvaluateErrors={get:function(){return!!n.evaluateErrors&&n.evaluateErrors({name:n.name.get()})}},n.isSwitch={get:function(){return!!n.componentConstruction.isSwitch&&n.componentConstruction.isSwitch}},n.title={get:function(){if(n.componentConstruction&&n.componentConstruction.title){if(n.componentConstruction.title.getter)return n.componentConstruction.title.getter();if(n.componentConstruction.title.text)return n.componentConstruction.title.text}return""}},n.name={get:function(){return""!=n.title.get()?e.getCleanedString(n.title.get()):"entifixcheckboxswitch"+o}},n.isForm={get:function(){return null==n.componentConstruction.isForm||n.componentConstruction.isForm}},n.tooltip={get:function(){if(n.componentConstruction&&n.componentConstruction.tooltip){if(n.componentConstruction.tooltip.getter)return n.componentConstruction.tooltip.getter();if(n.componentConstruction.tooltip.text)return n.componentConstruction.tooltip.text}return null}},n.valueTitle={get:function(){if(n.title.get()&&""!=n.title.get()){if(n.includeValue.get()){var e="No";return n.valueModel&&n.title.get()&&""!=n.title.get()&&(e="Si"),n.title.get()+": "+e}return n.title.get()}return""}},n.includeValue={get:function(){return null==n.componentConstruction.includeValue||n.componentConstruction.includeValue}},n.getValue=function(){return n.valueModel?"Si":"No"},n.$onInit=function(){n.init&&n.init(),null==n.valueModel&&(n.valueModel=!1)},n.runOnChangeTrigger=function(){n.onChange&&n.onChange({value:n.valueModel})}}e.$inject=["EntifixStringUtils","$scope"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},template:'<div ng-if="!vm.isSwitch.get()">                     <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                     <div ng-if="vm.isForm.get()">                         <div ng-show="vm.canShowEditableFields.get()" class="md-checkbox-padding">                             <md-checkbox                                  ng-model="vm.valueModel"                                 name="{{vm.name.get()}}"                                 ng-checked="vm.valueModel"                                 aria-label="{{vm.name.get()}}"                                 ng-change="vm.runOnChangeTrigger()"                                 class="checkbox-default">                                 {{vm.valueTitle.get()}}                             </md-checkbox>                         </div>                         <div ng-hide="vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label>&nbsp;<br/>                             <strong>{{vm.getValue()}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.get()" class="md-checkbox-padding">                         <md-checkbox                              ng-model="vm.valueModel"                             name="{{vm.name.get()}}"                             ng-checked="vm.valueModel"                             aria-label="{{vm.name.get()}}"                             ng-change="vm.runOnChangeTrigger()"                             class="checkbox-default">                             {{vm.valueTitle.get()}}                         </md-checkbox>                     </div>                 </div>                 <div ng-if="vm.isSwitch.get()">                     <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                     <div ng-if="vm.isForm.get()">                         <div ng-show="vm.canShowEditableFields.get()">                             <md-switch                                 ng-model="vm.valueModel"                                 name="{{vm.name.get()}}"                                 ng-checked="vm.valueModel"                                 aria-label="{{vm.name.get()}}"                                 ng-change="vm.runOnChangeTrigger()"                                 class="switch-default">                                 {{vm.valueTitle.get()}}                             </md-switch>                         </div>                         <div ng-hide="vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label>&nbsp;<br/>                             <strong>{{vm.getValue()}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.get()">                         <md-switch                             ng-model="vm.valueModel"                             name="{{vm.name.get()}}"                             ng-checked="vm.valueModel"                             aria-label="{{vm.name.get()}}"                             ng-change="vm.runOnChangeTrigger()"                             class="switch-default">                             {{vm.valueTitle.get()}}                         </md-switch>                     </div>                 </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixCheckboxSwitch",t)}(),function(){function e(e){var n=this,t=Math.floor(100*Math.random()+1);n.separatorsDefault=[e.KEY_CODE.COMMA,e.KEY_CODE.ENTER],n.canShowEditableFields={get:function(){return!!n.showEditableFields&&n.showEditableFields}},n.canEvaluateErrors={get:function(){return!!n.evaluateErrors&&n.evaluateErrors({name:n.name.get()})}},n.maxChips={get:function(){return n.componentConstruction&&n.componentConstruction.maxChips?n.componentConstruction.maxChips:null}},n.maxChipsMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.maxChipsMessage){if(n.componentConstruction.maxChipsMessage.getter)return n.componentConstruction.maxChipsMessage.getter();if(n.componentConstruction.maxChipsMessage.text)return n.componentConstruction.maxChipsMessage.text}return"Ha alcanzado el número máximo de elementos"}},n.name={get:function(){return"entifixchip"+t}},n.transformChip={get:function(){return n.componentConstruction&&n.componentConstruction.transformChip?n.componentConstruction.transformChip:null},invoke:function(e,t){n.componentConstruction&&n.componentConstruction.transformChip&&n.componentConstruction.transformChip(e,t)}},n.onAdd={get:function(){return n.componentConstruction&&n.componentConstruction.onAdd?n.componentConstruction.onAdd:null},invoke:function(e,t){n.componentConstruction&&n.componentConstruction.onAdd&&n.componentConstruction.onAdd(e,t)}},n.onRemove={get:function(){return n.componentConstruction&&n.componentConstruction.onRemove?n.componentConstruction.onRemove:null},invoke:function(e,t){n.componentConstruction&&n.componentConstruction.onRemove&&n.componentConstruction.onRemove(e,t)}},n.onSelect={get:function(){return n.componentConstruction&&n.componentConstruction.onSelect?n.componentConstruction.onSelect:null},invoke:function(e,t){n.componentConstruction&&n.componentConstruction.onSelect&&n.componentConstruction.onSelect(e,t)}},n.placeholder={get:function(){return n.componentConstruction&&n.componentConstruction.placeholder?n.componentConstruction.placeholder:""}},n.secondaryPlaceholder={get:function(){return n.componentConstruction&&n.componentConstruction.secondaryPlaceholder?n.componentConstruction.secondaryPlaceholder:n.placeholder.get()}},n.isForm={get:function(){return!n.componentConstruction||null==n.componentConstruction.isForm||n.componentConstruction.isForm}},n.removable={get:function(){return!n.componentConstruction||null==n.componentConstruction.removable||n.componentConstruction.removable}},n.readOnly={get:function(){return!(!n.componentConstruction||!n.componentConstruction.readOnly)&&n.componentConstruction.readOnly}},n.enableChipEdit={get:function(){return n.componentConstruction&&null!=n.componentConstruction.enableChipEdit?n.componentConstruction.enableChipEdit:"true"}},n.addOnBlur={get:function(){return!n.componentConstruction||null==n.componentConstruction.addOnBlur||n.componentConstruction.addOnBlur}},n.separators={get:function(){return n.componentConstruction&&n.componentConstruction.separators?n.componentConstruction.separators:n.separatorsDefault}},n.tooltip={get:function(){if(n.componentConstruction&&n.componentConstruction.tooltip){if(n.componentConstruction.tooltip.getter)return n.componentConstruction.tooltip.getter();if(n.componentConstruction.tooltip.text)return n.componentConstruction.tooltip.text}return null}},n.$onInit=function(){n.init&&n.init()},n.getStringValue=function(){if(Array.isArray(n.valueModel)&&0<n.valueModel.length){var t="";return n.valueModel.forEach(function(e){t+=e+" "}),t}return""},n.tC=function(e,t){n.transformChip.get()&&n.transformChip.invoke(e,t)},n.oAdd=function(e,t){n.onAdd.get()&&n.onAdd.invoke(e,t)},n.oRemove=function(e,t){n.onRemove.get()&&n.onRemove.invoke(e,t)},n.oSelect=function(e,t){n.onSelect.get()&&n.onSelect.invoke(e,t)}}e.$inject=["$mdConstant"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},template:'<md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                     <div ng-if="vm.isForm.get()">                         <md-chips                             ng-if="vm.canShowEditableFields.get()"                             name="{{vm.name.get()}}"                             ng-model="vm.valueModel"                             md-transform-chip="vm.tC($chip, $index)"                             placeholder="{{vm.placeholder.get()}}"                             secondary-placeholder="{{vm.secondaryPlaceholder.get()}}"                             md-removable="vm.removable.get()"                             readonly="vm.readOnly.get()"                             md-enable-chip-edit="{{vm.enableChipEdit.get()}}"                             md-max-chips="{{vm.maxChips.get()}}"                             md-add-on-blur="{{vm.addOnBlur.get()}}"                             md-on-add="vm.oAdd$chip()"                             md-on-remove="vm.oRemove($chip, $index)"                             md-on-select="vm.oSelect($chip, $index)"                             md-separator-keys="vm.separators.get()">                             <md-chip-template>                                 {{$chip}}                                 &nbsp&nbsp                                 </md-chip-template>                         </md-chips>                         <div ng-messages="vm.canEvaluateErrors.get()" class="ngMessage-error" multiple>                             <div ng-message="md-max-chips">{{vm.maxChipsMessage.get()}}</div>                         </div>                         <div ng-if="!vm.canShowEditableFields.get()">                             <label>{{vm.placeholder.get()}}</label><br/>                             <strong>{{vm.getStringValue()}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.get()">                         <md-chips                             name="{{vm.name.get()}}"                             ng-model="vm.valueModel"                             md-transform-chip="vm.tC($chip, $index)"                             placeholder="{{vm.placeholder.get()}}"                             secondary-placeholder="{{vm.secondaryPlaceholder.get()}}"                             md-removable="vm.removable.get()"                             readonly="vm.readOnly.get()"                             md-enable-chip-edit="{{vm.enableChipEdit.get()}}"                             md-max-chips="{{vm.maxChips.get()}}"                             md-add-on-blur="{{vm.addOnBlur.get()}}"                             md-on-add="vm.oAdd($chip, $index)"                             md-on-remove="vm.oRemove($chip, $index)"                             md-on-select="vm.oSelect($chip, $index)"                             md-separator-keys="vm.separators.get()">                             <md-chip-template>                                 {{$chip}}                                 &nbsp&nbsp                                 </md-chip-template>                         </md-chips>                         <div ng-messages="vm.canEvaluateErrors.get()" class="ngMessage-error" multiple>                             <div ng-message="md-max-chips">{{vm.maxChipsMessage.get()}}</div>                         </div>                     </div>                     <br/>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixChip",t)}(),function(){function e(t,e,n,o,i){var r,c=this,a=Math.floor(100*Math.random()+1);function s(){if(c.valueModel instanceof Date)e=c.valueModel;else{var e=u(c.valueModel);c.valueModel=e}var t=e,n="",o="";c.hasTime.get()&&(n=t.getHours().toString(),o=t.getMinutes().toString(),n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),n=12<(n=parseInt(n))?(n-12).toString()+":"+o+" pm":12==n?n.toString()+":"+o+" pm":n.toString()+":"+o+" am"),c.dateString=t.getDate()+" de "+["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t.getMonth()]+" de "+t.getFullYear()+" "+n}function u(e){return n.transformStringToDate(e)}function l(){r&&(i.cancel(r),r=null)}function m(){c.isForm.value=c.isForm.get(),c.tooltip.value=c.tooltip.get(),c.title.value=c.title.get(),c.format.value=c.format.get(),c.name.value=c.name.get(),c.isRequired.value=c.isRequired.get(),c.isDisabled.value=c.isDisabled.get(),c.disableParentScroll.value=c.disableParentScroll.get(),c.autoOk.value=c.autoOk.get(),c.requiredMessage.value=c.requiredMessage.get(),c.editInput.value=c.editInput.get(),c.parseMessage.value=c.parseMessage.get(),c.clickOutsideToClose.value=c.clickOutsideToClose.get(),c.hasDate.value=c.hasDate.get(),c.placeholder.value=c.placeholder.get(),c.minDate.value=c.minDate.get(),c.maxDate.value=c.maxDate.get(),c.okText.value=c.okText.get(),c.todayText.value=c.todayText.get(),c.cancelText.value=c.cancelText.get(),c.weekStart.value=c.weekStart.get(),c.weekDays.value=c.weekDays.get(),c.weekDays.value=c.weekDays.get(),c.nullValueLabel.value=c.nullValueLabel.get(),c.hasTime.value=c.hasTime.get(),c.hasMinutes.value=c.hasMinutes.get(),c.shortTime.value=c.shortTime.get(),c.dateString=c.getDateString()}c.canShowEditableFields={get:function(){return!!c.showEditableFields&&c.showEditableFields}},c.canEvaluateErrors={get:function(){return!!c.evaluateErrors&&c.evaluateErrors({name:c.name.get()})}},c.isRequired={get:function(){return!(!c.componentConstruction||!c.componentConstruction.isRequired)&&c.componentConstruction.isRequired}},c.requiredMessage={get:function(){if(c.componentConstruction&&c.componentConstruction.requiredMessage){if(c.componentConstruction.requiredMessage.getter)return c.componentConstruction.requiredMessage.getter();if(c.componentConstruction.requiredMessage.text)return c.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},c.parseMessage={get:function(){if(c.componentConstruction&&c.componentConstruction.parseMessage){if(c.componentConstruction.parseMessage.getter)return c.componentConstruction.parseMessage.getter();if(c.componentConstruction.parseMessage.text)return c.componentConstruction.parseMessage.text}return c.hasDate.get()&&c.hasTime.get()?"Este campo debe ser una fecha y hora válidas":c.hasDate.get()&&!c.hasTime.get()?"Este campo debe ser una fecha válida":c.hasTime.get()&&!c.hasDate.get()?"Este campo debe ser una hora válida":void 0}},c.isDisabled={get:function(){return!(!c.componentConstruction||!c.componentConstruction.isDisabled)&&c.componentConstruction.isDisabled}},c.title={get:function(){if(c.componentConstruction&&c.componentConstruction.title){if(c.componentConstruction.title.getter)return c.componentConstruction.title.getter();if(c.componentConstruction.title.text)return c.componentConstruction.title.text}return""}},c.name={get:function(){return""!=c.title.get()?o.getCleanedString(c.title.get()):"entifixdatetimepicker"+a}},c.isForm={get:function(){return!c.componentConstruction||null==c.componentConstruction.isForm||c.componentConstruction.isForm}},c.disableParentScroll={get:function(){return!c.componentConstruction||null==c.componentConstruction.disableParentScroll||c.componentConstruction.disableParentScroll}},c.autoOk={get:function(){return!c.componentConstruction||null==c.componentConstruction.autoOk||c.componentConstruction.autoOk}},c.editInput={get:function(){return!c.componentConstruction||!c.componentConstruction.editInput||c.componentConstruction.editInput}},c.clickOutsideToClose={get:function(){return!(!c.componentConstruction||!c.componentConstruction.clickOutsideToClose)&&c.componentConstruction.clickOutsideToClose}},c.tooltip={get:function(){if(c.componentConstruction&&c.componentConstruction.tooltip){if(c.componentConstruction.tooltip.getter)return c.componentConstruction.tooltip.getter();if(c.componentConstruction.tooltip.text)return c.componentConstruction.tooltip.text}return null}},c.nullValueLabel={get:function(){return c.componentConstruction&&c.componentConstruction.nullValueLabel?c.componentConstruction.nullValueLabel:"SIN REGISTROS"}},c.defaultValue={get:function(){return!(!c.componentConstruction||null==c.componentConstruction.defaultValue)&&c.componentConstruction.defaultValue}},c.hasDate={get:function(){return!c.componentConstruction||null==c.componentConstruction.hasDate||c.componentConstruction.hasDate}},c.placeholder={get:function(){if(c.componentConstruction&&c.componentConstruction.placeholder){if(c.componentConstruction.placeholder.getter)return c.componentConstruction.placeholder.getter();if(c.componentConstruction.placeholder.text)return c.componentConstruction.placeholder.text}var e="";return c.hasDate.get()&&(e+="dd/mm/aaaa"),c.hasTime.get()&&c.hasDate.get()?e+=" hh:mm":c.hasTime.get()&&(e+="hh:mm"),e}},c.minDate={get:function(){if(c.componentConstruction&&c.componentConstruction.minDate){if(c.componentConstruction.minDate.getter)return moment(c.componentConstruction.minDate.getter(),c.format.value);if(c.componentConstruction.minDate.text)return moment(c.componentConstruction.minDate.text,c.format.value)}}},c.maxDate={get:function(){if(c.componentConstruction&&c.componentConstruction.maxDate){if(c.componentConstruction.maxDate.getter)return moment(c.componentConstruction.maxDate.getter(),c.format.value);if(c.componentConstruction.maxDate.text)return moment(c.componentConstruction.maxDate.text,c.format.value)}}},c.format={get:function(){if(c.componentConstruction&&c.componentConstruction.format){if(c.componentConstruction.format.getter)return c.componentConstruction.format.getter();if(c.componentConstruction.format.text)return c.componentConstruction.format.text}var e="";return c.hasDate.get()&&(e+="DD-MM-YYYY"),c.hasTime.get()&&c.hasDate.get()?e+=" HH":c.hasTime.get()&&(e+="HH"),c.hasTime.get()&&c.shortTime.get()?e+=":mm a":c.hasTime.get()&&(e+=":mm"),e}},c.okText={get:function(){if(c.componentConstruction&&c.componentConstruction.okText){if(c.componentConstruction.okText.getter)return c.componentConstruction.okText.getter();if(c.componentConstruction.okText.text)return c.componentConstruction.okText.text}return"Aceptar"}},c.todayText={get:function(){if(c.componentConstruction&&c.componentConstruction.todayText){if(c.componentConstruction.todayText.getter)return c.componentConstruction.todayText.getter();if(c.componentConstruction.todayText.text)return c.componentConstruction.todayText.text}return"Hoy"}},c.cancelText={get:function(){if(c.componentConstruction&&c.componentConstruction.cancelText){if(c.componentConstruction.cancelText.getter)return c.componentConstruction.cancelText.getter();if(c.componentConstruction.cancelText.text)return c.componentConstruction.cancelText.text}return"Cancelar"}},c.weekStart={get:function(){if(c.componentConstruction&&c.componentConstruction.weekStart){if(c.componentConstruction.weekStart.getter)return c.componentConstruction.weekStart.getter();if(c.componentConstruction.weekStart.text)return c.componentConstruction.weekStart.text}return"0"}},c.weekDays={get:function(){return!(!c.componentConstruction||!c.componentConstruction.weekDays)&&c.componentConstruction.weekDays}},c.hasTime={get:function(){return!c.componentConstruction||null==c.componentConstruction.hasTime||c.componentConstruction.hasTime}},c.hasMinutes={get:function(){return!c.componentConstruction||null==c.componentConstruction.hasMinutes||c.componentConstruction.hasMinutes}},c.shortTime={get:function(){return!c.componentConstruction||null==c.componentConstruction.shortTime||c.componentConstruction.shortTime}},c.$onInit=function(){m(),!c.valueModel&&c.defaultValue.get()&&(c.valueModel=new Date)},c.getDateString=function(){return c.valueModel?(s(),c.dateString):c.canShowEditableFields.get()?void 0:c.nullValueLabel.get()},c.displayDialogEdit=function(){var e;t.show((e={date:c.hasDate.get(),time:c.hasTime.get(),minutes:c.hasMinutes.get(),format:c.format.get(),currentDate:c.valueModel||moment().startOf("day"),weekStart:c.weekStart.get(),shortTime:c.shortTime.get(),cancelText:c.cancelText.get(),todayText:c.todayText.get(),okText:c.okText.get(),maxDate:c.maxDate.get(),minDate:c.minDate.get(),amText:"am",pmText:"pm",showTodaysDate:"",weekDays:c.weekDays.get()},_defineProperty(e,"weekStart",c.weekStart.get()),_defineProperty(e,"disableParentScroll",c.disableParentScroll.get()),_defineProperty(e,"autoOk",c.autoOk.get()),_defineProperty(e,"editInput",c.editInput.get()),_defineProperty(e,"clickOutsideToClose",c.clickOutsideToClose.get()),e)).then(function(e){e instanceof Date?c.valueModel=e:c.valueModel=u(value)},function(){})},c.runOnChangeTrigger=function(){s(),c.onChange&&c.onChange({value:c.valueModel}),l(),r=i(m,1500)},e.$watch(function(){return c.valueModel},function(e,t){c.onChange&&c.onChange({value:e}),l(),r=i(m,1500),c.dateString=c.getDateString()})}e.$inject=["mdcDateTimeDialog","$scope","EntifixDateGenerator","EntifixStringUtils","$timeout"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},template:'<div ng-if="vm.isForm.value">                     <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>                     <div ng-if="vm.canShowEditableFields.get()" layout layout-align="center center" class="datetimepicker">                         <md-input-container flex>                             <label>{{vm.title.value + ": " + vm.dateString}}</label>                             <input mdc-datetime-picker                                 type="text"                                 ng-model="vm.valueModel"                                 id="{{vm.name.value}}"                                 name="{{vm.name.value}}"                                 format="{{vm.format.value}}"                                 short-time="vm.shortTime.value"                                 min-date="vm.minDate.value"                                 max-date="vm.maxDate.value"                                 date="vm.hasDate.value"                                 time="vm.hasTime.value"                                 minutes="vm.hasMinutes.value"                                 cancel-text="{{vm.cancelText.value}}"                                 today-text="{{vm.todayText.value}}"                                 ok-text="{{vm.okText.value}}"                                 week-start="vm.weekStart.value"                                 weeks-days="vm.weeksDays.value"                                 show-todays-date                                 disable-parent-scroll="vm.disableParentScroll.value"                                 auto-ok="vm.autoOk.value"                                 edit-input="vm.editInput.value"                                 click-outside-to-close="vm.clickOutsideToClose.value"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-disabled="vm.isDisabled.value"                                 ng-required="vm.isRequired.value"/>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="parse">{{vm.parseMessage.value}}</div>                                 </div>                         </md-input-container>                         <div flex="5">                         <md-button class="md-primary md-icon-button" style="top:-12px;left:-12px;" ng-click="vm.displayDialogEdit()">                             <md-icon class="material-icons">today</md-icon>                         </md-button>                         </div>                     </div>                     <div ng-if="!vm.canShowEditableFields.get()">                         <label>{{vm.title.value}}</label><br/>                         <strong>{{vm.dateString}}</strong>                     </div>                 </div>                 <div ng-if="!vm.isForm.value">                     <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>                     <div layout layout-align="center center" layout- class="datetimepicker">                         <md-input-container flex>                             <label>{{vm.title.value + ": " + vm.dateString}}</label>                             <input mdc-datetime-picker                                 type="text"                                 ng-model="vm.valueModel"                                 id="{{vm.name.value}}"                                 name="{{vm.name.value}}"                                 format="{{vm.format.value}}"                                 short-time="vm.shortTime.value"                                 min-date="vm.minDate.value"                                 max-date="vm.maxDate.value"                                 date="vm.hasDate.value"                                 time="vm.hasTime.value"                                 minutes="vm.hasMinutes.value"                                 cancel-text="{{vm.cancelText.value}}"                                 today-text="{{vm.todayText.value}}"                                 ok-text="{{vm.okText.value}}"                                 week-start="vm.weekStart.value"                                 weeks-days="vm.weeksDays.value"                                 show-todays-date                                 disable-parent-scroll="vm.disableParentScroll.value"                                 auto-ok="vm.autoOk.value"                                 edit-input="vm.editInput.value"                                 click-outside-to-close="vm.clickOutsideToClose.value"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-disabled="vm.isDisabled.value"                                 ng-required="vm.isRequired.value"/>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="parse">{{vm.parseMessage.value}}</div>                                 </div>                         </md-input-container>                         <div flex="5">                         <md-button class="md-primary md-icon-button" style="top:-12px;left:-12px;" ng-click="vm.displayDialogEdit()">                             <md-icon class="material-icons">today</md-icon>                         </md-button>                         </div>                     </div>                 </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixDateTimePicker",t)}(),function(){var e=angular.module("entifix-js");function t(t,e,n,o,i,r){var c=this,a={edit:!0,view:!1};function s(){var e=t.CreateStringHtmlComponentAndBindings(c.componentConstruction,"bindCtrl.connectionComponent.objectBindings");c.stringhtmlcomponent=e.stringhtml,c.connectionComponent.objectBindings=e.objectbindings}function u(){c.queryDetails.resource.saveEntity(c.connectionComponent.entity,function(e,t){t&&(c.connectionComponent.state=a.view),e&&e.data.data&&c.entity.set(e.data.data)})}function l(e,t){c.connectionComponent.state=e?a.view:a.edit,c.entity.set(t)}c.connectionComponent={},c.connectionComponent.state=a.view,c.entity={get:function(){return c.connectionComponent?c.connectionComponent.entity:null},set:function(e){if(c.connectionComponent){var t=c.connectionComponent.entity;c.connectionComponent.entity=e,c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onChangeEntity&&c.componentBehavior.events.onChangeEntity(t,e)}}},c.isLoading={get:function(){return!(!c.queryDetails||!c.queryDetails.resource)&&c.queryDetails.resource.isLoading.get()}},c.isSaving={get:function(){return!(!c.queryDetails||!c.queryDetails.resource)&&c.queryDetails.resource.isSaving.get()}},c.isDeleting={get:function(){return!(!c.queryDetails||!c.queryDetails.resource)&&c.queryDetails.resource.isDeleting.get()}},c.onTask={get:function(){return c.isLoading.get()||c.isSaving.get()||c.isDeleting.get()}},c.title={get:function(){if(c.componentConstruction&&c.componentConstruction.title){if(c.componentConstruction.title.getter)return c.componentConstruction.title.getter(c.entity.get());if(c.componentConstruction.title.text)return c.componentConstruction.title.text}return"Detalle"}},c.icon={get:function(){return c.componentConstruction&&c.componentConstruction.title&&c.componentConstruction.title.icon?c.componentConstruction.title.icon:"menu"}},c.canCancel={get:function(){return!(!c.componentConstruction||!c.componentConstruction.cancel||c.connectionComponent.state!=a.edit)}},c.cancelIcon={get:function(){return c.componentConstruction&&c.componentConstruction.cancel&&c.componentConstruction.cancel.icon?c.componentConstruction.cancel.icon:"clear"}},c.cancelText={get:function(){return c.componentConstruction&&c.componentConstruction.cancel&&c.componentConstruction.cancel.text?""+c.componentConstruction.cancel.text:"Cancelar"}},c.canOk={get:function(){return!(!c.componentConstruction||!c.componentConstruction.ok||c.connectionComponent.state!=a.view)}},c.okIcon={get:function(){return c.componentConstruction&&c.componentConstruction.ok&&c.componentConstruction.ok.icon?c.componentConstruction.ok.icon:"done"}},c.okText={get:function(){return c.componentConstruction&&c.componentConstruction.ok&&c.componentConstruction.ok.text?""+c.componentConstruction.ok.text:"Aceptar"}},c.canEdit={get:function(){return!(!(c.componentConstruction&&c.componentConstruction.edit&&c.queryDetails&&c.queryDetails.resource&&c.entity.get())||c.queryDetails.resource.isNewEntity(c.entity.get())||c.connectionComponent.state!=a.view)}},c.editIcon={get:function(){return c.componentConstruction&&c.componentConstruction.edit&&c.componentConstruction.edit.icon?c.componentConstruction.edit.icon:"create"}},c.editText={get:function(){if(c.componentConstruction&&c.componentConstruction.edit){if(c.componentConstruction.edit.text instanceof Object&&c.componentConstruction.edit.text.getter)return c.componentConstruction.edit.text.getter();if(c.componentConstruction.edit.text instanceof String)return c.componentConstruction.edit.text}return"Editar"}},c.canSave={get:function(){return!(!c.componentConstruction||!c.componentConstruction.save||c.connectionComponent.state!=a.edit)}},c.saveIcon={get:function(){return c.componentConstruction&&c.componentConstruction.save&&c.componentConstruction.save.icon?""+c.componentConstruction.save.icon:"save"}},c.saveText={get:function(){return c.componentConstruction&&c.componentConstruction.save&&c.componentConstruction.save.text?""+c.componentConstruction.save.text:"Guardar"}},c.canRemove={get:function(){return!(!(c.componentConstruction&&c.componentConstruction.remove&&c.queryDetails&&c.queryDetails.resource&&c.entity.get())||c.queryDetails.resource.isNewEntity(c.entity.get())||c.connectionComponent.state!=a.edit)}},c.removeIcon={get:function(){return c.componentConstruction&&c.componentConstruction.remove&&c.componentConstruction.remove.icon?c.componentConstruction.remove.icon:"delete"}},c.removeText={get:function(){return c.componentConstruction&&c.componentConstruction.remove&&c.componentConstruction.remove.text?""+c.componentConstruction.remove.text:"Eliminar"}},c.canProcess={get:function(){return!(!(c.componentConstruction&&c.componentConstruction.process&&c.connectionComponent.state==a.view&&c.queryDetails&&c.queryDetails.resource&&c.entity.get())||c.queryDetails.resource.isNewEntity(c.entity.get())||c.queryDetails.resource.isProcessedEntity(c.entity.get()))}},c.processIcon={get:function(){return c.componentConstruction&&c.componentConstruction.process&&c.componentConstruction.process.icon?c.componentConstruction.process.icon:"done_all"}},c.processText={get:function(){return c.componentConstruction&&c.componentConstruction.process&&c.componentConstruction.process.text?""+c.componentConstruction.process.text:"Procesar"}},c.allowActions={get:function(){return!c.componentConstruction||null==c.componentConstruction.allowActions||c.componentConstruction.allowActions}},c.saveTooltip={get:function(){return c.componentConstruction&&c.componentConstruction.saveTooltip?c.componentConstruction.saveTooltip:"Todos los campos obligatorios deben estar correctos"}},c.canViewHistory={get:function(){return c.componentConstruction.canViewHistory.get()},set:function(e){c.componentConstruction.canViewHistory.set(e)}},c.history={get:function(){return i.showHistory}},c.hasPermissions={get:function(){return!(!c.componentConstruction||null==c.componentConstruction.permissions)}},c.hasAllPermission={get:function(){return!(null==c.componentConstruction.permissions.all||!r.checkPermissions(c.componentConstruction.permissions.all))}},c.hasSavePermission={get:function(){return!(c.componentConstruction.permissions.save&&(null==c.componentConstruction.permissions.save||!r.checkPermissions(c.componentConstruction.permissions.save)))}},c.hasEditPermission={get:function(){return!(c.componentConstruction.permissions.edit&&(null==c.componentConstruction.permissions.edit||!r.checkPermissions(c.componentConstruction.permissions.edit)))}},c.hasRemovePermission={get:function(){return!(c.componentConstruction.permissions.remove&&(null==c.componentConstruction.permissions.remove||!r.checkPermissions(c.componentConstruction.permissions.remove)))}},c.hasProcessPermission={get:function(){return!(c.componentConstruction.permissions.process&&(null==c.componentConstruction.permissions.process||!r.checkPermissions(c.componentConstruction.permissions.process)))}},c.$onInit=function(){new n(c.queryDetails.resource),c.connectionComponent.showEditableFields={get:function(){return!c.entity.get()||c.connectionComponent.state==a.edit},set:function(e){1==e&&(c.connectionComponent.state=a.edit),0==e&&(c.connectionComponent.state=a.view)}},c.connectionComponent.state=c.connectionComponent.showEditableFields.get(),c.connectionComponent.isSaving=c.isSaving,c.connectionComponent.history=c.history,c.connectionComponent.canViewHistory=c.canViewHistory,c.connectionComponent.canCancel={get:function(){return c.canCancel.get()}},c.connectionComponent.canRemove={get:function(){return c.canRemove.get()}},c.connectionComponent.canSave={get:function(){return c.canSave.get()}},c.connectionComponent.canEdit={get:function(){return c.canEdit.get()}},c.connectionComponent.canOk={get:function(){return c.canOk.get()}},c.connectionComponent.canProcess={get:function(){return c.canProcess.get()}},c.connectionComponent.cancelText={get:function(){return c.cancelText.get()}},c.connectionComponent.removeText={get:function(){return c.removeText.get()}},c.connectionComponent.saveText={get:function(){return c.saveText.get()}},c.connectionComponent.editText={get:function(){return c.editText.get()}},c.connectionComponent.okText={get:function(){return c.okText.get()}},c.connectionComponent.processText={get:function(){return c.processText.get()}},c.connectionComponent.cancelIcon={get:function(){return c.cancelIcon.get()}},c.connectionComponent.removeIcon={get:function(){return c.removeIcon.get()}},c.connectionComponent.saveIcon={get:function(){return c.saveIcon.get()}},c.connectionComponent.editIcon={get:function(){return c.editIcon.get()}},c.connectionComponent.okIcon={get:function(){return c.okIcon.get()}},c.connectionComponent.processIcon={get:function(){return c.processIcon.get()}},c.connectionComponent.cancel={invoke:function(){c.cancel()}},c.connectionComponent.remove={invoke:function(){c.remove()}},c.connectionComponent.edit={invoke:function(){c.edit()}},c.connectionComponent.ok={invoke:function(){c.ok()}},c.connectionComponent.save={invoke:function(){c.save()}},c.connectionComponent.process={invoke:function(){c.process()}},c.connectionComponent.onTask={get:function(){return c.onTask.get()}},c.connectionComponent.saveTooltip={get:function(){return c.saveTooltip.get()}},c.connectionComponent.entityForm={valid:function(){return c.entityForm.$valid}},c.connectionComponent.queryDetails=c.queryDetails,c.connectionComponent.evaluateErrors={get:function(e){return function(t){var n={};for(var o in c.entityForm.$error){var e=c.entityForm.$error[o];e instanceof Array&&e.forEach(function(e){e.$name==t&&(n[o]=!0)})}return n}(e)}},function e(){c.entityForm?c.connectionComponent.entityForm=c.entityForm:o(e,200)}(),c.componentConstruction&&s(),c.componentBindingOut={showEditableFields:c.connectionComponent.showEditableFields,entity:c.entity,recreateDynamicComponent:s},c.componentBehavior&&c.componentBehavior.afterConstruction&&c.componentBehavior.afterConstruction(),c.hasPermissions.get()&&(c.hasAllPermission.get()||(c.hasSavePermission.get()||delete c.componentConstruction.save,c.hasEditPermission.get()||delete c.componentConstruction.edit,c.hasRemovePermission.get()||delete c.componentConstruction.remove,c.hasProcessPermission.get()||delete c.componentConstruction.process))},c.ok=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onOk&&c.componentBehavior.events.onOk(),c.componentConstruction.ok.customAction&&c.componentConstruction.ok.customAction(),c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onAfterOk&&c.componentBehavior.events.onAfterOk()},c.cancel=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onCancel&&c.componentBehavior.events.onCancel(),c.componentConstruction.cancel.customAction?c.componentConstruction.cancel.customAction():c.connectionComponent.state==a.edit&&(c.connectionComponent.state=a.view,c.entity.get()&&c.queryDetails.resource.loadAsResource(c.entity.get(),function(e){c.entity.set(e)})),c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onCanceled&&c.componentBehavior.events.onCanceled()},c.edit=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onEdit&&c.componentBehavior.events.onEdit(),c.componentConstruction.edit.customAction?c.componentConstruction.edit.customAction():c.connectionComponent.state=a.edit,c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onEdited&&c.componentBehavior.events.onEdited()},c.save=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onSave&&c.componentBehavior.events.onSave(c.entity.get()),c.componentConstruction.save.customAction?c.componentConstruction.save.customAction(c.entity.get(),l):u(),c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onSaved&&c.componentBehavior.events.onSaved()},c.remove=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onRemove&&c.componentBehavior.events.onRemove(),c.componentConstruction.remove.customAction?c.componentConstruction.remove.customAction(c.entity.get()):e.confirm({body:"Está seguro de eliminar el registro",header:"Confirmación requerida",actionConfirm:function(){c.queryDetails.resource.deleteEntity(c.connectionComponent.entity,function(){c.connectionComponent.state=a.view})},actionCancel:function(){}}),c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onRemoved&&c.componentBehavior.events.onRemoved()},c.process=function(){c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onProcess&&c.componentBehavior.events.onProcess(),c.componentConstruction.process.customAction?c.componentConstruction.process.customAction(c.entity.get(),l):(c.connectionComponent.entity[c.queryDetails.resource.getOpProperty.get()]="PROCESAR",u()),c.componentBehavior&&c.componentBehavior.events&&c.componentBehavior.events.onProcessed&&c.componentBehavior.events.onProcessed()},c.submit=function(){c.save()}}t.$inject=["BaseComponentFunctions","EntifixNotification","EntifixNotifier","$timeout","$rootScope","EntifixSession"];var n={template:'<br/>                     <md-card md-whiteframe="4" ng-class="{\'whirl double-up whirlback\': bindCtrl.onTask.get() }">                         <md-card-title>                             <md-card-title-text>                                 <span class="md-headline"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon>&nbsp;{{bindCtrl.title.get()}}</span>                             </md-card-title-text>                         </md-card-title>                         <form name="bindCtrl.entityForm" novalidate ng-submit="bindCtrl.entityForm.$valid && bindCtrl.submit()" autocomplete="off">                             <md-card-content>                                 <div compile="bindCtrl.stringhtmlcomponent" flex="100"></div>                             </md-card-content>                             <md-card-actions layout="row" layout-align="end center" ng-if="bindCtrl.allowActions.get()">                                 <md-button ng-show="bindCtrl.canCancel.get()" ng-click="bindCtrl.cancel()" ng-disabled="bindCtrl.onTask.get()">                                     <md-icon class="material-icons">{{bindCtrl.cancelIcon.get()}}</md-icon> &nbsp;{{bindCtrl.cancelText.get()}}                                 </md-button>                                 <md-button class="md-warn" ng-show="bindCtrl.canRemove.get()" ng-click="bindCtrl.remove()" ng-disabled="bindCtrl.onTask.get()">                                     <md-icon class="material-icons">{{bindCtrl.removeIcon.get()}}</md-icon> &nbsp;{{bindCtrl.removeText.get()}}                                 </md-button>                                 <md-button type="submit" class="md-primary" ng-show="bindCtrl.canSave.get()" ng-disabled="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">                                     <md-tooltip ng-if="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">{{bindCtrl.saveTooltip.get()}}</md-tooltip>                                     <md-icon class="material-icons">{{bindCtrl.saveIcon.get()}}</md-icon> &nbsp;{{bindCtrl.saveText.get()}}                                 </md-button>                                 <md-button class="md-accent" ng-show="bindCtrl.canEdit.get()" ng-click="bindCtrl.edit()" ng-disabled="bindCtrl.onTask.get()">                                     <md-icon class="material-icons">{{bindCtrl.editIcon.get()}}</md-icon> &nbsp;{{bindCtrl.editText.get()}}                                 </md-button>                                 <md-button ng-show="bindCtrl.canOk.get()" ng-click="bindCtrl.ok()" ng-disabled="bindCtrl.onTask.get()">                                     <md-icon class="material-icons">{{bindCtrl.okIcon.get()}}</md-icon> &nbsp;{{bindCtrl.okText.get()}}                                 </md-button>                                 <md-button class="md-primary" ng-show="bindCtrl.canProcess.get()" ng-click="bindCtrl.process()" ng-disabled="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid || !bindCtrl.isValidEntity.get()">                                     <md-tooltip ng-if="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">{{bindCtrl.saveTooltip.get()}}</md-tooltip>                                     <md-icon class="material-icons">{{bindCtrl.processIcon.get()}}</md-icon> &nbsp;{{bindCtrl.processText.get()}}                                 </md-button>                             </md-card-actions>                         </form>                     </md-card>',controller:t,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",componentBehavior:"<",componentBindingOut:"=",queryDetails:"="}};e.component("entifixEntityForm",n)}(),function(){function e(e){var t=this,n=Math.floor(100*Math.random()+1);t.canShowEditableFields={get:function(){return!!t.showEditableFields&&t.showEditableFields}},t.canEvaluateErrors={get:function(){return!!t.evaluateErrors&&t.evaluateErrors({name:t.name.get()})}},t.isRequired={get:function(){return!(!t.componentConstruction||!t.componentConstruction.isRequired)&&t.componentConstruction.isRequired}},t.requiredMessage={get:function(){if(t.componentConstruction&&t.componentConstruction.requiredMessage){if(t.componentConstruction.requiredMessage.getter)return t.componentConstruction.requiredMessage.getter();if(t.componentConstruction.requiredMessage.text)return t.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},t.title={get:function(){if(t.componentConstruction&&t.componentConstruction.title){if(t.componentConstruction.title.getter)return t.componentConstruction.title.getter();if(t.componentConstruction.title.text)return t.componentConstruction.title.text}return""}},t.name={get:function(){return""!=t.title.get()?e.getCleanedString(t.title.get()):"entifixinput"+n}},t.tooltip={get:function(){if(t.componentConstruction&&t.componentConstruction.tooltip){if(t.componentConstruction.tooltip.getter)return t.componentConstruction.tooltip.getter();if(t.componentConstruction.tooltip.text)return t.componentConstruction.tooltip.text}return null}},t.isMultiple={get:function(){return!(!t.componentConstruction||null==t.componentConstruction.isMultiple)&&t.componentConstruction.isMultiple}},t.selectFileText={get:function(){if(t.componentConstruction&&t.componentConstruction.selectFileText){if(t.componentConstruction.selectFileText.getter)return t.componentConstruction.selectFileText.getter();if(t.componentConstruction.selectFileText.text)return t.componentConstruction.selectFileText.text}return t.isMultiple.get()?"Seleccionar Archivos...":"Seleccionar Archivo"}},t.deleteFileLabel={get:function(){if(t.componentConstruction&&t.componentConstruction.deleteFileLabel){if(t.componentConstruction.deleteFileLabel.getter)return t.componentConstruction.deleteFileLabel.getter();if(t.componentConstruction.deleteFileLabel.text)return t.componentConstruction.deleteFileLabel.text}return t.isMultiple.get()?"Eliminar archivos...":"Eliminar archivo..."}},t.fileNameLabel={get:function(){if(t.componentConstruction&&t.componentConstruction.fileNameLabel){if(t.componentConstruction.fileNameLabel.getter)return t.componentConstruction.fileNameLabel.getter();if(t.componentConstruction.fileNameLabel.text)return t.componentConstruction.fileNameLabel.text}return t.isMultiple.get()?"Nombre de los archivos: ":"Nombre del archivo: "}},t.showSelectedMessage={get:function(){return!t.componentConstruction||null==t.componentConstruction.showSelectedMessage||t.componentConstruction.showSelectedMessage}},t.$onInit=function(){t.init&&t.init()},t.runOnChangeTrigger=function(){t.onChange&&t.onChange({value:t.valueModel})},t.getDisplay=function(){return t.valueModel?t.format.get()?$filter(t.format.get())(t.valueModel,t.currency.get()):t.valueModel:t.nullValueLabel.get()},t.cleanFile=function(){delete t.valueModel}}e.$inject=["EntifixStringUtils"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},template:'<div ng-show="vm.canShowEditableFields.get()">                     <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                     <div ng-if="!vm.isMultiple.get()">                         <label class="btn-file md-raised md-primary">{{vm.selectFileText.get()}}                             <input type="file"                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.get()"                                 entifix-file-read                                 ng-change="vm.runOnChangeTrigger()"/>                         </label>                         <div ng-messages="vm.canEvaluateErrors.get()" multiple>                             <div ng-message="required">{{vm.requiredMessage.get()}}</div>                         </div>                         <md-button class="text-danger btn-delete-file" ng-click="vm.cleanFile()" ng-show="vm.valueModel">{{vm.deleteFileLabel.get()}}</md-button>                         <h4 ng-show="vm.valueModel && vm.showSelectedMessage.get()">                             <strong>{{vm.fileNameLabel.get()}}</strong>                             {{vm.valueModel.name + " "}}                         </h4>                     </div>                     <div ng-if="vm.isMultiple.get()">                         <label class="btn-file md-raised md-primary">{{vm.selectFileText.get()}}                             <input type="file"                                 ng-model="vm.valueModel"                                 multiple                                 ng-required="vm.isRequired.get()"                                 entifix-file-read                                 ng-change="vm.runOnChangeTrigger()"/>                         </label>                         <div ng-messages="vm.canEvaluateErrors.get()" multiple>                             <div ng-message="required">{{vm.requiredMessage.get()}}</div>                         </div>                         <md-button class="text-danger btn-delete-file" ng-click="vm.cleanFile()" ng-show="vm.valueModel">{{vm.deleteFileLabel.get()}}</md-button>                         <h4 ng-show="vm.valueModel && vm.showSelectedMessage.get()">                             <strong>{{vm.fileNameLabel.get()}}</strong>                             <p ng-repeat="file in vm.valueModel">{{file.name + " "}}</p>                         </h4>                     </div>                     <br hide-gt-sm><br hide-gt-sm>                    </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixFile",t)}(),function(){function e(e,t,n,o){var i,r=this,c=Math.floor(100*Math.random()+1);function a(){r.isForm.value=r.isForm.get(),r.tooltip.value=r.tooltip.get(),r.isTextArea.value=r.isTextArea.get(),r.title.value=r.title.get(),r.display=r.getDisplay(),r.type.value=r.type.get(),r.name.value=r.name.get(),r.isRequired.value=r.isRequired.get(),r.emailMessage.value=r.emailMessage.get(),r.urlMessage.value=r.urlMessage.get(),r.requiredMessage.value=r.requiredMessage.get(),r.maxLength.value=r.maxLength.get(),r.maxLengthMessage.value=r.maxLengthMessage.get(),r.minLength.value=r.minLength.get(),r.minLengthMessage.value=r.minLengthMessage.get(),r.max.value=r.max.get(),r.maxMessage.value=r.maxMessage.get(),r.min.value=r.min.get(),r.minMessage.value=r.minMessage.get(),r.modelOptions.value=r.modelOptions.get(),r.numberMessage.value=r.numberMessage.get(),r.numberValidation.value=r.numberValidation.get(),r.nullValueLabel.value=r.nullValueLabel.get(),r.rows.value=r.rows.get(),r.format.value=r.format.get(),r.currency.value=r.currency.get(),r.isDisabled.value=r.isDisabled.get()}r.canShowEditableFields={get:function(){return!!r.showEditableFields&&r.showEditableFields}},r.canEvaluateErrors={get:function(){return!!r.evaluateErrors&&r.evaluateErrors({name:r.name.get()})}},r.isRequired={get:function(){return!(!r.componentConstruction||!r.componentConstruction.isRequired)&&r.componentConstruction.isRequired}},r.requiredMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.requiredMessage){if(r.componentConstruction.requiredMessage.getter)return r.componentConstruction.requiredMessage.getter();if(r.componentConstruction.requiredMessage.text)return r.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},r.maxLength={get:function(){return r.componentConstruction&&r.componentConstruction.maxLength?r.componentConstruction.maxLength:null}},r.maxLengthMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.maxLengthMessage){if(r.componentConstruction.maxLengthMessage.getter)return r.componentConstruction.maxLengthMessage.getter();if(r.componentConstruction.maxLengthMessage.text)return r.componentConstruction.maxLengthMessage.text}return"El texto es demasiado largo"}},r.minLength={get:function(){return r.componentConstruction&&r.componentConstruction.minLength?r.componentConstruction.minLength:null}},r.minLengthMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.minLengthMessage){if(r.componentConstruction.minLengthMessage.getter)return r.componentConstruction.minLengthMessage.getter();if(r.componentConstruction.minLengthMessage.text)return r.componentConstruction.minLengthMessage.text}return"El texto es demasiado corto"}},r.max={get:function(){return r.componentConstruction&&r.componentConstruction.max?r.componentConstruction.max:null}},r.maxMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.maxMessage){if(r.componentConstruction.maxMessage.getter)return r.componentConstruction.maxMessage.getter();if(r.componentConstruction.maxMessage.text)return r.componentConstruction.maxMessage.text}return"El número es demasiado largo"}},r.min={get:function(){return r.componentConstruction&&r.componentConstruction.min?r.componentConstruction.min:null}},r.minMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.minMessage){if(r.componentConstruction.minMessage.getter)return r.componentConstruction.minMessage.getter();if(r.componentConstruction.minMessage.text)return r.componentConstruction.minMessage.text}return"El número es demasiado corto"}},r.emailMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.emailMessage){if(r.componentConstruction.emailMessage.getter)return r.componentConstruction.emailMessage.getter();if(r.componentConstruction.emailMessage.text)return r.componentConstruction.emailMessage.text}return"Ingrese una dirección de correo válida"}},r.urlMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.urlMessage){if(r.componentConstruction.urlMessage.getter)return r.componentConstruction.urlMessage.getter();if(r.componentConstruction.urlMessage.text)return r.componentConstruction.urlMessage.text}return"Ingrese una dirección URL válida"}},r.numberMessage={get:function(){if(r.componentConstruction&&r.componentConstruction.numberMessage){if(r.componentConstruction.numberMessage.getter)return r.componentConstruction.numberMessage.getter();if(r.componentConstruction.numberMessage.text)return r.componentConstruction.numberMessage.text}return"Ingrese un número válido"}},r.title={get:function(){if(r.componentConstruction&&r.componentConstruction.title){if(r.componentConstruction.title.getter)return r.componentConstruction.title.getter();if(r.componentConstruction.title.text)return r.componentConstruction.title.text}return""}},r.name={get:function(){return""!=r.title.get()?t.getCleanedString(r.title.get()):"entifixinput"+c}},r.isTextArea={get:function(){return!(!r.componentConstruction||!r.componentConstruction.isTextArea)}},r.type={get:function(){return r.componentConstruction&&r.componentConstruction.type?r.componentConstruction.type:"text"}},r.isForm={get:function(){return!r.componentConstruction||null==r.componentConstruction.isForm||r.componentConstruction.isForm}},r.rows={get:function(){return r.componentConstruction&&r.componentConstruction.rows?r.componentConstruction.rows:1}},r.tooltip={get:function(){if(r.componentConstruction&&r.componentConstruction.tooltip){if(r.componentConstruction.tooltip.getter)return r.componentConstruction.tooltip.getter();if(r.componentConstruction.tooltip.text)return r.componentConstruction.tooltip.text}return null}},r.modelOptions={get:function(){return r.componentConstruction&&r.componentConstruction.modelOptions?r.componentConstruction.modelOptions:{}}},r.numberValidation={get:function(){return!(!r.componentConstruction||!r.componentConstruction.numberValidation)&&r.componentConstruction.numberValidation}},r.format={get:function(){return r.componentConstruction&&r.componentConstruction.format?r.componentConstruction.format:null}},r.currency={get:function(){return r.componentConstruction&&r.componentConstruction.currency?r.componentConstruction.currency:""}},r.nullValueLabel={get:function(){return r.componentConstruction&&r.componentConstruction.nullValueLabel?r.componentConstruction.nullValueLabel:"SIN REGISTROS"}},r.isDisabled={get:function(){return!(!r.componentConstruction||!r.componentConstruction.isDisabled)&&r.componentConstruction.isDisabled}},r.$onInit=function(){a()},r.runOnChangeTrigger=function(){r.onChange&&r.onChange({value:r.valueModel}),i&&(n.cancel(i),i=null),i=n(a,1500)},r.getDisplay=function(){return r.valueModel?r.format.get()?e(r.format.get())(r.valueModel,r.currency.get()):r.valueModel:r.nullValueLabel.get()},o.$watch(function(){return r.valueModel},function(e,t){r.display=r.getDisplay()})}e.$inject=["$filter","EntifixStringUtils","$timeout","$scope"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},template:'<div ng-if="!vm.isTextArea.value">                     <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>                     <div ng-if="vm.isForm.value">                         <md-input-container class="md-block" ng-show="vm.canShowEditableFields.get()">                             <label>{{vm.title.value}}</label>                             <input                                 type="{{vm.type.value}}"                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.value"                                 ng-disabled="vm.isDisabled.value"                                 md-maxlength="{{vm.maxLength.value}}"                                 minlength="{{vm.minLength.value}}"                                 name="{{vm.name.value}}"                                 aria-label="{{vm.name.value}}"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-model-options="vm.modelOptions.value"                                 step="any"                                 number-validation="{{vm.numberValidation.value}}"                                 entifix-number-validation="{{vm.numberValidation.value}}"                                 entifix-number-block                                 ng-max="vm.max.value"                                 ng-min="vm.min.value"                                 autocomplete="off"/>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="md-maxlength">{{vm.maxLengthMessage.value}}</div>                                     <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                     <div ng-message="email">{{vm.emailMessage.value}}</div>                                     <div ng-message="url">{{vm.urlMessage.value}}</div>                                     <div ng-message="number">{{vm.numberMessage.value}}</div>                                     <div ng-message="max">{{vm.maxMessage.value}}</div>                                     <div ng-message="min">{{vm.minMessage.value}}</div>                                 </div>                         </md-input-container>                         <div ng-hide="vm.canShowEditableFields.get()">                             <label>{{vm.title.value}}</label><br/>                             <strong>{{vm.display}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.value">                         <md-input-container class="md-block">                             <label>{{vm.title.value}}</label>                             <input                                 type="{{vm.type.value}}"                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.value"                                 ng-disabled="vm.isDisabled.value"                                 md-maxlength="{{vm.maxLength.value}}"                                 minlength="{{vm.minLength.value}}"                                 name="{{vm.name.value}}"                                 aria-label="{{vm.name.value}}"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-model-options="vm.modelOptions.value"                                 step="any"                                 entifix-number-validation="{{vm.numberValidation.value}}"                                 entifix-number-block                                 ng-max="vm.max.value"                                 ng-min="vm.min.value"                                 autocomplete="off"/>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="md-maxlength">{{vm.maxLengthMessage.value}}</div>                                     <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                     <div ng-message="email">{{vm.emailMessage.value}}</div>                                     <div ng-message="url">{{vm.urlMessage.value}}</div>                                     <div ng-message="number">{{vm.numberMessage.value}}</div>                                     <div ng-message="max">{{vm.maxMessage.value}}</div>                                     <div ng-message="min">{{vm.minMessage.value}}</div>                                 </div>                         </md-input-container>                     </div>                 </div>                 <div ng-if="vm.isTextArea.value">                     <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>                     <div ng-if="vm.isForm.value">                         <md-input-container class="md-block" ng-show="vm.canShowEditableFields.get()">                             <label>{{vm.title.value}}</label>                             <textarea                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.value"                                 ng-disabled="vm.isDisabled.value"                                 md-maxlength="{{vm.maxLength.value}}"                                 rows="{{vm.rows.value}}"                                 minlength="{{vm.minLength.value}}"                                 name="{{vm.name.value}}"                                 aria-label="{{vm.name.value}}"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-model-options="vm.modelOptions.value"                                 step="any"                                 entifix-number-validation="{{vm.numberValidation.value}}"                                 entifix-number-block                                 ng-max="vm.max.value"                                 ng-min="vm.min.value"></textarea>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="md-maxlength">{{vm.maxLengthMessage.value}}</div>                                     <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                     <div ng-message="email">{{vm.emailMessage.value}}</div>                                     <div ng-message="url">{{vm.urlMessage.value}}</div>                                     <div ng-message="number">{{vm.numberMessage.value}}</div>                                     <div ng-message="max">{{vm.maxMessage.value}}</div>                                     <div ng-message="min">{{vm.minMessage.value}}</div>                                 </div>                         </md-input-container>                         <div ng-hide="vm.canShowEditableFields.get()">                             <label>{{vm.title.value}}</label><br/>                             <strong>{{vm.display}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.value">                         <md-input-container class="md-block">                             <label>{{vm.title.value}}</label>                             <textarea                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.value"                                 ng-disabled="vm.isDisabled.value"                                 md-maxlength="{{vm.maxLength.value}}"                                 rows="{{vm.rows.value}}"                                 minlength="{{vm.minLength.value}}"                                 name="{{vm.name.value}}"                                 aria-label="{{vm.name.value}}"                                 ng-change="vm.runOnChangeTrigger()"                                 ng-model-options="vm.modelOptions.value"                                 step="any"                                 entifix-number-validation="{{vm.numberValidation.value}}"                                 entifix-number-block                                 ng-max="vm.max.value"                                 ng-min="vm.min.value"></textarea>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.value}}</div>                                     <div ng-message="md-maxlength">{{vm.maxLengthMessage.value}}</div>                                     <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>                                     <div ng-message="email">{{vm.emailMessage.value}}</div>                                     <div ng-message="url">{{vm.urlMessage.value}}</div>                                     <div ng-message="number">{{vm.numberMessage.value}}</div>                                     <div ng-message="max">{{vm.maxMessage.value}}</div>                                     <div ng-message="min">{{vm.minMessage.value}}</div>                                 </div>                         </md-input-container>                     </div>                 </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixInput",t)}(),function(){function e(e){var t=this,n=Math.floor(100*Math.random()+1);t.isLoading={get:function(){return t.queryDetails&&t.queryDetails.resource&&t.queryDetails.resource.isLoading.get(),!1}},t.canShowEditableFields={get:function(){return!!t.showEditableFields&&t.showEditableFields}},t.canEvaluateErrors={get:function(){return!!t.evaluateErrors&&t.evaluateErrors({name:t.name.get()})}},t.isRequired={get:function(){return!(!t.componentConstruction||!t.componentConstruction.isRequired)&&t.componentConstruction.isRequired}},t.requiredMessage={get:function(){if(t.componentConstruction&&t.componentConstruction.requiredMessage){if(t.componentConstruction.requiredMessage.getter)return t.componentConstruction.requiredMessage.getter();if(t.componentConstruction.requiredMessage.text)return t.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},t.title={get:function(){if(t.componentConstruction&&t.componentConstruction.title){if(t.componentConstruction.title.getter)return t.componentConstruction.title.getter();if(t.componentConstruction.title.text)return t.componentConstruction.title.text}return""}},t.name={get:function(){return""!=t.title.get()?e.getCleanedString(t.title.get()):"entifixradiobutton"+n}},t.isForm={get:function(){return!t.componentConstruction||null==t.componentConstruction.isForm||t.componentConstruction.isForm}},t.isMultipleDisplay={get:function(){return!(!t.componentConstruction||!t.componentConstruction.isMultipleDisplay)&&t.componentConstruction.isMultipleDisplay}},t.tooltip={get:function(){if(t.componentConstruction&&t.componentConstruction.tooltip){if(t.componentConstruction.tooltip.getter)return t.componentConstruction.tooltip.getter();if(t.componentConstruction.tooltip.text)return t.componentConstruction.tooltip.text}return null}},t.$onInit=function(){t.isMultipleDisplay.get()?(t.parameters={displayProperties:t.componentConstruction.displayProperties,actionSuccess:function(e){t.items=e},actionError:t.queryDetails.actionError,filters:t.queryDetails.filters},t.queryDetails.resource.getEnumerationBindMultiDisplay(t.parameters)):t.queryDetails.resource.getEnumerationBind(t.componentConstruction.displayPropertyName,function(e){t.items=e}),t.componentBindingOut={selectedEntity:{get:function(){return t.getValue()}}},t.init&&t.init()},t.getDisplayValue=function(){if(t.valueModel&&t.items&&0<t.items.length){var e=t.items.filter(function(e){return e.Value==t.valueModel})[0];if(e)return e.Display}return null},t.getValue=function(){if(t.valueModel&&t.items&&0<t.items.length){var e=t.items.filter(function(e){return e.Value==t.valueModel})[0];if(e)return e}return null},t.runOnChangeTrigger=function(){var e=t.items.filter(function(e){return e.Value==t.valueModel})[0];t.onChange&&t.onChange({oldValue:t.valueModel,newValue:t.valueModel,entity:e})}}e.$inject=["EntifixStringUtils"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},template:'<div ng-class="{\'whirl double-up whirlback\': vm.isLoading.get()}">                     <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                     <div ng-if="vm.isForm.get()">                         <div ng-if="vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label>                             <md-radio-group                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.get()"                                 ng-change="vm.runOnChangeTrigger()"                                 name="{{vm.name.get()}}">                                 <md-radio-button                                     ng-repeat="item in vm.items"                                     ng-value="item.Value"                                     aria-label="item.Display">                                     {{item.Display}}                                 </md-radio-button>                                 <div ng-messages="vm.canEvaluateErrors.get()" class="ngMessage-error" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                 </div>                              </md-radio-group>                         </div>                         <div ng-if="!vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label><br/>                             <strong>{{vm.getDisplayValue()}}</strong>                         </div>                     </div>                     <div ng-if="!vm.isForm.get()">                         <div ng-if="vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label>                             <md-radio-group                                 ng-model="vm.valueModel"                                 ng-required="vm.isRequired.get()"                                 ng-change="vm.runOnChangeTrigger()"                                 name="{{vm.name.get()}}">                                 <md-radio-button                                     ng-repeat="item in vm.items"                                     ng-value="item.Value"                                     aria-label="item.Display">                                     {{item.Display}}                                 </md-radio-button>                                 <div ng-messages="vm.canEvaluateErrors.get()" class="ngMessage-error" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                 </div>                              </md-radio-group>                         </div>                         <div ng-if="!vm.canShowEditableFields.get()">                             <label>{{vm.title.get()}}</label><br/>                             <strong>{{vm.getDisplayValue()}}</strong>                         </div>                     </div>                 </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixRadioButton",t)}(),function(){function e(e){var o=this,t=Math.floor(100*Math.random()+1);o.isLoading={get:function(){return o.queryDetails&&o.queryDetails.resource&&o.queryDetails.resource.isLoading.get(),!1}},o.canShowEditableFields={get:function(){return!!o.showEditableFields&&o.showEditableFields}},o.canEvaluateErrors={get:function(){return!!o.evaluateErrors&&o.evaluateErrors({name:o.name.get()})}},o.isRequired={get:function(){return!(!o.componentConstruction||!o.componentConstruction.isRequired)&&o.componentConstruction.isRequired}},o.requiredMessage={get:function(){if(o.componentConstruction&&o.componentConstruction.requiredMessage){if(o.componentConstruction.requiredMessage.getter)return o.componentConstruction.requiredMessage.getter();if(o.componentConstruction.requiredMessage.text)return o.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},o.multipleMessage={get:function(){if(o.componentConstruction&&o.componentConstruction.multipleMessage){if(o.componentConstruction.multipleMessage.getter)return o.componentConstruction.multipleMessage.getter();if(o.componentConstruction.multipleMessage.text)return o.componentConstruction.multipleMessage.text}return"Error en la elección del elemento, vuelva a seleccionarlo"}},o.title={get:function(){if(o.componentConstruction&&o.componentConstruction.title){if(o.componentConstruction.title.getter)return o.componentConstruction.title.getter();if(o.componentConstruction.title.text)return o.componentConstruction.title.text}return""}},o.name={get:function(){return""!=o.title.get()?e.getCleanedString(o.title.get()):"entifixselect"+t}},o.isForm={get:function(){return!o.componentConstruction||null==o.componentConstruction.isForm||o.componentConstruction.isForm}},o.isMultipleDisplay={get:function(){return!(!o.componentConstruction||!o.componentConstruction.isMultipleDisplay)&&o.componentConstruction.isMultipleDisplay}},o.isMultiple={get:function(){return!(!o.componentConstruction||!o.componentConstruction.isMultiple)&&o.componentConstruction.isMultiple}},o.tooltip={get:function(){if(o.componentConstruction&&o.componentConstruction.tooltip){if(o.componentConstruction.tooltip.getter)return o.componentConstruction.tooltip.getter();if(o.componentConstruction.tooltip.text)return o.componentConstruction.tooltip.text}return null}},o.collection={get:function(){if(o.componentConstruction&&o.componentConstruction.collection){if(o.componentConstruction.collection.getter)return o.componentConstruction.collection.getter();if(o.componentConstruction.collection.elements)return o.componentConstruction.collection.elements}return null}},o.nullValueLabel={get:function(){return o.componentConstruction&&o.componentConstruction.nullValueLabel?o.componentConstruction.nullValueLabel:"SIN REGISTROS"}},o.canShowNoneOption={get:function(){return!(!o.componentConstruction||!o.componentConstruction.canShowNoneOption)&&o.componentConstruction.canShowNoneOption}},o.noneLabel={get:function(){return o.componentConstruction&&o.componentConstruction.noneLabel?o.componentConstruction.noneLabel:"Ninguno"}},o.allLabel={get:function(){return o.componentConstruction&&o.componentConstruction.allLabel?o.componentConstruction.allLabel:"Seleccionar todos"}},o.getConstantFilters=function(){var e=null;return o.queryDetails&&o.queryDetails.constantFilters&&(e=o.queryDetails.constantFilters.getter?o.queryDetails.constantFilters.getter():o.queryDetails.constantFilters),e},o.$onInit=function(){o.collection.get()?o.items=o.collection.get():o.isMultipleDisplay.get()?(o.parameters={displayProperties:o.componentConstruction.displayProperties,actionSuccess:function(e){o.items=e},actionError:o.queryDetails.actionError,filters:o.getConstantFilters()},o.queryDetails.resource.getEnumerationBindMultiDisplay(o.parameters)):o.queryDetails.resource.getEnumerationBind(o.componentConstruction.displayPropertyName,function(e){o.items=e},void 0,o.getConstantFilters()),o.componentBindingOut={selectedEntity:{get:function(){return o.currentEntity||o.getValue()}}},o.init&&o.init(),o.selectedAll=!1},o.getDisplayValue=function(){if(o.isMultiple.get()){if(o.valueModel&&o.items&&0<o.items.length){var n="";if(o.valueModel.forEach(function(t,e){n+=o.items.filter(function(e){return e.Value==t})[0].Display+(e<o.valueModel.length-1?", ":"")}),n)return n}}else if(o.valueModel&&o.items&&0<o.items.length&&(n=o.items.filter(function(e){return e.Value==o.valueModel})[0]))return n.Display;return o.nullValueLabel.get()},o.getValue=function(){if(o.valueModel&&o.items&&0<o.items.length){var e=o.items.filter(function(e){return e.Value==o.valueModel})[0];if(e)return e}return null},o.runOnChangeTrigger=function(){o.currentEntity=o.items.filter(function(e){return e.Value==o.valueModel})[0],o.onChange&&o.onChange({oldValue:o.valueModel,newValue:o.valueModel,entity:o.currentEntity})},o.cleanSearch=function(){o.searchText=""},o.selectAll=function(){o.selectedAll=!o.selectedAll,delete o.all,o.valueModel=[],o.selectedAll&&(o.items&&0<o.items.length&&o.items.forEach(function(e){return o.valueModel.push(e.Value)}),o.all=!0)}}e.$inject=["EntifixStringUtils"];var t={bindings:{valueModel:"=",showEditableFields:"=",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},template:'<div ng-class="{\'whirl double-up whirlback\': vm.isLoading.get()}" ng-if="!vm.isMultiple.get()">                         <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                         <div ng-if="vm.isForm.get()">                             <md-input-container ng-if="vm.canShowEditableFields.get()" class="entifix-select-width">                                 <label>{{vm.title.get()}}</label>                                 <md-select                                     ng-model="vm.valueModel"                                     ng-required="vm.isRequired.get()"                                     ng-change="vm.runOnChangeTrigger()"                                     name="{{vm.name.get()}}"                                     aria-label="{{vm.name.get()}}"                                     md-on-close="vm.cleanSearch()"                                     data-md-container-class="selectSelectHeader">                                     <md-select-header class="select-header">                                         <input type="search" ng-model="vm.searchText" placeholder="Buscar {{vm.title.get()}} ..." class="header-searchbox md-text" ng-keydown="$event.stopPropagation()"/>                                     </md-select-header>                                     <md-optgroup label={{vm.title.get()}}>                                         <md-option ng-if="vm.canShowNoneOption.get()" ng-value="undefined"><em>{{vm.noneLabel.get()}}</em></md-option>                                         <md-option ng-repeat="item in vm.items | filter:vm.searchText" ng-value="item.Value">{{item.Display}}</md-option>                                     </md-optgroup>                                 </md-select>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                 </div>                              </md-input-container>                             <div ng-if="!vm.canShowEditableFields.get()">                                 <label>{{vm.title.get()}}</label><br/>                                 <strong>{{vm.getDisplayValue()}}</strong>                             </div>                         </div>                         <div ng-if="!vm.isForm.get()">                             <md-input-container class="entifix-select-width">                                 <label>{{vm.title.get()}}</label>                                 <md-select                                     ng-model="vm.valueModel"                                     ng-required="vm.isRequired.get()"                                     ng-change="vm.runOnChangeTrigger()"                                     name="{{vm.name.get()}}"                                     aria-label="{{vm.name.get()}}"                                     md-on-close="vm.cleanSearch()"                                     data-md-container-class="selectSelectHeader">                                     <md-select-header class="select-header">                                         <input type="search" ng-model="vm.searchText" placeholder="Buscar {{vm.title.get()}} ..." class="header-searchbox md-text" ng-keydown="$event.stopPropagation()"/>                                     </md-select-header>                                     <md-optgroup label={{vm.title.get()}}>                                         <md-option ng-if="vm.canShowNoneOption.get()" ng-value="undefined"><em>{{vm.noneLabel.get()}}</em></md-option>                                         <md-option ng-repeat="item in vm.items | filter:vm.searchText" ng-value="item.Value">{{item.Display}}</md-option>                                     </md-optgroup>                                 </md-select>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                 </div>                             </md-input-container>                         </div>                     </div>                     <div ng-class="{\'whirl double-up whirlback\': vm.isLoading.get()}" ng-if="vm.isMultiple.get()">                         <md-tooltip ng-if="vm.tooltip.get()" md-direction="left">{{vm.tooltip.get()}}</md-tooltip>                         <div ng-if="vm.isForm.get()">                             <md-input-container ng-if="vm.canShowEditableFields.get()" class="entifix-select-width">                                 <label>{{vm.title.get()}}</label>                                 <md-select                                     ng-model="vm.valueModel"                                     ng-required="vm.isRequired.get()"                                     ng-change="vm.runOnChangeTrigger()"                                     name="{{vm.name.get()}}"                                     aria-label="{{vm.name.get()}}"                                     md-on-close="vm.cleanSearch()"                                     data-md-container-class="selectSelectHeader"                                     multiple="">                                     <md-select-header class="select-header">                                         <input type="search" ng-model="vm.searchText" placeholder="Buscar {{vm.title.get()}} ..." class="header-searchbox md-text" ng-keydown="$event.stopPropagation()"/><br/>                                     </md-select-header>                                     <md-select-header class="select-header">                                         <md-button layout-fill value="all" ng-click="vm.selectAll($event)" style="text-align: left;">{{vm.allLabel.get()}}</md-button>                                     </md-select-header>                                     <md-optgroup label={{vm.title.get()}}>                                         <md-option ng-if="vm.canShowNoneOption.get()" ng-value="undefined"><em>{{vm.noneLabel.get()}}</em></md-option>                                         <md-option ng-repeat="item in vm.items | filter:vm.searchText" ng-value="item.Value">{{item.Display}}</md-option>                                     </md-optgroup>                                 </md-select>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                     <div ng-message="md-multiple">{{vm.multipleMessage.get()}}</div>                                 </div>                              </md-input-container>                             <div ng-if="!vm.canShowEditableFields.get()">                                 <label>{{vm.title.get()}}</label><br/>                                 <strong>{{vm.getDisplayValue()}}</strong>                             </div>                         </div>                         <div ng-if="!vm.isForm.get()">                             <md-input-container class="entifix-select-width">                                 <label>{{vm.title.get()}}</label>                                 <md-select                                     ng-model="vm.valueModel"                                     ng-required="vm.isRequired.get()"                                     ng-change="vm.runOnChangeTrigger()"                                     name="{{vm.name.get()}}"                                     aria-label="{{vm.name.get()}}"                                     md-on-close="vm.cleanSearch()"                                     data-md-container-class="selectSelectHeader"                                     multiple="">                                     <md-select-header class="select-header">                                         <input type="search" ng-model="vm.searchText" placeholder="Buscar {{vm.title.get()}} ..." class="header-searchbox md-text" ng-keydown="$event.stopPropagation()"/><br/>                                     </md-select-header>                                     <md-select-header class="select-header">                                         <md-button layout-fill value="all" ng-click="vm.selectAll($event)" style="text-align: left;">{{vm.allLabel.get()}}</md-button>                                     </md-select-header>                                     <md-optgroup label={{vm.title.get()}}>                                         <md-option ng-if="vm.canShowNoneOption.get()" ng-value="undefined"><em>{{vm.noneLabel.get()}}</em></md-option>                                         <md-option ng-repeat="item in vm.items | filter:vm.searchText" ng-value="item.Value">{{item.Display}}</md-option>                                     </md-optgroup>                                 </md-select>                                 <div ng-messages="vm.canEvaluateErrors.get()" multiple>                                     <div ng-message="required">{{vm.requiredMessage.get()}}</div>                                     <div ng-message="md-multiple">{{vm.multipleMessage.get()}}</div>                                 </div>                             </md-input-container>                         </div>                     </div>',controller:e,controllerAs:"vm"};angular.module("entifix-js").component("entifixSelect",t)}(),function(){var e=angular.module("entifix-js");function t(t,c,e,n,o,i,r,a,s,u,l,m){var d,p,g=this,v=0,f=!0,C=!0,h=!0,y=l.xlsSheetResourceName.get()?new r(l.xlsSheetResourceName.get()):"",b=l.xlsSheetResourceName.get()?new r(l.pdfResourceName.get()):"";function x(){var e=t.CreateStringHtmlComponentAndBindings(g.componentConstruction,"bindCtrl.connectionComponent.objectBindings");g.stringhtmlcomponent=e.stringhtml,g.connectionComponent.objectBindings=e.objectbindings}function T(e,t,n){if(("date"==t||"datetime"==t||"time"==t)&&e){if(!(e instanceof Date))e=S(e);var o=e.getFullYear().toString(),i=(e.getMonth()+1).toString(),r=e.getDate().toString();if(i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),"datetime"==t||"time"==t){var c=e.getHours().toString(),a=e.getMinutes().toString(),s=e.getSeconds().toString();return c.length<2&&(c="0"+c),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),n?r+"-"+i+"-"+o+" "+c+":"+a+":"+s:o+"-"+i+"-"+r+" "+c+":"+a+":"+s}return n?r+"-"+i+"-"+o:o+"-"+i+"-"+r}return e}function S(e){return s.transformStringToDate(e)}function D(){return g.connectionComponent.pager.reload(),null}function w(){p&&(e.cancel(p),p=null)}function M(){g.resourceMembers.forEach(function(e){e.$selected?e.class="md-column sortable sort-descent":0==e.$selected?e.class="md-column sortable sort-ascent":e.class="md-column sortable"})}function E(e,t){g.searchArray.splice(t,1),0<g.searchArray.length&&0<g.textBoxSearchValueChips.length&&g.queryParams.get()?i.go(".",{customSearch:JSON.stringify(g.searchArray),chips:JSON.stringify(g.textBoxSearchValueChips)},{notify:!1}):g.queryParams.get()&&i.go(".",{customSearch:null,chips:null},{notify:!1}),null}function k(e,t,n){g.columnToSearch=null,g.operator=null,g.valueToSearch=null,g.textBoxSearchValue=null,null,e&&function(e){e?g.queryParams.get()&&i.go(".",{customSearch:null,chips:null,searchText:null},{notify:!1}):(g.searchArray=[],g.pager.page=1,g.queryParams.get()&&i.go(".",{customSearch:null,chips:null,page:g.pager.page},{notify:!1}));g.textBoxSearchValueChips=[]}(t),n&&function(){g.queryDetails.constantFilters&&(g.queryDetails.constantFilters.getter=function(){return[]});g.startDate=null,g.endDate=null,g.notApplied=!1,i.go(".",{customSearch:null,chips:null,searchText:null,page:g.pager.page,itemsPerPage:g.pager.size,startDate:null,endDate:null},{notify:!1})}()}function q(e){return e.display?e.display:e.name?(t=e.name).charAt(0).toUpperCase()+t.substring(1,t.length).toLowerCase():null;var t}g.isLoading={get:function(){return!(!g.queryDetails||!g.queryDetails.resource)&&g.queryDetails.resource.isLoading.get()}},g.isDeleting={get:function(){return!(!g.queryDetails||!g.queryDetails.resource)&&g.queryDetails.resource.isDeleting.get()}},g.total={get:function(){return 0}},g.title={get:function(){if(g.componentConstruction&&g.componentConstruction.title){if(g.componentConstruction.title.getter)return g.componentConstruction.title.getter();if(g.componentConstruction.title.text)return g.componentConstruction.title.text}return"Listado"}},g.icon={get:function(){return g.componentConstruction&&g.componentConstruction.title&&g.componentConstruction.title.icon?g.componentConstruction.title.icon:"menu"}},g.canSearch={get:function(){return!(!g.componentConstruction||!g.componentConstruction.search)}},g.searchIcon={get:function(){return g.componentConstruction&&g.componentConstruction.search&&g.componentConstruction.search.icon?g.componentConstruction.search.icon:"search"}},g.searchText={get:function(){return g.componentConstruction&&g.componentConstruction.search&&g.componentConstruction.search.text?""+g.componentConstruction.search.text:"Buscar"}},g.canShowSearchText={get:function(){return h},set:function(e){h=e}},g.canAdd={get:function(){return!(!g.componentConstruction||!g.componentConstruction.add)}},g.multipleAddOptions={get:function(){return!!(g.componentConstruction&&g.componentConstruction.add&&g.componentConstruction.add.options)}},g.addIcon={get:function(){return g.componentConstruction&&g.componentConstruction.add&&g.componentConstruction.add.icon?g.componentConstruction.add.icon:"add"}},g.addText={get:function(){return g.componentConstruction&&g.componentConstruction.add&&g.componentConstruction.add.text?g.componentConstruction.add.text:"Nuevo"}},g.canEdit={get:function(){if(g.componentConstruction&&1==g.connectionComponent.elementsSelection())if(g.componentConstruction.edit&&null!=g.componentConstruction.edit.enable){if(g.componentConstruction.edit.enable instanceof Object&&g.componentConstruction.edit.enable.getter)return g.componentConstruction.edit.enable.getter();if(null!=g.componentConstruction.edit.enable)return g.componentConstruction.edit.enable}else if(g.componentConstruction.edit)return!0;return!1}},g.multipleEditOptions={get:function(){return!!(g.componentConstruction&&g.componentConstruction.edit&&g.componentConstruction.edit.options)}},g.editIcon={get:function(){return g.componentConstruction&&g.componentConstruction.edit&&g.componentConstruction.edit.icon?g.componentConstruction.edit.icon:"visibility"}},g.editText={get:function(){return g.componentConstruction&&g.componentConstruction.edit&&g.componentConstruction.edit.text?g.componentConstruction.edit.text:"Detalle"}},g.canRemove={get:function(){return!!(g.componentConstruction&&g.componentConstruction.remove&&1<=g.connectionComponent.elementsSelection())}},g.multipleRemoveOptions={get:function(){return!!(g.componentConstruction&&g.componentConstruction.remove&&g.componentConstruction.remove.options)}},g.removeIcon={get:function(){return g.componentConstruction&&g.componentConstruction.remove&&g.componentConstruction.remove.icon?g.componentConstruction.remove.icon:"delete"}},g.removeText={get:function(){return g.componentConstruction&&g.componentConstruction.remove&&g.componentConstruction.remove.text?g.componentConstruction.remove.text:"Eliminar"}},g.xlsSheetIcon={get:function(){return g.componentConstruction&&g.componentConstruction.xlsSheetIcon&&g.componentConstruction.xlsSheetIcon.icon?g.componentConstruction.xlsSheetIcon.icon:"poll"}},g.xlsSheetText={get:function(){return g.componentConstruction&&g.componentConstruction.xlsSheetText&&g.componentConstruction.xlsSheetText.text?g.componentConstruction.xlsSheetText.text:"Descargar Excel"}},g.canDownloadXlsSheet={get:function(){return!g.componentConstruction||null==g.componentConstruction.canDownloadXlsSheet||g.componentConstruction.canDownloadXlsSheet}},g.pdfIcon={get:function(){return g.componentConstruction&&g.componentConstruction.pdfIcon&&g.componentConstruction.pdfIcon.icon?g.componentConstruction.pdfIcon.icon:"picture_as_pdf"}},g.pdfText={get:function(){return g.componentConstruction&&g.componentConstruction.pdfText&&g.componentConstruction.pdfText.text?g.componentConstruction.pdfText.text:"Descargar Pdf"}},g.canDownloadPdf={get:function(){return!g.componentConstruction||null==g.componentConstruction.canDownloadPdf||g.componentConstruction.canDownloadPdf}},g.allPagesText={get:function(){return g.componentConstruction&&g.componentConstruction.allPagesText&&g.componentConstruction.allPagesText.text?g.componentConstruction.allPagesText.text:"Descargar todas las páginas"}},g.currentPageText={get:function(){return g.componentConstruction&&g.componentConstruction.currentPageText&&g.componentConstruction.currentPageText.text?g.componentConstruction.currentPageText.text:"Descargar página actual"}},g.columnsText={get:function(){return g.componentConstruction&&g.componentConstruction.columnsText?g.componentConstruction.columnsText:"Columnas"}},g.customSearchText={get:function(){return g.componentConstruction&&g.componentConstruction.customSearchText?g.componentConstruction.customSearchText:"Búsqueda Avanzada"}},g.propertiesOperators={defaults:function(){return g.componentConstruction&&g.componentConstruction.defaultOperators?g.componentConstruction.defaultOperators:[{display:"Igual",operator:"="},{display:"Mayor que",operator:">"},{display:"Menor que",operator:"<"},{display:"Mayor o igual que",operator:">="},{display:"Menor o igual que",operator:"<="},{display:"Diferente",operator:"<>"},{display:"Incluya",operator:"lk"}]},strings:function(){return g.componentConstruction&&g.componentConstruction.stringOperators?g.componentConstruction.stringOperators:[{display:"Igual",operator:"="},{display:"Diferente",operator:"<>"},{display:"Incluya",operator:"lk"}]},numbers:function(){return g.componentConstruction&&g.componentConstruction.numberOperators?g.componentConstruction.numberOperators:[{display:"Igual",operator:"="},{display:"Mayor que",operator:">"},{display:"Menor que",operator:"<"},{display:"Mayor o igual que",operator:">="},{display:"Menor o igual que",operator:"<="},{display:"Diferente",operator:"<>"}]},booleans:function(){return g.componentConstruction&&g.componentConstruction.booleanOperators?g.componentConstruction.booleanOperators:[{display:"Igual",operator:"="},{display:"Diferente",operator:"<>"}]},enums:function(){return g.componentConstruction&&g.componentConstruction.enumOperators?g.componentConstruction.enumOperators:[{display:"Igual",operator:"="},{display:"Diferente",operator:"<>"}]}},g.operatorsText={get:function(){return g.componentConstruction&&g.componentConstruction.operatorsText?g.componentConstruction.operatorsText:"Operadores"}},g.valueToSearchText={get:function(){return g.componentConstruction&&g.componentConstruction.valueToSearchText?g.componentConstruction.valueToSearchText:"Valor"}},g.addFilterText={get:function(){return g.componentConstruction&&g.componentConstruction.addFilterText?g.componentConstruction.addFilterText:"Agregar"}},g.selectColumns={get:function(){return!g.componentConstruction||null==g.componentConstruction.selectColumns||g.componentConstruction.selectColumns}},g.queryParams={get:function(){return!g.componentConstruction||null==g.componentConstruction.queryParams||g.componentConstruction.queryParams}},g.isMovement={get:function(){return!(!g.componentConstruction||null==g.componentConstruction.isMovement)&&g.componentConstruction.isMovement}},g.startDateText={get:function(){return g.componentConstruction&&g.componentConstruction.startDateText?g.componentConstruction.startDateText:"Fecha Documento Del"}},g.startDateProperty={get:function(){return g.queryDetails&&g.queryDetails.resource&&g.queryDetails.resource.getStartDateProperty()?g.queryDetails.resource.getStartDateProperty():"fechaDocumento"}},g.endDateText={get:function(){return g.componentConstruction&&g.componentConstruction.endDateText?g.componentConstruction.endDateText:"Fecha Documento Al"}},g.endDateProperty={get:function(){return g.queryDetails&&g.queryDetails.resource&&g.queryDetails.resource.getEndDateProperty()?g.queryDetails.resource.getEndDateProperty():"fechaDocumento"}},g.notAppliedText={get:function(){return g.componentConstruction&&g.componentConstruction.notAppliedText?g.componentConstruction.notAppliedText:{basic:"Pendientes",extended:"Mostrar únicamente registros pendientes"}}},g.notApplyProperty={get:function(){return g.queryDetails&&g.queryDetails.resource&&g.queryDetails.resource.getNotApplyProperty()?g.queryDetails.resource.getNotApplyProperty():"estado"}},g.notApplyValue={get:function(){return g.componentConstruction&&g.componentConstruction.notApplyValue?g.componentConstruction.notApplyValue:"REGISTRADO"}},g.selectAllText={get:function(){return g.componentConstruction&&g.componentConstruction.selectAllText?g.componentConstruction.selectAllText:"Seleccionar todos"}},g.pagerConfiguration={get:function(){return g.componentConstruction&&g.componentConstruction.pagerConfiguration?g.componentConstruction.pagerConfiguration:null}},g.blockTableOnChangeView={get:function(){return!(!g.componentConstruction||!g.componentConstruction.blockTableOnChangeView)&&g.componentConstruction.blockTableOnChangeView}},g.allowCustomSearch={get:function(){return!g.componentConstruction||null==g.componentConstruction.allowCustomSearch||g.componentConstruction.allowCustomSearch}},g.hasPermissions={get:function(){return!(!g.componentConstruction||null==g.componentConstruction.permissions)}},g.hasAllPermission={get:function(){return!(null==g.componentConstruction.permissions.all||!u.checkPermissions(g.componentConstruction.permissions.all))}},g.hasAddPermission={get:function(){return!(g.componentConstruction.permissions.add&&(null==g.componentConstruction.permissions.add||!u.checkPermissions(g.componentConstruction.permissions.add)))}},g.hasEditPermission={get:function(){return!(g.componentConstruction.permissions.edit&&(null==g.componentConstruction.permissions.edit||!u.checkPermissions(g.componentConstruction.permissions.edit)))}},g.hasRemovePermission={get:function(){return!(g.componentConstruction.permissions.remove&&(null==g.componentConstruction.permissions.remove||!u.checkPermissions(g.componentConstruction.permissions.remove)))}},g.hasXlsSheetPermission={get:function(){return!(g.componentConstruction.permissions.xlsSheet&&(null==g.componentConstruction.permissions.xlsSheet||!u.checkPermissions(g.componentConstruction.permissions.xlsSheet)))}},g.hasPdfPermission={get:function(){return!(g.componentConstruction.permissions.pdf&&(null==g.componentConstruction.permissions.pdf||!u.checkPermissions(g.componentConstruction.permissions.pdf)))}},g.$onInit=function(){g.searchArray=[],g.resourceMembers=[],g.columnsSelected=[],g.resourceMembers=g.queryDetails.resource.getMembersResource.get().filter(function(e){return!e.hidden}),g.resourceMembers.forEach(function(e){e.type?e.type:e.type="text",e.display?e.display:e.display=q(e),e.default&&"false"!=e.default&&g.columnsSelected.push(q(e))}),g.operators=g.propertiesOperators.defaults(),M(),g.customSearchCC={title:{text:g.customSearchText.get()},tooltip:{text:g.customSearchText.get()},isSwitch:!0,isForm:!1,includeValue:!1},g.valueToSearchCC={title:{text:g.valueToSearchText.get()},hasTime:!1,hasMinutes:!1,isForm:!1,mapping:{method:function(e){return e.label}},collection:{elements:[{Display:"Si",Value:"true"},{Display:"No",Value:"false"}]}},g.valueToSearchDTCC={title:{text:g.valueToSearchText.get()},isForm:!1},g.valueToSearchTCC={title:{text:g.valueToSearchText.get()},isForm:!1,hasDate:!1},g.valueToSearchQD={title:{text:g.valueToSearchText.get()},isForm:!1},g.chipsCC={isForm:!1,transformChip:g.transformchip,readOnly:!0,onRemove:E},g.startDateCC={title:{text:g.startDateText.get()},isForm:!1,hasMinutes:!1,hasTime:!1},g.endDateCC={title:{text:g.endDateText.get()},isForm:!1,hasMinutes:!1,hasTime:!1},g.notAppliedCC={title:{text:g.notAppliedText.get().basic},tooltip:{text:g.notAppliedText.get().extended},isSwitch:!0,isForm:!1,includeValue:!1},g.isMovement.get()&&!g.queryDetails.constantFilters&&(g.queryDetails.constantFilters={},g.queryDetails.constantFilters.getter=function(){return[]}),g.connectionComponent={},g.pager=new n(g.queryDetails,g.pagerConfiguration.get(),g.componentConstruction.transformData?g.componentConstruction.transformData.columns:[]),g.pager.searchTextGetter.set(function(){return g.canShowSearchText.get()&&g.textBoxSearchValue&&0<g.textBoxSearchValue.length?g.textBoxSearchValue:null}),g.pager.searchArrayGetter.set(function(){return g.canShowSearchText.get()&&g.searchArray&&0<g.searchArray.length?g.searchArray:null}),g.pager.columnsSelectedGetter.set(function(){return g.columnsSelected&&0<g.columnsSelected.length?g.columnsSelected:null}),g.connectionComponent.pager=g.pager,g.connectionComponent.resourceMembers={get:function(){return g.resourceMembers}},g.connectionComponent.onChangePageSize=g.onChangePageSize,g.connectionComponent.elementsSelection=function(){return null!=g.connectionComponent.pager&&null!=g.connectionComponent.pager.currentData&&0<g.connectionComponent.pager.currentData.length?g.connectionComponent.pager.currentData.filter(function(e){return 1==e.$selected}).length:0},g.connectionComponent.getSelectedElements=function(){return null!=g.connectionComponent.pager&&null!=g.connectionComponent.pager.currentData?g.connectionComponent.pager.currentData.filter(function(e){return 1==e.$selected}):[]},g.connectionComponent.sortTable=function(t){t.$selected?t.$selected=!1:t.$selected=!0,g.resourceMembers.filter(function(e){return e.display!=t.display}).forEach(function(e){e.$selected=null}),M(),g.connectionComponent.pager.sortTableColumns.set([{sort:t.pageProperty||t.name,value:t.$selected?"asc":"desc"}]),g.connectionComponent.pager.reload()},g.connectionComponent.singleElementSelection=function(t,e){g.connectionComponent.allowSelection()&&(1<g.connectionComponent.elementsSelection()||e?t.$selected=!0:t.$selected=!t.$selected,g.connectionComponent.pager.currentData.filter(function(e){return e!=t}).forEach(function(e){e.$selected=!1}),t.$selected?g.connectionComponent.selectedElement=t:g.connectionComponent.selectedElement=null,g.connectionComponent.onChangeElementsSelection())},g.connectionComponent.multipleElementsSelection=function(e){if(g.connectionComponent.allowSelection()){if(e.$selected=!e.$selected,e.$selected)g.connectionComponent.selectedElement=e;else{var t=g.connectionComponent.pager.currentData.filter(function(e){return!0===e.$selected});0<t.length?g.connectionComponent.selectedElement=t[0]:g.connectionComponent.selectedElement=null}g.connectionComponent.onChangeElementsSelection()}},g.connectionComponent.directEditionElement=function(e){g.componentConstruction.edit&&(g.blockTableOnChangeView.get()&&(g.isChangingView=!0),g.connectionComponent.singleElementSelection(e,!0),g.editElement())},g.connectionComponent.checkAll=function(e){e&&g.connectionComponent.pager.currentData?g.connectionComponent.pager.currentData.forEach(function(e){e.$selected=!0}):g.connectionComponent.pager.currentData&&g.connectionComponent.pager.currentData.forEach(function(e){e.$selected=!1})},g.connectionComponent.showColumn=function(t){var e=g.columnsSelected.filter(function(e){return e==t});return!!(e&&0<e.length)},g.connectionComponent.onChangeElementsSelection=function(){},g.connectionComponent.allowSelection=function(){return!0},g.connectionComponent.transformValue=function(e,t){if(null!=e&&g.componentConstruction&&g.componentConstruction.transformData){var n=g.componentConstruction.transformData.columns.filter(function(e){return e.property==t})[0];if("date"===n.type||"datetime"===n.type||"time"===n.type)return T(e,n.type,!0);if("entity"===n.type&&d&&0<d.length){var o=d.filter(function(e){return e.propertyName==t});if(0<o.length){var i=o[0].enumResult;if(i&&0<i.length){var r=e;e instanceof Object&&(r=n.resource.getId(e));var c=i.filter(function(e){return e.Value==r});if(0<c.length)return c[0].Display}}}if("boolean"==n.type)return e?"Si":"No"}},function(){o.page&&g.queryParams.get()&&(g.pager.page=o.page);o.itemsPerPage&&g.queryParams.get()&&(g.pager.size=o.itemsPerPage);o.searchText&&g.queryParams.get()&&(g.textBoxSearchValue=o.searchText,g.onChangeSearch());o.customSearch&&g.queryParams.get()?(g.customSearch=!0,g.searchArray=JSON.parse(o.customSearch),g.textBoxSearchValueChips=JSON.parse(o.chips)):g.customSearch=!1;o.startDate&&g.queryParams.get()&&(g.startDate=S(o.startDate));o.endDate&&g.queryParams.get()&&(g.endDate=S(o.endDate));(g.startDate||g.endDate)&&g.searchItemsDate(!0)}(),g.hasPermissions.get()&&(g.hasAllPermission.get()||(g.hasAddPermission.get()||delete g.componentConstruction.add,g.hasEditPermission.get()||delete g.componentConstruction.edit,g.hasRemovePermission.get()||delete g.componentConstruction.remove,g.hasXlsSheetPermission.get()||(g.componentConstruction.canDownloadXlsSheet=!1),g.hasPdfPermission.get()||(g.componentConstruction.canDownloadPdf=!1))),function(){g.componentConstruction&&x();g.componentBehavior&&(g.connectionComponent.showMultiselectColumn=g.componentBehavior.showMultiselectColumn||!1,g.collapsed=g.componentBehavior.initCollapsed||!1);g.connectionComponent.pager.reload()}(),g.componentBindingOut={pager:g.pager,recreateDynamicComponent:x,reloadPagination:function(){g.pager.isLoading.get()||g.pager.reload()},allowedActions:{canEdit:g.canEdit,canRemove:g.canRemove,canAdd:g.canAdd},cleanFilters:function(){g.cleanFilters()},reloadComponent:g.$onInit}},g.searchElement=function(){g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onSearch&&g.componentBehavior.events.onSearch(),g.componentConstruction.search.customAction?g.componentConstruction.search.customAction():(h=!h)||(g.textBoxSearchValue=null,w(),D()),g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onSearched&&g.componentBehavior.events.onSearched()},g.addElement=function(){g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onAdd&&g.componentBehavior.events.onAdd(),g.componentConstruction.add.customAction&&g.componentConstruction.add.customAction(),g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onAdded&&g.componentBehavior.events.onAdded()},g.editElement=function(){var e=g.connectionComponent.selectedElement;g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onEdit&&g.componentBehavior.events.onEdit(),g.componentConstruction.edit.customAction&&g.componentConstruction.edit.customAction(e),g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onEdited&&g.componentBehavior.events.onEdited()},g.removeElement=function(){var e=g.connectionComponent.getSelectedElements();g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onRemove&&g.componentBehavior.events.onRemove(),g.componentConstruction.remove.customAction?g.componentConstruction.remove.customAction(e):function(){var e="¿Está seguro de elminar el registro seleccionado?";1<g.connectionComponent.elementsSelection()&&(e="¿Está seguro de eliminar todos los registros seleccionados?");c.confirm({body:e,header:"Confirmación requerida",actionConfirm:function(){var e=g.connectionComponent.getSelectedElements(),n=g.connectionComponent.elementsSelection(),o=0,i=0,r=function(e,t){t?i++:o++,n<=i+o&&(0==i?1==n?c.success({body:"Registro eliminado exitosamente."}):c.success({body:"Todos los registros fueron eliminados exitosamente."}):1==n?c.error({body:"El registro no pudo ser eliminado. "+e.data.message}):c.error({body:"Algunos registros no pudieron ser eliminados."}),g.connectionComponent.pager.reload(),g.queryDetails.resource.onMultipleDeletion.set(!1))};1<e.length&&g.queryDetails.resource.onMultipleDeletion.set(!0),g.connectionComponent.getSelectedElements().forEach(function(e){g.queryDetails.resource.deleteEntity(e,function(e,t){r(e,t)},function(){r(response,isError)})})}})}(),g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onRemoved&&g.componentBehavior.events.onRemoved()},g.processElement=function(){var e=g.connectionComponent.selectedElement;g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onProcess&&g.componentBehavior.events.onProcess(),g.componentConstruction.process.customAction&&g.componentConstruction.process.customAction(e),g.componentBehavior&&g.componentBehavior.events&&g.componentBehavior.events.onProcessed&&g.componentBehavior.events.onProcessed()},g.keypressTextBoxSearch=function(e){w(),13===e.which&&D()},g.onChangeSearch=function(){w(),p=e(D,1500),g.pager.page=1,null,g.queryParams.get()&&i.go(".",{searchText:g.textBoxSearchValue,page:1},{notify:!1})},g.onChangeColumn=function(){g.valueToSearch=null,g.columnToSearch&&(g.columnToSearch.property&&g.columnToSearch.property.resource&&(g.valueToSearchQD={resource:new r(g.columnToSearch.property.resource)}),"text"==g.columnToSearch.type?g.operators=g.propertiesOperators.strings():"number"==g.columnToSearch.type?g.operators=g.propertiesOperators.numbers():"enum"==g.columnToSearch.type?g.operators=g.propertiesOperators.enums():"boolean"==g.columnToSearch.type?g.operators=g.propertiesOperators.booleans():g.operators=g.propertiesOperators.defaults())},g.onChangeSwitch=function(e){k(!0,e),g.connectionComponent.pager.reload()},g.onChangePageSize=function(e){g.pager.totalData<g.pager.size?(g.pager.page=1,g.queryParams.get()&&i.go(".",{itemsPerPage:g.pager.size,page:1},{notify:!1})):g.queryParams.get()&&i.go(".",{itemsPerPage:g.pager.size},{notify:!1}),e?(g.pager.size=e,g.pager.reload()):C?C=!1:g.pager.reload()},g.onChangePage=function(){g.pager.reload(),g.queryParams.get()&&i.go(".",{page:g.pager.page},{notify:!1})},g.addChip=function(){g.columnToSearch.display&&g.operator.operator&&g.valueToSearch&&(g.valueToSearch=T(g.valueToSearch,g.columnToSearch.type),g.textBoxSearchValueChips.push(g.columnToSearch.display+" "+g.operator.operator+" "+g.valueToSearch),g.searchArray.push({property:g.columnToSearch.pageProperty||g.columnToSearch.name,operator:g.operator.operator,value:g.valueToSearch})),k(),g.pager.page=1,g.queryParams.get()&&i.go(".",{customSearch:JSON.stringify(g.searchArray),chips:JSON.stringify(g.textBoxSearchValueChips),page:g.pager.page},{notify:!1})},g.cleanFilters=function(){k(!0,!1,!0),g.connectionComponent.pager.reload()},g.searchItemsDate=function(e){g.queryDetails.constantFilters.getter=function(){return[{property:g.startDateProperty.get(),value:T(g.startDate,"datetime"),operator:">=",type:"fixed_filter"},{property:g.endDateProperty.get(),value:T(g.endDate,"datetime"),operator:"<=",type:"fixed_filter"}]},e||g.connectionComponent.pager.reload()},g.onChangeDateStart=function(e){i.go(".",{startDate:T(g.startDate,"datetime")},{notify:!1})},g.onChangeDateEnd=function(e){i.go(".",{endDate:T(g.endDate,"datetime")},{notify:!1})},g.onChangeNotApplied=function(e){g.queryDetails.constantFilters={};var t=[];e&&t.push({property:g.notApplyProperty.get(),value:g.notApplyValue.get(),type:"fixed_filter"}),g.startDate&&g.endDate&&t.push({property:g.startDateProperty.get(),value:T(g.startDate,"datetime"),type:"fixed_filter",operator:">="},{property:g.endDateProperty.get(),value:T(g.endDate,"datetime"),type:"fixed_filter",operator:"<="}),g.queryDetails.constantFilters.getter=function(){return t},g.connectionComponent.pager.reload()},g.selectAllItems=function(){f=!1,v%2==0?(g.columnsSelected=[],g.resourceMembers.forEach(function(e){g.columnsSelected.push(q(e))})):(g.columnsSelected=[],g.resourceMembers.forEach(function(e){e.default&&"false"!=e.default&&g.columnsSelected.push(q(e))})),v++},g.reloadAllSelected=function(){if(f||v%2==0){if(!f){var e=g.columnsSelected.indexOf(g.selectAllText.get());0<e&&g.columnsSelected.splice(e,1)}}else g.columnsSelected.push(g.selectAllText.get())},g.openXlsSheetMenu=function(e,t){t,e.open(t)},g.openPdfMenu=function(e,t){t,e.open(t)},g.downloadFileSimplePage=function(t){(new m).chooseDownloadReportSettings(function(e){g.downloadFileSimplePageResource(t,e)})},g.downloadFileSimplePageResource=function(e,t){var n,o={type:e,requestType:"simple-page",data:g.connectionComponent.pager.currentData,title:g.queryDetails.resource.resourceName.get(),fileName:g.queryDetails.resource.resourceName.get()+" "+(new Date).toLocaleString(),pageSize:t.pageSize||"Letter",tableStriped:null==t.tableStriped||t.tableStriped,pageOrientation:t.pageOrientation||"Landscape"};switch(e){case"pdf":o.contentType="application/pdf",o.columns=(n=[],g.columnsSelected.forEach(function(t){return g.resourceMembers.forEach(function(e){(e.display||q(e.name))==t&&n.push(e)})}),n),b.getFile(o);break;case"xls":o.contentType="application/vnd.ms-excel",o.columns=g.resourceMembers,y.getFile(o)}},g.downloadFileAllPages=function(t){(new m).chooseDownloadReportSettings(function(e){g.downloadFileAllPagesResource(t,e)})},g.downloadFileAllPagesResource=function(e,t){var n={type:e,requestType:"all-pages",searchText:g.textBoxSearchValue,searchArray:g.searchArray,columnsSelected:g.columnsSelected,constantFilters:g.getConstantFilters(),title:g.queryDetails.resource.resourceName.get(),fileName:g.queryDetails.resource.resourceName.get()+" "+(new Date).toLocaleString(),headers:{"X-Requested-Type":e,"X-Page-Size":t.pageSize||"Letter","X-Table-Striped":null==t.tableStriped||t.tableStriped,"X-Page-Orientation":t.pageOrientation||"Landscape"}};switch(e){case"pdf":n.contentType="application/pdf";break;case"xls":n.contentType="application/vnd.ms-excel"}g.queryDetails.resource.getFile(n)},g.getConstantFilters=function(){var e=[];return g.pager.getConstantFilters()&&(e=e.concat(g.pager.getConstantFilters())),g.queryDetails.sort&&(e=e.concat(g.queryDetails.sort)),e}}t.$inject=["BaseComponentFunctions","EntifixNotification","$timeout","EntifixPager","$stateParams","$state","EntifixResource","$mdMenu","EntifixDateGenerator","EntifixSession","EntifixConfig","EntifixDownloadReportSettings"];var n={template:'<br/>                     <div ng-class="{\'whirl double-up whirlback\': bindCtrl.isChangingView}">                         <md-card md-whiteframe="4" ng-if="bindCtrl.canSearch.get()" layout-padding layout="column">                             <div ng-if="bindCtrl.isMovement.get()">                                 <div layout-xs="column" layout-gt-xs="column" layout-gt-sm="row" flex>                                     <div layout-xs="column" layout-gt-xs="row" flex>                                         <div flex>                                             <entifix-date-time-picker value-model="bindCtrl.startDate" component-construction="bindCtrl.startDateCC" on-change="bindCtrl.onChangeDateStart(value)"></entifix-date-time-picker>                                         </div>                                         <div flex>                                             <entifix-date-time-picker value-model="bindCtrl.endDate" component-construction="bindCtrl.endDateCC" on-change="bindCtrl.onChangeDateEnd(value)"></entifix-date-time-picker>                                         </div>                                     </div>                                     <div layout-xs="column" layout-gt-xs="row" flex>                                         <div flex layout layout-align="center center">                                             <md-button class="md-primary text-success" ng-click="bindCtrl.searchItemsDate()" ng-disabled="!bindCtrl.startDate || !bindCtrl.endDate">                                                 <md-icon class="material-icons">{{bindCtrl.searchIcon.get()}}</md-icon> &nbsp;{{bindCtrl.searchText.get()}}                                             </md-button>                                         </div>                                         <div flex layout layout-align="center center">                                             <entifix-checkbox-switch value-model="bindCtrl.notApplied" component-construction="bindCtrl.notAppliedCC" on-change="bindCtrl.onChangeNotApplied(value)"></entifix-checkbox-switch>                                         </div>                                     </div>                                 </div>                             </div>                             <div layout-xs="column" layout-gt-xs="column" layout-gt-sm="row" flex ng-if="bindCtrl.customSearch">                                 <div layout-xs="column" layout-gt-xs="row" flex>                                     <div flex>                                         <md-input-container class="md-block">                                             <label>{{bindCtrl.columnsText.get()}}</label>                                             <md-select                                                 ng-model="bindCtrl.columnToSearch"                                                 aria-label="{{bindCtrl.columnsText.get()}}"                                                 ng-change="bindCtrl.onChangeColumn()">                                                 <md-option ng-repeat="item in bindCtrl.resourceMembers" ng-value="item">{{item.display}}</md-option>                                             </md-select>                                         </md-input-container>                                     </div>                                     <div flex>                                         <md-input-container class="md-block">                                             <label>{{bindCtrl.operatorsText.get()}}</label>                                             <md-select                                                 ng-model="bindCtrl.operator"                                                 aria-label="{{bindCtrl.operatorsText.get()}}">                                                 <md-option ng-repeat="item in bindCtrl.operators" ng-value="item">{{item.display}}</md-option>                                             </md-select>                                         </md-input-container>                                     </div>                                 </div>                                 <div layout-sm="column" layout-gt-sm="row" flex>                                     <div flex>                                         <div ng-if="!bindCtrl.columnToSearch || bindCtrl.columnToSearch.type == \'text\' || bindCtrl.columnToSearch.type == \'entity\' || bindCtrl.columnToSearch.type == \'number\'" flex>                                             <entifix-input value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchCC"></entifix-input>                                         </div>                                         <div ng-if="bindCtrl.columnToSearch.type == \'date\'" flex>                                             <entifix-date-time-picker value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchCC"></entifix-date-time-picker>                                         </div>                                         <div ng-if="bindCtrl.columnToSearch.type == \'datetime\'" flex>                                             <entifix-date-time-picker value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchDTCC"></entifix-date-time-picker>                                         </div>                                         <div ng-if="bindCtrl.columnToSearch.type == \'time\'" flex>                                             <entifix-date-time-picker value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchTCC"></entifix-date-time-picker>                                         </div>                                         <div ng-if="bindCtrl.columnToSearch.type == \'enum\'" flex>                                             <entifix-autocomplete value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchCC" query-details="bindCtrl.valueToSearchQD" component-binding-out="bindCtrl.valueToSearchE"></entifix-autocomplete>                                         </div>                                         <div ng-if="bindCtrl.columnToSearch.type == \'boolean\'" flex>                                             <entifix-select value-model="bindCtrl.valueToSearch" component-construction="bindCtrl.valueToSearchCC" component-binding-out="bindCtrl.valueToSearchE"></entifix-select>                                         </div>                                     </div>                                     <div flex layout layout-align="center center">                                         <md-button class="md-primary text-success" ng-click="bindCtrl.addChip()" ng-disabled="!bindCtrl.columnToSearch || !bindCtrl.operator || !bindCtrl.valueToSearch">                                             <md-icon class="material-icons">{{bindCtrl.searchIcon.get()}}</md-icon> &nbsp;{{bindCtrl.addFilterText.get()}}                                         </md-button>                                     </div>                                 </div>                             </div>                             <div layout-xs="column" layout-gt-xs="column" layout-gt-sm="row" flex>                                 <div layout-xs="column" layout-gt-xs="row" flex-xs="100" flex-gt-sm="75">                                     <div flex ng-if="!bindCtrl.customSearch">                                         <md-input-container class="md-block">                                             <label>{{bindCtrl.searchText.get()}}</label>                                             <input type="text" ng-model="bindCtrl.textBoxSearchValue" ng-keypress="bindCtrl.keypressTextBoxSearch($event)" ng-change="bindCtrl.onChangeSearch()">                                         </md-input-container>                                     </div>                                     <div flex ng-if="bindCtrl.customSearch">                                         <entifix-chip value-model="bindCtrl.textBoxSearchValueChips" component-construction="bindCtrl.chipsCC"></entifix-chip>                                     </div>                                 </div>                                 <div layout-xs="column" layout-gt-xs="row" flex-xs="100" flex-gt-sm="25" ng-if="bindCtrl.allowCustomSearch.get()">                                     <div flex layout layout-align="center center">                                         <div flex layout layout-align="center center">                                             <entifix-checkbox-switch value-model="bindCtrl.customSearch" component-construction="bindCtrl.customSearchCC" on-change="bindCtrl.onChangeSwitch(v)"></entifix-checkbox-switch>                                         </div>                                     </div>                                 </div>                             </div>                         </md-card>                         <div layout="column">                             <md-card md-whiteframe="4">                                 <md-content layout-padding>                                     <div layout="column">                                         <div flex layout-align="end center">                                             <section layout-xs="column" layout="row" layout-align="end center">                                                 <div>                                                     <md-button class="md-primary text-success" ng-click="bindCtrl.addElement()" ng-disabled="!(bindCtrl.canAdd.get() && !bindCtrl.multipleAddOptions.get())" ng-if="bindCtrl.componentConstruction.add">                                                         <md-icon class="material-icons">{{bindCtrl.addIcon.get()}}</md-icon> &nbsp;{{bindCtrl.addText.get()}}                                                     </md-button>                                                     <md-button class="md-warn text-danger" ng-click="bindCtrl.removeElement()" ng-disabled="!(bindCtrl.canRemove.get() && !bindCtrl.multipleRemoveOptions.get())"  ng-if="bindCtrl.componentConstruction.remove">                                                         <md-icon class="material-icons">{{bindCtrl.removeIcon.get()}}</md-icon> &nbsp;{{bindCtrl.removeText.get()}}                                                     </md-button>                                                     <md-button class="md-accent text-warning" ng-click="bindCtrl.editElement()" ng-disabled="!(bindCtrl.canEdit.get() && !bindCtrl.multipleEditOptions.get())" ng-if="bindCtrl.componentConstruction.edit">                                                         <md-icon class="material-icons">{{bindCtrl.editIcon.get()}}</md-icon> &nbsp;{{bindCtrl.editText.get()}}                                                     </md-button>                                                     <md-menu md-position-mode="target-right target" ng-click="bindCtrl.openXlsSheetMenu($mdMenu, $event)" ng-if="bindCtrl.canDownloadXlsSheet.get()">                                                         <md-button class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.ds()">                                                             <md-tooltip>{{bindCtrl.xlsSheetText.get()}}</md-tooltip>                                                             <md-icon class="material-icons">{{bindCtrl.xlsSheetIcon.get()}}</md-icon>                                                         </md-button>                                                         <md-menu-content>                                                             <md-menu-item>                                                                 <md-button aria-label="" ng-click="bindCtrl.downloadFileAllPages(\'xls\')">                                                                     <md-tooltip>{{bindCtrl.allPagesText.get()}}</md-tooltip>                                                                     <md-icon class="material-icons">filter_none</md-icon>{{bindCtrl.allPagesText.get()}}                                                                 </md-button>                                                             </md-menu-item>                                                             <md-menu-divider></md-menu-divider>                                                             <md-menu-item>                                                                 <md-button aria-label="" ng-click="bindCtrl.downloadFileSimplePage(\'xls\')">                                                                     <md-tooltip>{{bindCtrl.currentPageText.get()}}</md-tooltip>                                                                     <md-icon class="material-icons">filter_1</md-icon>{{bindCtrl.currentPageText.get()}}                                                                 </md-button>                                                             </md-menu-item>                                                         </md-menu-content>                                                     </md-menu>                                                     <md-menu md-position-mode="target-right target" ng-click="bindCtrl.openPdfMenu($mdMenu, $event)" ng-if="bindCtrl.canDownloadPdf.get()">                                                         <md-button class="md-primary md-warn text-danger md-fab md-mini" ng-click="bindCtrl.ds()">                                                             <md-tooltip>{{bindCtrl.pdfText.get()}}</md-tooltip>                                                             <md-icon class="material-icons">{{bindCtrl.pdfIcon.get()}}</md-icon>                                                         </md-button>                                                         <md-menu-content>                                                             <md-menu-item>                                                                 <md-button aria-label="" ng-click="bindCtrl.downloadFileAllPages(\'pdf\')">                                                                     <md-tooltip>{{bindCtrl.allPagesText.get()}}</md-tooltip>                                                                     <md-icon class="material-icons">filter_none</md-icon>{{bindCtrl.allPagesText.get()}}                                                                 </md-button>                                                             </md-menu-item>                                                             <md-menu-divider></md-menu-divider>                                                             <md-menu-item>                                                                 <md-button aria-label="" ng-click="bindCtrl.downloadFileSimplePage(\'pdf\')()">                                                                     <md-tooltip>{{bindCtrl.currentPageText.get()}}</md-tooltip>                                                                     <md-icon class="material-icons">filter_1</md-icon>{{bindCtrl.currentPageText.get()}}                                                                 </md-button>                                                             </md-menu-item>                                                         </md-menu-content>                                                     </md-menu>                                                 </div>                                             </section>                                         </div>                                         <div class="md-table-head" layout>                                             <div flex flex-gt-md="65" layout layout-align="start center" ng-if="bindCtrl.selectColumns.get()">                                                 <md-input-container>                                                     <label>{{bindCtrl.columnsText.get()}}</label>                                                     <md-select                                                         ng-model="bindCtrl.columnsSelected"                                                         multiple                                                         aria-label="{{bindCtrl.columnsText.get()}}"                                                         ng-change="bindCtrl.reloadAllSelected()">                                                         <md-option ng-click="bindCtrl.selectAllItems()">{{bindCtrl.selectAllText.get()}}</md-option>                                                         <md-option ng-repeat="item in bindCtrl.resourceMembers">{{item.display}}</md-option>                                                     </md-select>                                                 </md-input-container>                                             </div>                                             <div flex layout layout-align="end center">                                                 <md-input-container ng-show="bindCtrl.pager.showPageControls.get()">                                                     <md-select                                                         ng-model="bindCtrl.pager.size"                                                         ng-change="bindCtrl.onChangePageSize()"                                                         aria-label="Page Controls">                                                         <md-option ng-repeat="optionSize in bindCtrl.pager.pageSizes" ng-value="optionSize">{{optionSize}}</md-option>                                                     </md-select>                                                 </md-input-container>                                             </div>                                         </div>                                         <div class="md-table-container">                                             <div compile="bindCtrl.stringhtmlcomponent"></div>                                         </div>                                         <br/>                                         <div layout-xs="column" layout-md="row" layout-lg="row" layout-xl="row">                                             <div flex flex-md="35" flex-md="35" flex-lg="30" flex-xl="35">                                                 <h5>{{bindCtrl.pager.getDescriptionText()}}</h5>                                             </div>                                             <div flex layout layout-align="end center">                                                 <grid-pagination                                                     max-size="10"                                                     boundary-links="true"                                                     class="pagination mdl-shadow--2dp"                                                     ng-if="bindCtrl.pager.totalData > bindCtrl.pager.size"                                                     total-items="bindCtrl.pager.totalData"                                                     ng-model="bindCtrl.pager.page"                                                     ng-change="bindCtrl.onChangePage()"                                                     items-per-page="bindCtrl.pager.size">                                                 </grid-pagination>                                             </div>                                         </div>                                     </div>                                 </md-content>                             </md-card>                         </div>                     </div>',controller:t,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",componentBehavior:"<",componentBindingOut:"=",queryDetails:"="}};e.component("entifixTable",n)}(),function(){function e(e,t){var n=this;n.cancel=function(){e.cancel(n.entity)},n.ok=function(){null!=n.entity.tableStriped&&null!=n.entity.pageSize&&null!=n.entity.pageOrientation?e.hide(n.entity):t.error({body:"Por favor, seleccione todas las opciones.",isToast:!0})},n.header="Configuración del reporte",n.entity={},n.entity.tableStriped=!0,n.entity.pageSize="Letter",n.entity.pageOrientation="Landscape",n.tableStripedComponentConstruction={title:{text:"Tabla Rayada"},isSwitch:!0},n.pageSizeComponentConstruction={title:{text:"Tamaño de la hoja"},collection:{elements:[{Display:"Letter",Value:"Letter"},{Display:"Legal",Value:"Legal"},{Display:"A0",Value:"A0"},{Display:"A1",Value:"A1"},{Display:"A2",Value:"A2"},{Display:"A3",Value:"A3"},{Display:"A4",Value:"A4"}]}},n.pageOrientationComponentConstruction={title:{text:"Orientación de la hoja"},collection:{elements:[{Display:"Landscape",Value:"Landscape"},{Display:"Portrait",Value:"Portrait"}]}}}function t(e){return function(){this.chooseDownloadReportSettings=function(t,n){e.show({template:'<md-dialog aria-label="Configuración del reporte" class="md-sm">                                                     <md-toolbar md-colors="{background: \'default-primary-100\'}">                                                         <div class="md-toolbar-tools" layout>                                                             <div flex layout layout-align="start center">                                                                 <div class="md-icon-button"><md-icon class="material-icons">chrome_reader_mode</md-icon></div>                                                                 <h2>&nbsp {{vm.header}}</h2>                                                             </div>                                                         </div>                                                     </md-toolbar>                                                     <div>                                                         <md-dialog-content>                                                             <md-content layout-padding>                                                                 <div flex>                                                                     <entifix-select                                                                          value-model="vm.entity.pageSize"                                                                          show-editable-fields="true"                                                                         component-construction="vm.pageSizeComponentConstruction"                                                                          component-binding-out="vm.pageSizeInstance">                                                                     </entifix-select>                                                                 </div>                                                                 <div flex>                                                                     <entifix-checkbox-switch                                                                          value-model="vm.entity.tableStriped"                                                                          show-editable-fields="true"                                                                         component-construction="vm.tableStripedComponentConstruction">                                                                     </entifix-checkbox-switch>                                                                 </div>                                                                 <div flex>                                                                     <entifix-select                                                                          value-model="vm.entity.pageOrientation"                                                                          show-editable-fields="true"                                                                         component-construction="vm.pageOrientationComponentConstruction"                                                                          component-binding-out="vm.pageOrientationInstance">                                                                     </entifix-select>                                                                 </div>                                                             </md-content>                                                         </md-dialog-content>                                                         <md-dialog-actions layout="row">                                                             <md-button ng-click="vm.cancel()">                                                                 <md-icon class="material-icons">clear</md-icon> Cancelar                                                             </md-button>                                                             <md-button  ng-click="vm.ok()">                                                                 <md-icon class="material-icons">done</md-icon> Ok                                                             </md-button>                                                         </md-dialog-actions>                                                     </div>                                                 </md-dialog>',controller:"EntifixDownloadReportSettingsController",parent:angular.element(document.body),clickOutsideToClose:!1,escapeToClose:!1,fullscreen:!0,controllerAs:"vm"}).then(function(e){t&&t(e)},function(e){n&&n(e)})}}}angular.module("entifix-js").controller("EntifixDownloadReportSettingsController",e),e.$inject=["$mdDialog","EntifixNotification"],angular.module("entifix-js").factory("EntifixDownloadReportSettings",t),t.$inject=["$mdDialog"]}(),function(){function e(n,e,o,i,r,c){var a=this;a.cancel=function(){i.cancel()},a.ok=function(){a.systemOwner?new e(o.systemOwnerEntitySwapName.get()).saveEntity(_defineProperty({},o.idSystemOwnerPropertyName.get(),a.systemOwner),function(e,t){t?(n.saveTokens(e.data.data[o.authTokenName.get()],e.data.data[o.refreshTokenName.get()]),r.success({body:"La actualización de "+o.systemOwnerDisplayName.get()+" ha sido exitosa.",isToast:!0}),c.reload(),i.hide(a.systemOwner)):r.error({body:"Ocurrió un error durante la actualización de "+o.systemOwnerDisplayName.get()+". Por favor vuelva a intentarlo.",isToast:!0})},function(e){r.error({body:"Ocurrió un error durante la actualización de "+o.systemOwnerDisplayName.get()+". Por favor vuelva a intentarlo. "+e.data.message,isToast:!0})}):r.error({body:"Por favor, seleccione un "+o.systemOwnerDisplayName.get()+".",isToast:!0})},a.resource=new e(o.systemOwnerEntityName.get()),a.header="Elija un(a) "+o.systemOwnerDisplayName.get(),a.systemOwnerQueryDetails={resource:a.resource},a.systemOwnerComponentConstruction={title:{text:o.systemOwnerDisplayName.get()},displayPropertyName:"systemOwner"}}function t(e){return function(){this.chooseSystemOwner=function(t,n){e.show({template:'<md-dialog aria-label="{{vm.header}}" class="md-md">                                                     <md-toolbar md-colors="{background: \'default-primary-100\'}">                                                         <div class="md-toolbar-tools" layout>                                                             <div flex layout layout-align="start center">                                                                 <div class="md-icon-button"><md-icon class="material-icons">warning</md-icon></div>                                                                 <h2>&nbsp {{vm.header}}</h2>                                                             </div>                                                         </div>                                                     </md-toolbar>                                                     <div>                                                         <md-dialog-content>                                                             <md-content layout-padding>                                                                 <div flex>                                                                     <entifix-select                                                                          value-model="vm.systemOwner"                                                                          show-editable-fields="true"                                                                         query-details="vm.systemOwnerQueryDetails"                                                                          component-construction="vm.systemOwnerComponentConstruction"                                                                          component-binding-out="vm.systemOwnerInstance">                                                                     </entifix-select>                                                                 </div>                                                             </md-content>                                                         </md-dialog-content>                                                         <md-dialog-actions layout="row">                                                             <md-button ng-click="vm.cancel()">                                                                 <md-icon class="material-icons">clear</md-icon> Cancelar                                                             </md-button>                                                             <md-button  ng-click="vm.ok()">                                                                 <md-icon class="material-icons">done</md-icon> Ok                                                             </md-button>                                                         </md-dialog-actions>                                                     </div>                                                 </md-dialog>',controller:"EntifixSystemOwnerController",parent:angular.element(document.body),clickOutsideToClose:!1,escapeToClose:!1,fullscreen:!0,controllerAs:"vm"}).then(function(e){t&&t(e)},function(e){n&&n(e)})}}}angular.module("entifix-js").controller("EntifixSystemOwnerController",e),e.$inject=["EntifixSession","EntifixResource","EntifixConfig","$mdDialog","EntifixNotification","$state"],angular.module("entifix-js").factory("EntifixSystemOwner",t),t.$inject=["$mdDialog"]}(),function(){var e=angular.module("entifix-js");function t(e,t,n,o,i,r,c,a,s,u,l){var m=this;m.componentConstruction=a(),m.componentBehavior=s(),m.componentBindingOut=u(),m.queryDetails=l();var d={edit:!0,view:!1};m.connectionComponent={},m.connectionComponent.state=d.edit,m.entity={get:function(){return m.connectionComponent?m.connectionComponent.entity:null},set:function(e){if(m.connectionComponent){var t=m.connectionComponent.entity;m.connectionComponent.entity=e,m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onChangeEntity&&m.componentBehavior.events.onChangeEntity(t,e)}}},m.isLoading={get:function(){return!(!m.queryDetails||!m.queryDetails.resource)&&m.queryDetails.resource.isLoading.get()}},m.isSaving={get:function(){return!(!m.queryDetails||!m.queryDetails.resource)&&m.queryDetails.resource.isSaving.get()}},m.isDeleting={get:function(){return!(!m.queryDetails||!m.queryDetails.resource)&&m.queryDetails.resource.isDeleting.get()}},m.onTask={get:function(){return m.isLoading.get()||m.isSaving.get()||m.isDeleting.get()}},m.size={get:function(){return m.componentConstruction&&m.componentConstruction.size?m.componentConstruction.size:"md-md"}},m.title={get:function(){if(m.componentConstruction&&m.componentConstruction.title){if(m.componentConstruction.title.entityName)return m.connectionComponent.showEditableFields.get()?"Agregar "+m.componentConstruction.title.entityName:"Editar "+m.componentConstruction.title.entityName;if(m.componentConstruction.title.entityProperty&&m.entity.get())return m.connectionComponent.showEditableFields.get()?"Agregar "+m.entity.get()[m.componentConstruction.title.entityProperty]:"Editar "+m.entity.get()[m.componentConstruction.title.entityProperty];if(m.componentConstruction.title.getter)return m.componentConstruction.title.getter();if(m.componentConstruction.title.text)return m.componentConstruction.title.text}return m.connectionComponent.showEditableFields.get()?"Agregar Registro":"Editar Registro"}},m.icon={get:function(){return m.componentConstruction&&m.componentConstruction.icon&&m.componentConstruction.icon.text?m.componentConstruction.icon.text:"menu"}},m.canCancel={get:function(){return!(!m.componentConstruction||!m.componentConstruction.cancel||m.connectionComponent.state!=d.edit)}},m.cancelIcon={get:function(){return m.componentConstruction&&m.componentConstruction.cancel&&m.componentConstruction.cancel.icon?m.componentConstruction.cancel.icon:"clear"}},m.cancelText={get:function(){if(m.componentConstruction&&m.componentConstruction.cancel&&m.componentConstruction.cancel.text){if(m.componentConstruction.cancel.text.getter)return m.componentConstruction.cancel.text.getter();if(m.componentConstruction.cancel.text)return m.componentConstruction.cancel.text}return"Cancelar"}},m.cancelHref={get:function(){return m.componentConstruction&&m.componentConstruction.cancel&&m.componentConstruction.cancel.href?m.componentConstruction.cancel.href instanceof Object&&m.componentConstruction.cancel.href.getter?m.componentConstruction.cancel.href.getter(m.entity.get(),m.queryDetails.resource):m.componentConstruction.cancel.href:null}},m.canOk={get:function(){return!(!m.componentConstruction||!m.componentConstruction.ok||m.connectionComponent.state!=d.view)}},m.okIcon={get:function(){return m.componentConstruction&&m.componentConstruction.ok&&m.componentConstruction.ok.icon?m.componentConstruction.ok.icon:"done"}},m.okText={get:function(){return m.componentConstruction&&m.componentConstruction.ok&&m.componentConstruction.ok.text?""+m.componentConstruction.ok.text:"Aceptar"}},m.canEdit={get:function(){return!(!(m.componentConstruction&&m.componentConstruction.edit&&m.queryDetails&&m.queryDetails.resource&&m.entity.get())||m.queryDetails.resource.isNewEntity(m.entity.get())||m.connectionComponent.state!=d.view)}},m.editIcon={get:function(){return m.componentConstruction&&m.componentConstruction.edit&&m.componentConstruction.edit.icon?m.componentConstruction.edit.icon:"create"}},m.editText={get:function(){if(m.componentConstruction&&m.componentConstruction.edit){if(m.componentConstruction.edit.text instanceof Object&&m.componentConstruction.edit.text.getter)return m.componentConstruction.edit.text.getter();if(m.componentConstruction.edit.text)return m.componentConstruction.edit.text}return"Editar"}},m.editHref={get:function(){return m.componentConstruction&&m.componentConstruction.edit&&m.componentConstruction.edit.href?m.componentConstruction.edit.href instanceof Object&&m.componentConstruction.edit.href.getter?m.componentConstruction.edit.href.getter(m.entity.get(),m.queryDetails.resource):m.componentConstruction.edit.href:null}},m.canSave={get:function(){return!(!m.componentConstruction||!m.componentConstruction.save||m.connectionComponent.state!=d.edit)}},m.saveIcon={get:function(){return m.componentConstruction&&m.componentConstruction.save&&m.componentConstruction.save.icon?""+m.componentConstruction.save.icon:"save"}},m.saveText={get:function(){if(m.componentConstruction&&m.componentConstruction.save){if(m.componentConstruction.save.text instanceof Object&&m.componentConstruction.save.text.getter)return m.componentConstruction.save.text.getter();if(m.componentConstruction.save.text)return m.componentConstruction.save.text}return"Guardar"}},m.saveHref={get:function(){return m.componentConstruction&&m.componentConstruction.save&&m.componentConstruction.save.href?m.componentConstruction.save.href instanceof Object&&m.componentConstruction.save.href.getter?m.componentConstruction.save.href.getter(m.entity.get(),m.queryDetails.resource):m.componentConstruction.save.href:null}},m.canRemove={get:function(){return!(!(m.componentConstruction&&m.componentConstruction.remove&&m.queryDetails&&m.queryDetails.resource&&m.entity.get())||m.queryDetails.resource.isNewEntity(m.entity.get())||m.connectionComponent.state!=d.edit)}},m.removeIcon={get:function(){return m.componentConstruction&&m.componentConstruction.remove&&m.componentConstruction.remove.icon?m.componentConstruction.remove.icon:"delete"}},m.removeText={get:function(){if(m.componentConstruction&&m.componentConstruction.remove){if(m.componentConstruction.remove.text instanceof Object&&m.componentConstruction.remove.text.getter)return m.componentConstruction.remove.text.getter();if(m.componentConstruction.remove.text)return m.componentConstruction.remove.text}return"Eliminar"}},m.removeHref={get:function(){return m.componentConstruction&&m.componentConstruction.remove&&m.componentConstruction.remove.href?m.componentConstruction.remove.href instanceof Object&&m.componentConstruction.remove.href.getter?m.componentConstruction.remove.href.getter(m.entity.get(),m.queryDetails.resource):m.componentConstruction.remove.href:null}},m.canProcess={get:function(){return!(!(m.componentConstruction&&m.componentConstruction.process&&m.connectionComponent.state==d.view&&m.queryDetails&&m.queryDetails.resource&&m.entity.get())||m.queryDetails.resource.isNewEntity(m.entity.get())||m.queryDetails.resource.isProcessedEntity(m.entity.get()))}},m.processIcon={get:function(){return m.componentConstruction&&m.componentConstruction.process&&m.componentConstruction.process.icon?m.componentConstruction.process.icon:"done_all"}},m.processText={get:function(){return m.componentConstruction&&m.componentConstruction.process&&m.componentConstruction.process.text?""+m.componentConstruction.process.text:"Procesar"}},m.allowActions={get:function(){return!m.componentConstruction||null==m.componentConstruction.allowActions||m.componentConstruction.allowActions}},m.saveTooltip={get:function(){return m.componentConstruction&&m.componentConstruction.saveTooltip?m.componentConstruction.saveTooltip:"Todos los campos obligatorios deben estar correctos"}},m.historyTooltip={get:function(){return m.componentConstruction&&m.componentConstruction.historyTooltip?m.componentConstruction.historyTooltip:"Mostrar Bitácora"}};var p=!0;function g(){var e=o.CreateStringHtmlComponentAndBindings(m.componentConstruction,"bindCtrl.connectionComponent.objectBindings");m.stringhtmlcomponent=e.stringhtml,m.connectionComponent.objectBindings=e.objectbindings}function v(){e.hide()}function f(){m.queryDetails.resource.saveEntity(m.connectionComponent.entity,function(e,t){t&&(e&&e.data.data&&m.entity.set(e.data.data),v())})}function C(e,t){m.connectionComponent.state=e?d.view:d.edit,m.entity.set(t)}m.canViewHistory={get:function(){return!!p},set:function(e){p=e}},m.history={get:function(){return c.showHistory},set:function(){c.showHistory=!c.showHistory}},m.hasPermissions={get:function(){return!(!m.componentConstruction||null==m.componentConstruction.permissions)}},m.hasAllPermission={get:function(){return!(null==m.componentConstruction.permissions.all||!r.checkPermissions(m.componentConstruction.permissions.all))}},m.hasSavePermission={get:function(){return!(m.componentConstruction.permissions.save&&(null==m.componentConstruction.permissions.save||!r.checkPermissions(m.componentConstruction.permissions.save)))}},m.hasEditPermission={get:function(){return!(m.componentConstruction.permissions.edit&&(null==m.componentConstruction.permissions.edit||!r.checkPermissions(m.componentConstruction.permissions.edit)))}},m.hasRemovePermission={get:function(){return!(m.componentConstruction.permissions.remove&&(null==m.componentConstruction.permissions.remove||!r.checkPermissions(m.componentConstruction.permissions.remove)))}},m.hasProcessPermission={get:function(){return!(m.componentConstruction.permissions.process&&(null==m.componentConstruction.permissions.process||!r.checkPermissions(m.componentConstruction.permissions.process)))}},m.cancel=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onCancel&&m.componentBehavior.events.onCancel(),m.componentConstruction.cancel.customAction?m.componentConstruction.cancel.customAction(v,m.entity.get()):m.queryDetails.resource.isNewEntity(m.connectionComponent.entity)?e.cancel():(m.connectionComponent.state=d.view,m.entity.get()&&m.queryDetails.resource.loadAsResource(m.entity.get(),function(e){m.entity.set(e)})),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onCanceled&&m.componentBehavior.events.onCanceled()},m.ok=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onOk&&m.componentBehavior.events.onOk(),m.componentConstruction.ok.customAction?m.componentConstruction.ok.customAction(v,m.entity.get()):v(),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onAfterOk&&m.componentBehavior.events.onAfterOk()},m.edit=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onEdit&&m.componentBehavior.events.onEdit(),m.componentConstruction.edit.customAction?m.componentConstruction.edit.customAction(m.entity.get(),v):m.connectionComponent.state=d.edit,m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onEdited&&m.componentBehavior.events.onEdited()},m.save=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onSave&&m.componentBehavior.events.onSave(m.entity.get()),m.componentConstruction.save.customAction?m.componentConstruction.save.customAction(m.entity.get(),v,C):f(),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onSaved&&m.componentBehavior.events.onSaved()},m.remove=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onRemove&&m.componentBehavior.events.onRemove(),m.componentConstruction.remove.customAction?m.componentConstruction.remove.customAction(m.entity.get(),v):i.confirm({body:"Está seguro de eliminar el registro",header:"Confirmación requerida",actionConfirm:function(){m.queryDetails.resource.deleteEntity(m.connectionComponent.entity,function(){v()})},actionCancel:function(){}}),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onRemoved&&m.componentBehavior.events.onRemoved()},m.process=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onProcess&&m.componentBehavior.events.onProcess(),m.componentConstruction.process.customAction?m.componentConstruction.process.customAction(m.entity.get(),v,C):(m.connectionComponent.entity[m.queryDetails.resource.getOpProperty.get()]="PROCESAR",f()),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onProcessed&&m.componentBehavior.events.onProcessed()},m.submit=function(){m.save()},new t(m.queryDetails.resource),m.connectionComponent.IsCreating=!0,m.componentBindingOut.object?(m.connectionComponent.state=d.view,m.entity.set(m.componentBindingOut.object)):m.entity.set({}),m.connectionComponent.entity=m.entity.get(),m.queryDetails.resource&&(m.connectionComponent.resource=m.queryDetails.resource),m.connectionComponent.showEditableFields={get:function(){return m.connectionComponent.state==d.edit},set:function(e){1==e&&(m.connectionComponent.state=d.edit),0==e&&(m.connectionComponent.state=d.view)}},m.connectionComponent.state=m.connectionComponent.showEditableFields.get(),m.connectionComponent.isSaving=m.isSaving,m.connectionComponent.history=m.history,m.connectionComponent.canViewHistory=m.canViewHistory,m.connectionComponent.canCancel={get:function(){return m.canCancel.get()}},m.connectionComponent.canRemove={get:function(){return m.canRemove.get()}},m.connectionComponent.canSave={get:function(){return m.canSave.get()}},m.connectionComponent.canEdit={get:function(){return m.canEdit.get()}},m.connectionComponent.canOk={get:function(){return m.canOk.get()}},m.connectionComponent.canProcess={get:function(){return m.canProcess.get()}},m.connectionComponent.cancelText={get:function(){return m.cancelText.get()}},m.connectionComponent.removeText={get:function(){return m.removeText.get()}},m.connectionComponent.saveText={get:function(){return m.saveText.get()}},m.connectionComponent.editText={get:function(){return m.editText.get()}},m.connectionComponent.okText={get:function(){return m.okText.get()}},m.connectionComponent.processText={get:function(){return m.processText.get()}},m.connectionComponent.cancelIcon={get:function(){return m.cancelIcon.get()}},m.connectionComponent.removeIcon={get:function(){return m.removeIcon.get()}},m.connectionComponent.saveIcon={get:function(){return m.saveIcon.get()}},m.connectionComponent.editIcon={get:function(){return m.editIcon.get()}},m.connectionComponent.okIcon={get:function(){return m.okIcon.get()}},m.connectionComponent.processIcon={get:function(){return m.processIcon.get()}},m.connectionComponent.cancel={invoke:function(){m.cancel()}},m.connectionComponent.remove={invoke:function(){m.remove()}},m.connectionComponent.edit={invoke:function(){m.edit()}},m.connectionComponent.ok={invoke:function(){m.ok()}},m.connectionComponent.save={invoke:function(){m.save()}},m.connectionComponent.process={invoke:function(){m.process()}},m.connectionComponent.onTask={get:function(){return m.onTask.get()}},m.connectionComponent.saveTooltip={get:function(){return m.saveTooltip.get()}},m.connectionComponent.entityForm={valid:function(){return m.entityForm.$valid}},m.connectionComponent.evaluateErrors={get:function(e){return function(t){var n={};for(var o in m.entityForm.$error){var e=m.entityForm.$error[o];e instanceof Array&&e.forEach(function(e){e.$name==t&&(n[o]=!0)})}return n}(e)}},function e(){m.entityForm?m.connectionComponent.entityForm=m.entityForm:n(e,200)}(),m.componentConstruction&&g(),m.componentBindingOut={showEditableFields:m.connectionComponent.showEditableFields,entity:m.entity,recreateDynamicComponent:g},m.componentBehavior&&m.componentBehavior.afterConstruction&&m.componentBehavior.afterConstruction(),m.hasPermissions.get()&&(m.hasAllPermission.get()||(m.hasSavePermission.get()||delete m.componentConstruction.save,m.hasEditPermission.get()||delete m.componentConstruction.edit,m.hasRemovePermission.get()||delete m.componentConstruction.remove,m.hasProcessPermission.get()||delete m.componentConstruction.process))}function n(u){return function(r,c,a,s){this.openModal=function(t){if(r&&r.event)var e=r.event;if(r&&null!=r.clickOutsideToClose)var n=r.clickOutsideToClose;else n=!1;if(r&&null!=r.escapeToClose)var o=r.escapeToClose;else o=!0;if(r&&null!=r.fullscreen)var i=r.fullscreen;else i=!0;u.show({template:'<md-dialog aria-label="{{bindCtrl.title.get()}}" ng-class="{\'whirl double-up whirlback\': bindCtrl.onTask.get() }" class="{{bindCtrl.size.get()}}">                                                     <md-toolbar md-colors="{background:\'default-primary-500\'}">                                                         <div class="md-toolbar-tools" layout>                                                             <div flex layout layout-align="start center">                                                                 <div class="md-icon-button"><md-icon class="material-icons">{{bindCtrl.icon.get()}}</md-icon></div>                                                                 <h2>&nbsp{{bindCtrl.title.get()}}</h2>                                                             </div>                                                             <div flex layout layout-align="end center" ng-if="bindCtrl.canViewHistory.get()">                                                                 <md-button layout layout-align="end end" class="md-primary text-success md-fab md-mini" ng-click="bindCtrl.history.set()">                                                                     <md-tooltip>{{bindCtrl.historyTooltip.get()}}</md-tooltip>                                                                     <md-icon class="material-icons">history</md-icon>                                                                 </md-button>                                                             </div>                                                         </div>                                                     </md-toolbar>                                                     <form name="bindCtrl.entityForm" novalidate ng-submit="bindCtrl.entityForm.$valid && bindCtrl.submit()" autocomplete="off">                                                         <md-dialog-content>                                                             <md-content layout-padding>                                                                 <div compile="bindCtrl.stringhtmlcomponent" flex="100"></div>                                                             </md-content>                                                         </md-dialog-content>                                                         <md-dialog-actions layout="row" ng-if="bindCtrl.allowActions.get()">                                                             <md-button ng-show="bindCtrl.canCancel.get()" ng-click="bindCtrl.cancel()" ng-disabled="bindCtrl.onTask.get()" ng-href="{{bindCtrl.cancelHref.get()}}">                                                                 <md-icon class="material-icons">{{bindCtrl.cancelIcon.get()}}</md-icon>&nbsp;{{bindCtrl.cancelText.get()}}                                                             </md-button>                                                             <md-button class="md-warn" ng-show="bindCtrl.canRemove.get()" ng-click="bindCtrl.remove()" ng-disabled="bindCtrl.onTask.get()" ng-href="{{bindCtrl.removeHref.get()}}">                                                                 <md-icon class="material-icons">{{bindCtrl.removeIcon.get()}}</md-icon>&nbsp;{{bindCtrl.removeText.get()}}                                                             </md-button>                                                             <md-button type="submit" class="md-primary" ng-show="bindCtrl.canSave.get()" ng-disabled="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">                                                                 <md-tooltip ng-if="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">{{bindCtrl.saveTooltip.get()}}</md-tooltip>                                                                 <md-icon class="material-icons">{{bindCtrl.saveIcon.get()}}</md-icon>&nbsp;{{bindCtrl.saveText.get()}}                                                             </md-button>                                                             <md-button class="md-accent" ng-show="bindCtrl.canEdit.get()" ng-click="bindCtrl.edit()" ng-disabled="bindCtrl.onTask.get()" ng-href="{{bindCtrl.editHref.get()}}">                                                                 <md-icon class="material-icons">{{bindCtrl.editIcon.get()}}</md-icon>&nbsp;{{bindCtrl.editText.get()}}                                                             </md-button>                                                             <md-button ng-show="bindCtrl.canOk.get()" ng-click="bindCtrl.ok()" ng-disabled="bindCtrl.onTask.get()" ng-href="{{bindCtrl.okHref.get()}}">                                                                 <md-icon class="material-icons">{{bindCtrl.okIcon.get()}}</md-icon>&nbsp;{{bindCtrl.okText.get()}}                                                             </md-button>                                                             <md-button class="md-primary" ng-show="bindCtrl.canProcess.get()" ng-click="bindCtrl.process()" ng-disabled="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">                                                                 <md-tooltip ng-if="bindCtrl.onTask.get() || !bindCtrl.entityForm.$valid">{{bindCtrl.saveTooltip.get()}}</md-tooltip>                                                                 <md-icon class="material-icons">{{bindCtrl.processIcon.get()}}</md-icon>&nbsp;{{bindCtrl.processText.get()}}                                                             </md-button>                                                         </md-dialog-actions>                                                     </form>                                                 </md-dialog>',controller:"EntifixEntityModalController",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:n,escapeToClose:o,fullscreen:i,controllerAs:"bindCtrl",multiple:!0,locals:{componentConstruction:function(){return r},componentBehavior:function(){return c},componentBindingOut:function(){return a},queryDetails:function(){return s}}}).then(function(e){t&&t(e)},function(){})}}}e.controller("EntifixEntityModalController",t),t.$inject=["$mdDialog","EntifixNotifier","$timeout","BaseComponentFunctions","EntifixNotification","EntifixSession","$rootScope","componentConstruction","componentBehavior","componentBindingOut","queryDetails"],e.factory("EntifixEntityModal",n),n.$inject=["$mdDialog"]}();